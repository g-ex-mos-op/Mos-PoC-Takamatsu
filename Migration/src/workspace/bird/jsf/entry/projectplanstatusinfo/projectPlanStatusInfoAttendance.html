<html xmlns:m="http://www.seasar.org/maya" m:extends="/jsf/layout/layoutNoNavi.html" m:action="#{projectPlanStatusInfoAttendanceAction.initialize}">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title></title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="事業方針説明会申込状況確認"/>
<span m:inject="s:insert" m:name="bodyTitleName">■事業方針説明会申込状況確認</span>
<span m:inject="f:param" m:name="onLoadName" m:value="init();"/>
<span m:inject="f:param" m:name="viewIdValue" m:value="BEN012V02"/>
<span m:inject="s:insert" m:name="body">
<style type="text/css">
<!--
.scroll_area {
	height				: 320px;
	width				: 100%;
}

-->
</style>
<script type="text/javascript">

<!--


function init() {
    loadScroll("projectscroll",285);
	var taishoJokenIndex = document.conditionForm.elements['conditionForm:taishouJokenChoice'].selectedIndex;
 	var taishoJoken = document.conditionForm.elements['conditionForm:taishouJokenChoice'].value;
 	if(taishoJokenIndex == '2') {
		focusElement('conditionForm');
	}
}
function changeTaishoJeken(){
	//支部リスト表示・非表示
	var taishoJokenIndex = document.conditionForm.elements['conditionForm:taishouJokenChoice'].selectedIndex;
 	var taishoJoken = document.conditionForm.elements['conditionForm:taishouJokenChoice'].value;
	var sibu1 =document.getElementById('conditionForm:div_sibu1');
 	var sv1 =document.getElementById('conditionForm:div_sv1');
 	var th =document.getElementById('conditionForm:th_Shuturyoku');
 	var td =document.getElementById('conditionForm:td_Shuturyoku');
 	var th2 =document.getElementById('conditionForm:th_Shuturyoku2');
 	var td2 =document.getElementById('conditionForm:td_Shuturyoku2');

 	sibu1.style.display="none";
	sv1.style.display="none";
 	th.style.display="none";
	td.style.display="none";
 	th2.style.display="none";
	td2.style.display="none";

	if(taishoJokenIndex == '1') {
		sibu1.style.display="";
	 	th.style.display="";
		td.style.display="";
	}else if(taishoJokenIndex == '2') {
		sv1.style.display="";
	 	th2.style.display="";
		td2.style.display="";
	}
}
/**
 * 実行ボタン押下処理
 *
 */
function exec(){
	//結果確認ダウンロードボタンを出すかどうかの
	var taishoIndex = document.conditionForm.elements['conditionForm:taishouListChoice'].selectedIndex;
	if(taishoIndex != '4') {
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:search';
		document.conditionForm.submit();
	}else if(taishoIndex == '4') {
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:downloadCsv';
		document.conditionForm.elements['conditionForm:kekkaCsv'].value = "1";
		document.conditionForm.submit();
	}
}
/**
 * ダウロードボタン押下処理
 *
 */
function execDownload(){
	var attendKbnChoice= document.conditionForm.elements['conditionForm:attendKbnChoice'].value;

	document.csvForm.elements['csvForm:kekkaCsv'].value = "0";
	document.csvForm.elements['csvForm:attendKbnChoice'].value = attendKbnChoice;
	//アクションの値を設定する。
	document.csvForm.elements['csvForm:__link_clicked__'].value='csvForm:downloadCsv';
	document.csvForm.submit();
}
/**
 * 共通「SV選択」を呼び出す
 *
 */
function callSvForm(){
	//アクションの値を設定する。
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:callSvForm';
	document.conditionForm.submit();
}

function returnBack(){
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:returnBack';
	document.conditionForm.submit();
}
-->

</SCRIPT>

<form m:id="conditionForm" onKeyDown="return setDefaultSubmitButton('conditionForm','executeBt');">
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="windowId" m:value="#{projectPlanStatusInfoDto.windowId}"/>
	<input type="hidden" m:id="kekkaCsv" m:value="#{projectPlanStatusInfoDto.kekkaCsv}"/>
	<a id="search" m:action="#{projectPlanStatusInfoAttendanceAction.search}"/>
	<a id="downloadCsv" m:action="#{projectPlanStatusInfoViewJigyouCsvAction.downloadCsv}"/>
	<a id="callSvForm" m:action="#{projectPlanStatusInfoAttendanceAction.callSvForm}"/>
	<a id="returnBack" m:action="#{projectPlanStatusInfoAttendanceAction.back}"/>
	<input type="button" value="戻る" m:onclick="returnBack();return false;"/>
	<table class="mine_table" width="100%" style="margin-top:3px;">
    	<tr>
			<th rowspan="2" width="10%">開催日</th>
	    	<th rowspan="2" width="25%">説明会名称</th>
	    	<th width="13%">本部&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;：申込開始</th>
	    	<th width="13%">本部&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;：申込終了</th>
	    	<th colspan="2" width="6%">事業方針</th>
	    	<th colspan="2" width="6%">懇親会</th>
	    	<th colspan="2" width="6%">定時総会</th>
    	</tr>

    	<tr>
	    	<th width="13%">オーナー：申込開始</th>
	    	<th width="13%">オーナー：申込終了</th>
	    	<th width="3%">出席</th>
	    	<th width="3%">欠席</th>
	    	<th width="3%">出席</th>
	    	<th width="3%">欠席</th>
	    	<th width="3%">出席</th>
    		<th width="3%">欠席</th>
    	</tr>

    	<tr>
			<td rowspan="2" width="10%">
				<span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.kaisaiDt}" m:converter="#{projectPlanStatusInfoConverter1}"/>
			</td>
	    	<td rowspan="2" width="25%"><span m:converter="#{characterEncodingConverter}" m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.entryTitle}"/></td>
	    	<td width="13%"><span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.honbuFromDt}" m:converter="#{projectPlanStatusInfoConverter2}"/></td>
	    	<td width="13%"><span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.honbuToDt}" m:converter="#{projectPlanStatusInfoConverter2}"/></td>
	    	<td rowspan="2" width="3%" align="right"><span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.jAttendCnt}"/></td>
	    	<td rowspan="2" width="3%" align="right"><span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.jAbsentCnt}"/></td>
	    	<td rowspan="2" width="3%" align="right"><span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.konAttendCnt}"/></td>
	    	<td rowspan="2" width="3%" align="right"><span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.konAbsentCnt}"/></td>
	    	<td rowspan="2" width="3%" align="right"><span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.kyoAttendCnt}"/></td>
    		<td rowspan="2" width="3%" align="right"><span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.kyoAbsentCnt}"/></td>
    	</tr>

    	<tr>
	    	<td width="13%"><span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.onerFromDt}" m:converter="#{projectPlanStatusInfoConverter2}"/></td>
	    	<td width="13%"><span m:value="#{projectPlanStatusInfoDto.entityUIStatusInfo.onerToDt}" m:converter="#{projectPlanStatusInfoConverter2}"/></td>
    	</tr>
	</table>
	<table class="body_table" style=" margin-top:4px; float:left;">
		<tr>
			<th>対象条件</th>
	    	<td>
	   			<div class="hideArea">
			    <select m:id="taishouJokenChoice"
			    		m:value="#{projectPlanStatusInfoDto.taishouJokenChoice}"
			    		m:items="#{projectPlanStatusInfoDto.taishouJokenList}"
			    		m:itemValue="selectPullId"
			    		m:itemLabel="selectPullName"
			    		m:onchange="changeTaishoJeken()"/>
			    </div>
	   		</td>
	   		<div id="div_sibu1" class="div_sibu" m:style="#{(projectPlanStatusInfoDto.taishouJokenChoice == '1') == true ? '' : 'display:none;'}">
				<th m:id="th_Shuturyoku" m:style="#{(projectPlanStatusInfoDto.taishouJokenChoice == '1') == true ? '' : 'display:none;'}">支部</th>
		    	<td m:id="td_Shuturyoku" m:style="#{(projectPlanStatusInfoDto.taishouJokenChoice == '1') == true ? '' : 'display:none;'}">
					<div class="hideArea">
	    			<select
	    				m:id="sibuList"
	    				m:value="#{projectPlanStatusInfoDto.sibuListChoice}"
						m:items="#{projectPlanStatusInfoDto.sibuList}"
						m:itemValue="sibuCd"
	    				m:itemLabel="sibuName"/>
	    			</div>
				</td>
			</div>
			<div id="div_sv1" class="div_SVCode" m:style="#{(projectPlanStatusInfoDto.taishouJokenChoice == '2') == true ? '' : 'display:none;'}">
				<th m:id="th_Shuturyoku2"
				    m:style="#{(projectPlanStatusInfoDto.taishouJokenChoice == '2') == true ? '' : 'display:none;'}">SVコード<input type="button" value="検索" class="button_in_table" onClick="callSvForm();return false;"/></th>
		    	<td m:id="td_Shuturyoku2" m:style="#{(projectPlanStatusInfoDto.taishouJokenChoice == '2') == true ? '' : 'display:none;'}">
					<input type="text" m:id="svCd" m:value="#{projectPlanStatusInfoDto.svCd}"
					       size="10" maxlength="8"
					       class="imenotuse height_11"/>
				</td>
	   		</div>

	    	<th>対象</th>
	    	<td>
	   			<div class="hideArea">
	    		<select m:id="taishouListChoice"
	    				m:value="#{projectPlanStatusInfoDto.taishouListChoice}"
	    				m:items="#{projectPlanStatusInfoDto.taishouList}"
	    				m:itemValue="taishouPullId"
			    		m:itemLabel="taishouPullName"
			    		/>
			    </div>
    		</td>
	    </tr>
	</table>
	<input type="button" value="再検索"  name="conditionForm:executeBt" class="operation_button" onClick="exec(); return false;" onDblClick="return false;" m:disabled="#{projectPlanStatusInfoDto.emptyEntityUIStatusInfo}" style="margin-left:3px; margin-top:6px; float:left;"/>
	<!--IE6&7共通スペース対応↓-->
	    <div style="clear:both;"/>

	<!-- ここからプルダウンが事業方針、懇親会、共栄の場合 -->
	<span m:rendered="#{projectPlanStatusInfoDto.sibuInfo != null}">
		<table class="body_table2" style="margin-top:4px;float:left;">
			<tr>
				<th width="110px">出席オーナー</th>
				<td width="60px" align="right">
					<span m:value="#{projectPlanStatusInfoDto.onerAttendanceCnt}" m:converter="#{projectPlanStatusInfoNumericConverter}"/>
				</td>
				<th width="110px">出席人数</th>
				<td width="60px" align="right">
					<span m:value="#{projectPlanStatusInfoDto.attendCnt}" m:converter="#{projectPlanStatusInfoNumericConverter}"/>
				</td>
				<th width="110px">欠席オーナー</th>
				<td width="60px" align="right">
					<span m:value="#{projectPlanStatusInfoDto.onerAbsentCnt}" m:converter="#{projectPlanStatusInfoNumericConverter}"/>
				</td>
				<th width="120px">未登録オーナー</th>
				<td width="60px" align="right">
					<span m:value="#{projectPlanStatusInfoDto.onerMitourokuCnt}" m:converter="#{projectPlanStatusInfoNumericConverter}"/>
				</td>
			</tr>
		</table>
		<table class="body_table" m:rendered="#{projectPlanStatusInfoDto.sibuInfo != null}" style="margin-left:2em; margin-top:3px; float:left;">
			<tr>
				<th>区分</th>
		    	<td>
		    		<select m:id="attendKbnChoice"
						m:value="#{projectPlanStatusInfoDto.attendKbnChoice}"
						m:items="#{projectPlanStatusInfoDto.attendKbn}"
		 	 	  		m:itemValue="attendPullId"
					    m:itemLabel="attendPullName"
					    />
		   		</td>
		   	</tr>
	   	</table>
		<input type="button" value="ダウンロード" onClick="execDownload(); return false;"   style="margin-left:3px; margin-top:5px; float:left;" onDblClick="return false"/>
		  <div style="clear:both;"/>
		<div class="scroll_padding_head">
		<div class="scroll_hidden">
		<table class="mine_table" width="98%" style="clear:both;margin-top:4px;border-bottom:0px;">
			<tr>
				<th width="35px">No.</th>
				<th width="22%">支部</th>
				<th width="*">オーナー</th>
				<th width="60px">出欠席</th>
				<th width="70px">出席人数</th>
				<th width="25%">備考</th>
			</tr>
		</table>
		</div>
		</div>
		<div class="scroll_padding_data">
		<div id="projectscroll" class="scroll_hidden">
			<table class="mine_table" width="98%" style="border-top:0px">
				<span m:inject="s:forEach" m:items="#{projectPlanStatusInfoDto.sibuInfo}" m:var="tab" m:varindex="i">
					<tr>
						<td width="35px" align="right">
			      	 	  <span m:value="#{i+1}"/>
						</td>
						<td width="22%">
							<span m:converter="#{characterEncodingConverter}" m:value="#{tab.sibuName}"/>
						</td>
						<td width="*">
							<span m:value="#{tab.onerCd}"/>
							<span m:converter="#{characterEncodingConverter}" m:value="#{tab.onerNameKj}"/>
						</td>
						<td width="60px" align="center">
							<span m:converter="#{characterEncodingConverter}" m:value="#{tab.ShukketuKbn}"/>
						</td>
						<td width="70px" align="right">
							<span m:value="#{tab.ShussekiCnt}"/>
						</td>
						<td width="25%">
							<span m:converter="#{characterEncodingConverter}" m:value="#{tab.note}"/>
						</td>
					</tr>
				</span>
			</table>
		</div>
		</div>
	<!-- ここまでプルダウンが事業方針、懇親会、共栄の場合 -->
	</span>
</form>
<form m:id="csvForm">
	<a id="downloadCsv" m:action="#{projectPlanStatusInfoViewJigyouCsvAction.downloadCsv}"/>
	<input type="hidden" m:id="windowId" m:value="#{projectPlanStatusInfoDto.windowId}"/>
	<input type="hidden" id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" id="attendKbnChoice" m:value="#{projectPlanStatusInfoDto.attendKbnChoice}"/>
	<input type="hidden" id="kekkaCsv" m:value="#{projectPlanStatusInfoDto.kekkaCsv}"/>
</form>
</span>
</body>
</html>
