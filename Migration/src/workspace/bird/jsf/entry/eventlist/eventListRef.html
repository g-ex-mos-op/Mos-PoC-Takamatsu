<html xmlns:m="http://www.seasar.org/maya" m:action="#{eventListRefAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j"/>
<meta http-equiv="Content-Style-Type" content="text/css"/>
<title>各種イベント申込状況確認</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="各種イベント申込状況確認"/>
<span m:inject="s:insert" m:name="bodyTitleName">■各種イベント申込状況確認</span>
<span m:inject="f:param" m:name="onLoadName" m:value=""/>
<span m:inject="f:param" m:name="viewIdValue" m:value="BEN092V01"/>
<div m:inject="s:insert" m:name="body">
<style type="text/css">
<!--
.scroll_area {
	height				: 440px;
	width				: 960px;
}
.visible_area {
	display				: block;
}
.invisible_area {
	display				: none;
}
-->
</style>

<script type="text/javascript">
<!--
function selectEvent(entryCd, entryYear, entryKai, viewId, entryTermKind) {

	/* パラメータ設定 */
	document.forms['eventListRef'].elements['eventListRef:entryCd'].value = entryCd;
	document.forms['eventListRef'].elements['eventListRef:entryYear'].value = entryYear;
	document.forms['eventListRef'].elements['eventListRef:entryKai'].value = entryKai;
	document.forms['eventListRef'].elements['eventListRef:forwardViewId'].value = viewId;
	document.forms['eventListRef'].elements['eventListRef:entryTermKind'].value = entryTermKind;

}
-->
</script>

<form m:id="eventListRef">
<input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
<input type="hidden" m:id="windowId" m:value="#{eventListConditionDto.windowId}"/>

<a id="selectEvent" m:action="#{eventListRefAction.selectEvent}"/>
<input type="hidden" m:id="entryCd" m:value="#{eventListRefAction.entryCd}"/>
<input type="hidden" m:id="entryYear" m:value="#{eventListRefAction.entryYear}"/>
<input type="hidden" m:id="entryKai" m:value="#{eventListRefAction.entryKai}"/>
<input type="hidden" m:id="forwardViewId" m:value="#{eventListRefAction.viewId}"/>
<input type="hidden" m:id="entryTermKind" m:value="#{eventListRefAction.entryTermKind}"/>

<!-- イベント一覧表示 -->
<div>
<!-- イベント一覧あり -->
<div m:class="#{(!eventListResultDto.emptyEventList) ? 'visible_area' : 'invisible_area'}">
<span style="font-weight:bold;">※対象のイベント名称をクリックしてください。</span>
<!-- ヘッダ部 -->
<table class="body_table2">

	<tr class="header_row">
		<th style="width:160px;"> 対象名</th>
		<th style="width:250px;">開催日</th>
		<th  style="width:330px;">イベント名称</th>
		<th style="width:90px;">申込開始</th>
		<th style="width:90px;">申込終了</th>
	</tr>
</table>

<!-- データ部 -->
<div class="scroll_area">
<table style="border-top-width:0px" class="body_table2">

	<div m:inject="s:forEach" m:items="#{eventListResultDto.eventList}" m:var="e" m:varindex="i">
	<tr class="non_top_border font_size_14">
		<!-- 対象名 -->
		<td  style="width:160px;"><span m:converter="#{characterEncodingConverter}" m:value="#{e.entryName}"/></td>
		<!-- 開催日 -->
		<td style="width:250px;">
			<!-- 開始日/終了日設定あり -->
			<span m:rendered="#{e.openFromDt != '' && e.openToDt != ''}">
				<span m:value="#{e.openFromDt}" m:converter="#{eventListDateConverter1}"/>
				〜
				<span m:value="#{e.openToDt}" m:converter="#{eventListDateConverter1}"/>
			</span>
			<!-- 終了日設定なし -->
			<span m:value="#{e.openFromDt}" m:converter="#{eventListDateConverter1}" m:rendered="#{e.openFromDt != '' && e.openToDt == ''}"/>
			<!-- 開催日設定なし -->
			<div style="text-align:center;" m:rendered="#{e.openFromDt == '' && e.openToDt == ''}">-</div>
		</td>
		<!-- 説明会名称 -->
		<td style="width:330px;">
			<!-- 通常イベント -->
			<a m:action="#{eventListRefAction.selectEvent}" onclick="selectEvent('#{e.entryCd}', '#{e.entryYear}', '#{e.entryKai}', '#{e.viewId}', #{(birdDateInfo.sysDate > e.applyToDt) ? 1 : 0})" m:rendered="#{e.entryType != '5'}">
				<span m:converter="#{characterEncodingConverter}" m:value="#{e.entryTitle}"/>
			</a>
			<!-- e-learning -->
			<a href="#{e.viewId}" m:rendered="#{e.entryType == '5'}" target="_blank">
				<span m:converter="#{characterEncodingConverter}" m:value="#{e.entryTitle}"/>
			</a>
		</td>
		<!-- 申込開始 -->
		<td style="width:90px;"><span m:value="#{e.onerApplyFromDt}" m:converter="#{eventListDateConverter2}"/></td>
		<!-- 申込終了 -->
		<td style="width:90px;"><span m:value="#{e.onerApplyToDt}" m:converter="#{eventListDateConverter2}"/></td>
	</tr>
	</div>
</table>
</div>
</div>
<!-- イベント一覧なし -->
<div m:class="#{(eventListResultDto.emptyEventList) ? 'visible_area' : 'invisible_area'}">
<!-- 固定文言 -->
<p>
	※対象が存在しません。
</p>
</div>
</div>

</form>
</div>
</body>
</html>
