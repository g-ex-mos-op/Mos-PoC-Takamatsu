<html xmlns:m="http://www.seasar.org/maya" m:action="#{mosChickenMstConditionAction.initialize}"
      m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>予約販売管理マスタ登録</title>
<span m:inject="f:param" m:name="layoutTitle" m:value="予約販売管理マスタ登録"/>
<span m:inject="s:insert" m:name="bodyTitleName">■予約販売管理マスタ登録</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBS015V01"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
</head>
<body>
<span m:inject="s:insert" m:name="body" >
<script type="text/javascript">
<!--

var userTypeHONBU = "01";
var userTypeONER = "02";
var userTypeMISE = "03";

function load(){
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function returnLoadingStatus(){
	if(isLoadingFlgOFF()) {
		setLoadingFlg();
		return true;
	}
	return false;
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function isLoadingFlgOFF(){
	return (document.conditionForm.elements['conditionForm:loadingFlg'].value != "ON");
}
/**
 * 新規登録ボタン押下時処理
 *
 */
function execInsert(){
	setJokenData("", "INSERT");
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:modeInsert';
	document.conditionForm.submit();
}
/**
 * 参照リンク押下時処理
 *
 */
function execView(cKanriNo){
	setJokenData(cKanriNo, "VIEW");
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:modeView';

	document.conditionForm.submit();
}
/**
 * 編集リンク押下時処理
 *
 */
function execUpdate(cKanriNo){
	setJokenData(cKanriNo, "UPDATE");
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:modeUpdate';
	document.conditionForm.submit();
}
/**
 * ウィンドウロードフラグ設定処理
 *
 *
 */
function setLoadingFlg() {
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "ON";
}
function setJokenData(cKanriNo, modeType){
	document.conditionForm.elements['conditionForm:targetCkanriNo'].value   =cKanriNo;
	document.conditionForm.elements['conditionForm:modeType'].value =modeType;
}
//-->
</script>

<form m:id="conditionForm" onKeyDown="return setDefaultSubmitButton('conditionForm','executeBt');">
    <input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="targetCkanriNo" m:value="#{mosChickenMstRegistDto.targetCkanriNo}"/>
	<input type="hidden" m:id="modeType" m:value="#{mosChickenMstRegistDto.modeType}"/>
	<input type="hidden" id="loadingFlg" value=""/>
	<div class="search_condition">
		<a id="modeView" m:action="#{mosChickenMstConditionAction.view}"/>
		<a id="modeInsert" m:action="#{mosChickenMstConditionAction.insert}"/>
		<a id="modeUpdate" m:action="#{mosChickenMstConditionAction.update}"/>
		<table>
			<tr>
				<td valign="bottom">
					<input type="button" name="conditionForm:executeBt" value="新規登録"
					       onClick="execInsert();" onDblClick="return false"/>
				</td>
			</tr>
			<tr>
				<td>
				<table class="body_table2" style="width:711px;">
					<caption class="body_title width_percent_98_66"><span style="padding:1px;">対象一覧</span></caption>
					<tr>
						<th class="body_header4" width="*">タイトル</th>
						<th class="body_header4" width="200px">対象期間</th>
					</tr>
				</table>
				<div style="width:729px; height:415px;"class="scroll_area">
				<table class="body_table2" style="width:711px;border-top-width : 0px;">
					<span m:inject="s:forEach" m:items="#{mosChickenMstRegistDto.listCamp}" m:var="e" m:varindex="i">
					<tr class="non_top_border">
						<td width="*" nowrap=" nowrap"><span m:converter="#{characterEncodingConverter}" m:value="#{e.title}" /></td>
						<td width="128px">
							<a href="javaScript:execView('#{e.cKanriNo}')" onDblClick="return false;">[ 参照 ]</a>&nbsp;
							<span m:rendered="#{e.targetFrom <= mosChickenMstRegistDto.sysDate}">
								&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
							<span m:rendered="#{e.targetFrom > mosChickenMstRegistDto.sysDate}">
							<a href="javaScript:execUpdate('#{e.cKanriNo}')" onDblClick="return false;">[ 編集 ]</a>&nbsp;
							</span>
						</td>
						<td width="200px" align="center"><span m:value="#{e.targetFrom}" m:converter="#{dateConverter}"/>〜<span m:value="#{e.targetTo}" m:converter="#{dateConverter}"/></td>
					</tr>
					</span>
				</table>
				</div>
				</td>
			</tr>
		</table>
	</div>
</form>
</span>
</body>
</html>
