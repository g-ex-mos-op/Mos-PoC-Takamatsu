<html xmlns:m="http://www.seasar.org/maya" m:action="#{mosChickenStateConfirmEditAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>ﾋﾟｰｽ・ﾏﾈｰｼﾞｬｰ店別予約状況確認</title>
<span m:inject="f:param" m:name="layoutTitle" m:value="ﾋﾟｰｽ・ﾏﾈｰｼﾞｬｰ店別予約状況確認"/>
<span m:inject="s:insert" m:name="bodyTitleName">■ﾋﾟｰｽ・ﾏﾈｰｼﾞｬｰ店別予約状況確認</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBS021V02"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
</head>
<body>
<span m:inject="s:insert" m:name="body" >
<STYLE type="text/css">
<!--
/* テーブルヘッダデフォルト設定 パターン２*/
/* テーブルヘッダのセンタリング用 */
table.body_table2 tr th.body_header_center{
  text-align            : center;
}
/* 入力フィールドの右詰入力へ指定するためのスタイルシート */
.ratio_style {
  text-align       : right;
  background-color : #FFFFFF;
  color            : black;
}
/* 表：比率項目表示 */
table.body_table2 tr td.etcCnt_red{
  color                 : red;
}
//-->
</STYLE>
<script type="text/javascript">
<!--
var userTypeHONBU = "01";
var userTypeONER = "02";
var userTypeMISE = "03";

function load(){
	focusElement("conditionForm");
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function returnLoadingStatus(){
	if(isLoadingFlgOFF()) {
		setLoadingFlg();
		return true;
	}
	return false;
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function isLoadingFlgOFF(){
	return (document.conditionForm.elements['conditionForm:loadingFlg'].value != "ON");
}
/**
 * タイトルプルダウンリスト変更時処理
 *
 * タイトルプルダウンの値毎に
 * 対象条件プルダウンの内容を変更し、
 * 対象条件プルダウンが変更されることにより表示対象オブジェクトも変更される。
 */
function changeTitle(){
	if(returnLoadingStatus()){
		setJokenData();
		document.conditionForm.target ="_self";
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:changeTitle';
		document.conditionForm.submit();
	}
}
/**
 * 検索ボタン押下時処理
 *
 */
function search(){
	if(returnLoadingStatus()){
		setJokenData();
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:search';	
		document.conditionForm.submit();
	}
}
/**
 * ウィンドウロードフラグ設定処理
 *
 *
 */
function setLoadingFlg() {
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "ON";
}
function setJokenData(){
	//タイトルプルダウンから対象管理番号を設定
	var elementCkanriNo = document.conditionForm.elements['conditionForm:ckanriNo'];
	if(elementCkanriNo != null){
		var cKanriNo = elementCkanriNo.value
		document.conditionForm.elements['conditionForm:targetCkanriNo'].value   =cKanriNo;
	}
	//対象食包材を設定
	var elementShoku = document.conditionForm.elements['conditionForm:shokuCd'];
	if(elementShoku != null){
		var shokuCd = elementShoku.value
		document.conditionForm.elements['conditionForm:targetShokuCd'].value   =shokuCd;
	}
	//対象支部コードを設定
	var elementSibu = document.conditionForm.elements['conditionForm:sibuCd'];
	if(elementSibu != null){
		var sibuCd = elementSibu.value
		document.conditionForm.elements['conditionForm:targetSibuCd'].value   =sibuCd;
	}
	//対象期間のFromを設定
	var elementDateFrom = document.conditionForm.elements['conditionForm:taishoDateFrom'];
	if(elementDateFrom != null){
		var taishoDateFrom = elementDateFrom.value
		document.conditionForm.elements['conditionForm:targetDateFrom'].value   =taishoDateFrom;
		//対象期間のToを設定
		var taishoDateTo = document.conditionForm.elements['conditionForm:taishoDateTo'].value
		document.conditionForm.elements['conditionForm:targetDateTo'].value   =taishoDateFrom;
	}
}
//-->
</script>

	<form m:id="conditionForm" onKeyDown="return setDefaultSubmitButton('conditionForm','executeBt');">
	    <input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
		<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
		<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
		<input type="hidden" m:id="usertypeCd" m:value="#{userTypeCd}"/>
		<input type="hidden" m:id="targetCkanriNo" m:value="#{mosChickenStoreStateConfirmDto.targetCkanriNo}"/>
		<input type="hidden" m:id="targetCompanyCd" m:value="#{mosChickenStoreStateConfirmDto.targetCompanyCd}"/>
		<input type="hidden" m:id="targetShokuCd" m:value="#{mosChickenStoreStateConfirmDto.targetShokuCd}"/>
		<input type="hidden" m:id="targetSibuCd" m:value="#{mosChickenStoreStateConfirmDto.targetSibuCd}"/>
		<input type="hidden" m:id="targetDateFrom" m:value="#{mosChickenStoreStateConfirmDto.targetDateFrom}"/>
		<input type="hidden" m:id="targetDateTo" m:value="#{mosChickenStoreStateConfirmDto.targetDateTo}"/>
		<input type="hidden" m:id="windowId" m:value="#{mosChickenStoreStateConfirmDto.windowId}"/>
		<input type="hidden" id="loadingFlg" value=""/>
		<font style="font-weight:bold">選択できる期間は最大３日間です。（対象期間のうち、過去日の予約本数は集計、表示されません。）</font>
			<a id="changeTitle" m:action="#{mosChickenStoreStateConfirmConditionAction.changeTitle}"/>
			<a id="search" m:action="#{mosChickenStoreStateConfirmConditionAction.search}"/>
			<table class="hiddenBody">
					<tr>
						<td>
						<table class="body_table" style="margin-bottom:4px">
							<tr>
								<th nowrap=" nowrap" class="body_header4">タイトル</th>
								<td width="320px">
									<span m:rendered="#{mosChickenStoreStateConfirmDto.title1CntFlg == false}">
									<div class="hideArea">
									<select class="condition_field" 
											m:id="ckanriNo"
											m:value="#{mosChickenStoreStateConfirmDto.targetCkanriNo}"
											m:items="#{mosChickenStoreStateConfirmDto.listTitle}"
											m:itemValue="ckanriNo"
											m:itemLabel="title"
											m:onchange="changeTitle()"
											>
											<option value="999999">タイトル</option>
										</select>
									</div>
									</span>
									<span m:rendered="#{mosChickenStoreStateConfirmDto.title1CntFlg == true}">
										&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{mosChickenStoreStateConfirmDto.targetTitle}"/>&nbsp;
									</span>
								</td>
								<th nowrap=" nowrap" class="body_headeer4">対象食包材</th>
								<td>
									<span m:rendered="#{mosChickenStoreStateConfirmDto.shokuhou1CntFlg == false}">
									<div class="hideArea">
									<select class="condition_field" 
											m:id="shokuCd"
											m:value="#{mosChickenStoreStateConfirmDto.targetShokuCd}"
											m:items="#{mosChickenStoreStateConfirmDto.listShokuhou}"
											m:itemValue="shokuCd"
											m:itemLabel="shokuNameKna"
											>
											<option value="999">食包材名称</option>
										</select>
									</div>
									</span>
									<span m:rendered="#{mosChickenStoreStateConfirmDto.shokuhou1CntFlg == true}">
										&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{mosChickenStoreStateConfirmDto.targetShokuNameKna}"/>&nbsp;
									</span>
								</td>
							</tr>
							<tr>
								<th nowrap=" nowrap" class="body_headeer4">対象支部</th>
								<td>
									<span m:rendered="#{mosChickenStoreStateConfirmDto.sibu1CntFlg == false}">
									<div class="hideArea">
									<select class="condition_field" 
											m:id="sibuCd"
											m:value="#{mosChickenStoreStateConfirmDto.targetSibuCd}"
											m:items="#{mosChickenStoreStateConfirmDto.listSibu}"
											m:itemValue="sibuCd"
											m:itemLabel="sibuName"
											>
											<option value="999">支部名称</option>
										</select>
									</div>
									</span>
									<span m:rendered="#{mosChickenStoreStateConfirmDto.sibu1CntFlg == true}">
										&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{mosChickenStoreStateConfirmDto.targetSibuName}"/>&nbsp;
									</span>
								</td>
								<th nowrap=" nowrap" class="body_headeer4">対象期間</th>
								<td>
									<span m:rendered="#{mosChickenStoreStateConfirmDto.date1CntFlg == false}">
									<div class="hideArea">
									<select class="condition_field" 
											m:id="taishoDateFrom"
											m:value="#{mosChickenStoreStateConfirmDto.targetDateFrom}"
											m:items="#{mosChickenStoreStateConfirmDto.listDate}"
											m:itemValue="code"
											m:itemLabel="name"
											>
											<option value="20061020">2006/10/20</option>
										</select>
									〜
									<select class="condition_field" 
											m:id="taishoDateTo"
											m:value="#{mosChickenStoreStateConfirmDto.targetDateTo}"
											m:items="#{mosChickenStoreStateConfirmDto.listDate}"
											m:itemValue="code"
											m:itemLabel="name"
											>
											<option value="20061020">2006/10/20</option>
										</select>
									</div>
									</span>
									<span m:rendered="#{mosChickenStoreStateConfirmDto.date1CntFlg == true}">
										&nbsp;<span m:value="#{mosChickenStoreStateConfirmDto.targetDateFrom}" m:converter="#{dateConverter}"/>&nbsp;
										〜
										&nbsp;<span m:value="#{mosChickenStoreStateConfirmDto.targetDateTo}" m:converter="#{dateConverter}"/>&nbsp;
									</span>
								</td>
							</tr>
						</table>
						</td>
						<td valign="bottom">
							<span m:rendered="#{mosChickenStoreStateConfirmDto.execDisabledFlg==false}">
								<input type="button" name="conditionForm:executeBt" 
							       class="operation_button" value="再検索" 
							       onClick="search(); return false;" onDblClick="return false" style="margin-bottom:4px; margin-left:4px;"/>
							</span>
							<span m:rendered="#{mosChickenStoreStateConfirmDto.execDisabledFlg}">
								<input type="button"
								   class="operation_button" value="再検索" disabled=" disabled"/>
							</span>
						</td>
					</tr>
		
			</table>
		<input type="text" m:id="dummyEnter" style="display:none"/>
	
	</form>
	<table class="body_table2" style="width:500px;">	
		<tr>
			<th width="70px">対象支部</th>
			<td width="*"><span m:converter="#{characterEncodingConverter}" m:value="#{mosChickenStoreStateConfirmDto.ichiranSibuName}"/></td>
		</tr>
	</table>

	<table class="body_table2" style="margin-top:4px;width:500px;">
		<tr class="header_row">
			<th width="*">店舗名</th>
			<th width="100px">予約数</th>
		</tr>
	</table>


	<span m:rendered="#{mosChickenStoreStateConfirmDto.listSearchData != null}">
		<div style="width:520px; height:358px;" class="scroll_area">
		<table class="body_table2"  style="width:500px;border-top:0px;">
			<span m:inject="s:forEach" m:items="#{mosChickenStoreStateConfirmDto.listSearchData}" m:var="e" m:varindex="i">
				<tr class="non_top_border">
					<td  width="*"><span m:converter="#{characterEncodingConverter}" m:value="#{e.miseCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{e.miseNameKj}"/></td>
					<td  width="100px" align="right" class="#{e.reserveAmt < 0?'etcCnt_red':''}"><span m:value="#{e.reserveAmt}" m:converter="#{numConverter}"/></td>
				</tr>
			</span>
		</table>
		</div>
	</span>
</span>
</body>
</html>
