<html xmlns:m="http://www.seasar.org/maya" m:action="#{campNipoRefSibuListAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>キャンペーン日報結果</title>
<span m:inject="f:param" m:name="layoutTitle" m:value="キャンペーン日報"/>
<span m:inject="s:insert" m:name="bodyTitleName">■キャンペーン日報</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBR011V01"/>
<span m:inject="f:param" m:name="userTypeCd" m:value="#{campNipoRefSesDto.userTypeCd}"/>
<span m:inject="f:param" m:name="isHonbuUser" m:value="#{campNipoRefSesDto.userTypeCd=='01'}"/>
<span m:inject="f:param" m:name="isTotal" m:value="#{campNipoRefViewDto.menuTotaledKbn == 'TOTAL'}"/>
<span m:inject="f:param" m:name="isDay" m:value="#{campNipoRefViewDto.taishoKikan == 'DAY'}"/>
<span m:inject="f:param" m:name="isHosei" m:value="#{campNipoRefViewDto.zennenDataShubetu == 'DOGETUHOSEI'}"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject = "f:param" m:name = "msg" m:value="結果が表示されるまでに時間がかかります。よろしいですか？"/>
</head>
<body>
<span m:inject="s:insert" m:name="body" >
<STYLE type="text/css">
<!--
table.body_table2 tr td.nameArea{
  width:*%;
  font-weight           : bold;
}
.default_bkgColor td.hiritu{
  background-color      : #C0FFC0;
}
.data_table_width {
    width:98%;
}
.width_Menu {
    width:250px;
}
.width_Uriage {
    width:120px;
}
.width_MenuUriage {
    width:110px;
}
.width_KazuKei {
    width:100px;
}
.width_KoseiHi {
	width:90px;
}
.width_Hiritu {
    width:57px;
}
//-->
</STYLE>
<script type="text/javascript">
<!--
var userTypeHONBU = "01";
var userTypeONER = "02";
var userTypeMISE = "03";
var scrollMaxHeight = 380;

function load(){
	if(document.conditionForm != null && document.conditionForm.elements['conditionForm:windowId'] != null) {
		document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
		if(document.conditionForm.elements['downloadBt'] != null) {
			document.conditionForm.elements['downloadBt'].disabled = "";
		}
  	}
  	loadScroll("campNipoScroll", scrollMaxHeight);
}
/**
 * 会社プルダウンリスト変更時処理o
 *
 * 会社プルダウンの値毎に
 * 対象条件プルダウンの内容を変更し、
 * 対象条件プルダウンが変更されることにより表示対象オブジェクトも変更される。
 */
function changeCompanyCd(){
	if(returnLoadingStatus()){
		setJokenData();
		document.conditionForm.target ="_self";
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:changeCompanyCd';
		document.conditionForm.submit();
	}
}

/**
 * キャンペーンプルダウンリスト変更時処理
 *
 * キャンペーンプルダウンの値毎に
 * 対象日プルダウンの内容を変更される。
 */
function changeCampaign(){
    //対象日プルダウン変更処理
    var sIndex = document.conditionForm.elements['conditionForm:campId'].selectedIndex;
    var campId = document.conditionForm.elements['conditionForm:campId'].options[sIndex].value;
    var taishoKikanElem = document.conditionForm.elements['conditionForm:taishoKikan'];
    var taishoKikan = taishoKikanElem.options[taishoKikanElem.selectedIndex].value;
	//対象日プルダウンリストエレメント取得処理
	var taishoDtPullDown = getPullDownElement("select", "pdwn_taishoDt_"+campId, "_FROM");
	taishoDtPullDown.selectedIndex=0;
	taishoDtPullDown = getPullDownElement("select", "pdwn_taishoDt_"+campId, "_TO");
	taishoDtPullDown.selectedIndex=0;
    if("TOTAL"!=taishoKikan) {
	    //キャンペーン別対象日プルダウン設定処理
	    changeDisplay("div", "pdwn_taishoDt_", campId);
	}
}
/**
 * 店舗種別プルダウン変更処理
 *
 * 店舗種プルダウンの値毎に
 * 前年データ種別のプルダウンの内容を変更
 *
 */
function changeTenposShu(myElemtnt) {
    var sIndex = myElemtnt.selectedIndex;
    var selectedCd = myElemtnt.options[sIndex].value;
    //前年データ種別プルダウン設定
//   	changeDisplay("div", "pdwn_zds_", selectedCd);
//   	var targetCalssNm= "pdwn_zds_"+selectedCd;
	//前年データ種別プルダウンリストエレメント取得処理
//	var	elementPullDown = getPullDownElement("select", "pdwn_zds_", selectedCd);
//	elementPullDown.selectedIndex=0;
}

/**
 * 検索ボタン押下時処理
 *
 */
function search(){
	if(returnLoadingStatus()){
		setJokenData();
		if(isUserType(userTypeHONBU)){
			document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:search';
		}else{
			document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:searchMise';
		}
		if(document.conditionForm.newWinFlg != null
				&& document.conditionForm.newWinFlg.checked) {

			document.conditionForm.elements['conditionForm:newWindowFlg'].value=true;
			document.conditionForm.target ="_blank";
			document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
		}else{
			document.conditionForm.elements['conditionForm:newWindowFlg'].value=false;
			document.conditionForm.target ="_self";
		    document.conditionForm.elements["conditionForm:btnExecute"].disabled = true;
		    if(document.getElementById("conditionForm:pane_result") != null) {
		    	document.getElementById("conditionForm:pane_result").style.display = "none";
		   	}
		    document.getElementById("conditionForm:pane_waitmsg").style.display = "inline";
		}
		document.conditionForm.submit();
	}
}
/**
 * 指定支部店舗一覧画面表示処理
 */
function linkUp(sibuCd) {
	document.conditionForm.elements['conditionForm:view_taishoJoken'].value=document.conditionForm.elements['conditionForm:view_shukeiKbn'].value;
	document.conditionForm.elements['conditionForm:view_hyojiTaisho'].value=sibuCd;
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:linkUp';
	document.conditionForm.elements['conditionForm:newWindowFlg'].value=false;
	document.conditionForm.target ="_blank";
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
	document.conditionForm.submit();
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function returnLoadingStatus(){
	if(isLoadingFlgOFF()) {
		setLoadingFlg();
		return true;
	}
	return false;
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function isLoadingFlgOFF(){
	return (document.conditionForm.elements['conditionForm:loadingFlg'].value != "ON");
}
/**
 * ダウンローﾄﾞボタン押下時処理
 *
 */
function execDownLoad(){
	if(isLoadingFlgOFF()){
	document.conditionForm.elements['conditionForm:view_taishoJoken'].value="ALL";
	document.conditionForm.elements['conditionForm:view_hyojiTaisho'].value="";
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:downloadCsv';
		document.conditionForm.target ="_self";
		document.conditionForm.submit();
	}
}

/**
 * ユーザータイプ判別処理
 *
 */
function isUserType(code){
	var userType = document.conditionForm.elements['conditionForm:userTypeCd'].value;
	return (code == userType);
}
/**
 * 会社コードモスフード判別処理
 *
 */
function isCompanyCdMos(){
	var companyCd = "";
    companyCd = document.conditionForm.elements['conditionForm:companyCd'].value;
	return (companyCd == "00");
}

/**
 * ウィンドウロードフラグ設定処理
 *
 *
 */
function setLoadingFlg() {
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "ON";
}
/**
 * 検索条件値設定処理
 *
 */
function setJokenData(){
	//対象日設定
	var elementTarget = document.conditionForm.elements['conditionForm:campId'];
    var campId = elementTarget.options[elementTarget.selectedIndex].value;
    elementTarget = document.conditionForm.elements['conditionForm:taishoKikan'];
    var taishoKikan = elementTarget.options[elementTarget.selectedIndex].value;

    var taishoDtFrom = "";
    var taishoDtTo = "";
    if("DAY"==taishoKikan || "DAYS"==taishoKikan) {
    //プルダウンリストエレメント取得処理
		var taishoDtPullDown = getPullDownElement("select", "pdwn_taishoDt_", campId+"_FROM");
		taishoDtFrom = taishoDtPullDown.options[taishoDtPullDown.selectedIndex].value;
		taishoDtPullDown = getPullDownElement("select", "pdwn_taishoDt_", campId+"_TO");
		taishoDtTo = taishoDtPullDown.options[taishoDtPullDown.selectedIndex].value;
	}
	document.conditionForm.elements['conditionForm:taishoDt'].value=taishoDtFrom;
	document.conditionForm.elements['conditionForm:taishoDtTo'].value=taishoDtTo;

	//店舗種別設定
	elementTarget = document.conditionForm.elements['conditionForm:pldwnTenpoShubetu'];
	if(elementTarget != null) {
	    var targetCode = elementTarget.options[elementTarget.selectedIndex].value;
		document.conditionForm.elements['conditionForm:tenpoShubetu'].value= targetCode;
	}
	var tenpoShubetu = document.conditionForm.elements['conditionForm:tenpoShubetu'].value;

	//前年データ種別設定
    //プルダウンリストエレメント取得処理
//	elementPullDown = getPullDownElement("select", "pdwn_zds_", tenpoShubetu);
//	var zenDataShubetu = elementPullDown.options[elementPullDown.selectedIndex].value;
//	document.conditionForm.elements['conditionForm:zennenDataShubetu'].value=zenDataShubetu;

	//順位設定
	if(isUserType(userTypeONER) || isUserType(userTypeMISE)) {
		elementTarget = document.conditionForm.elements['conditionForm:pldwnRankKind'];
	    var rankKind = elementTarget.options[elementTarget.selectedIndex].value;
		document.conditionForm.elements['conditionForm:rankKind'].value= rankKind;
	}
}
/**
 * プルダウンリストエレメント取得処理
 */
function getPullDownElement(targetTag, commonClassName, targetCode) {
	var objsDiv = document.conditionForm.getElementsByTagName(targetTag);
	for (i = 0; i < objsDiv.length; i++) {
		var classNm = objsDiv[i].className;
		if(classNm.indexOf(commonClassName)>=0){
			if(classNm.indexOf(targetCode)>=0) {
				return elementPullDown = objsDiv[i];
			}
		}
	}
	return null;
}
/*
 * 対象期間タブ切り替え
 */
function changeTab(taishoKikan, isSearched) {
	document.conditionForm.elements['conditionForm:view_taishoKikan'].value= taishoKikan;
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
	if(isSearched) {
		var firstCalssNm ="view_";
		changeDisplay("div", firstCalssNm, taishoKikan);
		var objs = document.conditionForm.getElementsByTagName("table");
		firstCalssNm =firstCalssNm+"tab_";
		for (i = 0; i < objs.length; i++) {
			var classNm = objs[i].className;
			if(classNm.substring(0,firstCalssNm.length) == firstCalssNm){
				var lastClassNm = classNm.substring(firstCalssNm.length, (firstCalssNm.length+taishoKikan.length));
				if(lastClassNm == taishoKikan) {
					objs[i].className = firstCalssNm+lastClassNm+" body_active_cell";
				}else{
					objs[i].className = firstCalssNm+lastClassNm+" body_non_active_cell";
				}
			}
		}
	    objs = document.conditionForm.getElementsByTagName("a");
		for (i = 0; i < objs.length; i++) {
			var classNm = objs[i].className;
			if(classNm.substring(0,firstCalssNm.length) == firstCalssNm){
				var lastClassNm = classNm.substring(firstCalssNm.length, (firstCalssNm.length+taishoKikan.length));
				if(lastClassNm == taishoKikan) {
					objs[i].className = firstCalssNm+lastClassNm+" body_selected_link";
				}else{
					objs[i].className = firstCalssNm+lastClassNm+" body_non_selected_link";
				}
			}
		}
	}
	else {
		setLoadingFlg();
		setJokenData();
		document.conditionForm.elements['conditionForm:view_taishoKikan'].value= taishoKikan;
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:changeTab';
		document.conditionForm.target ="_self";
	    document.conditionForm.elements["conditionForm:btnExecute"].disabled = true;
	    if(document.getElementById("conditionForm:pane_result") != null) {
	    	document.getElementById("conditionForm:pane_result").style.display = "none";
	   	}
	    document.getElementById("conditionForm:pane_waitmsg").style.display = "inline";
		document.conditionForm.submit();
	}
}
/*
 * 条件フォーム用表示ステータス変更処理
 */
function changeDisplay(targetTag, firstCalssNm, lastClassNm) {
	var objs = document.conditionForm.getElementsByTagName(targetTag);
	for (i = 0; i < objs.length; i++) {
		var classNm = objs[i].className;
		if(classNm.indexOf(firstCalssNm)>=0){
			if(lastClassNm != "" && classNm.indexOf(lastClassNm)>=0) {
				objs[i].style.display     = "inline";
			}else{
				objs[i].style.display   = "none";
			}
		}
	}
}
/**
 * 対象期間プルダウン変更時処理
 *
 */
function changeTaishoKikan(myElemtnt) {
    var sIndex = document.conditionForm.elements['conditionForm:campId'].selectedIndex;
    var campId = document.conditionForm.elements['conditionForm:campId'].options[sIndex].value;
    sIndex = myElemtnt.selectedIndex;
    var selectedCd = myElemtnt.options[sIndex].value;
	var fromPullDown = getPullDownElement("select", "pdwn_taishoDt_"+campId, "FROM");
	fromPullDown.selectedIndex = 0;
	var toPullDown = getPullDownElement("select", "pdwn_taishoDt_"+campId, "TO");
	toPullDown.selectedIndex = 0;
    //期間指定日プルダウン表示制御処理
    if("DAY" == selectedCd) {
   		changeDisplay("div", "pdwn_taishoKikan", "");
	    //キャンペーン別対象日プルダウン設定処理
	    changeDisplay("div", "pdwn_taishoDt_", campId);
   	}
   	else if("TOTAL" == selectedCd) {
   		changeDisplay("div", "pdwn_taishoDt_", "");
   	}
   	else if("DAYS" == selectedCd) {
   		changeDisplay("div", "pdwn_taishoKikan_", "DAYS");
	    //キャンペーン別対象日プルダウン設定処理
	    changeDisplay("div", "pdwn_taishoDt_", campId);
   	}
}
//-->
</script>
<div m:rendered="#{campNipoRefReqDto.listsCamp == null}">
  <p/>
  <span style="font-weight:bold;">現在表示期間中のキャンペーンは存在しません。</span>
</div>
<span m:rendered="#{campNipoRefReqDto.listsCamp != null}">
	<form m:id="conditionForm" onKeyDown="return setDefaultSubmitButton('conditionForm','btnExecute');">
		<input type="hidden" id="viewId" m:value="#{campNipoRefReqDto.viewId}" />
		<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
		<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
		<input type="hidden" id="windowId" m:value="#{campNipoRefReqDto.windowId}"/>
		<input type="hidden" id="userTypeCd" m:value="#{campNipoRefSesDto.userTypeCd}" m:passthrough="true"/>
		<input type="hidden" id="loadingFlg" value=""/>
		<input type="hidden" id="nendo" m:value="#{campNipoRefReqDto.nendo}"/>
		<input type="hidden" id="companyCd" m:value="#{campNipoRefReqDto.companyCd}"/>
		<input type="hidden" id="newWindowFlg" m:value="#{campNipoRefReqDto.newWindowFlg}"/>
	    <input type="hidden" id="jyokenMsg" m:value="#{msg}"/>
			<a id="changeCompany" m:action="#{campNipoRefSibuListAction.changeCompany}"/>
			<a id="changeCamp" m:action="#{campNipoRefSibuListAction.changeCamp}"/>
			<a id="search" m:action="#{campNipoRefSibuListAction.search}"/>
			<a id="searchMise" m:action="#{campNipoRefMiseListAction.search}"/>
		<table class="table_hidden">
		<tr><td rowspan="2">
			<table class="body_table element_browser" style="margin-bottom:4px;" >
			    <tr>
			        <th width="96px">キャンペーン</th>
			        <td colspan="2">
			        <div class="hideArea">
						<select m:id="campId"
								m:value="#{campNipoRefReqDto.campId}"
								m:items="#{campNipoRefReqDto.listsCamp}"
								m:itemValue="campId"
								m:itemLabel="campTitle"
								m:onchange="changeCampaign()">
							<option value="201045" selected="selected">キャンペーン１</option>
							<option value="201043">キャンペーン２</option>
							<option value="201038">キャンペーン３</option>
							<option value="201044">キャンペーン４</option>
							<option value="201042">キャンペーン５</option>
						</select>
						<select m:id="menuTotaledKbn"
								m:value="#{campNipoRefReqDto.menuTotaledKbn}"
								m:items="#{campNipoRefSesDto.listMenuTotaled}"
								m:itemValue="code"
								m:itemLabel="name"
								>
							<option value="TOTAL">メニュー合計</option>
							<option value="TANPIN">単品</option>
							<option value="SHUYAKU">単品(集約)</option>
						</select>
					  </div>
			      </td>
			        <th m:rendered="#{isHonbuUser}">店舗種別</th>
			        <td m:rendered="#{isHonbuUser}">
			          <div class="hideArea">
						<select class="condition_field"
								m:id="pldwnTenpoShubetu"
								m:value="#{campNipoRefReqDto.tenpoShubetu}"
								m:items="#{campNipoRefSesDto.listTenpoShubetu}"
								m:itemValue="code"
								m:itemLabel="name"
								m:onchange="changeTenposShu(this)">
							<option value="ALL">全店</option>
							<option value="1">前年対象店</option>
							<option value="2">予算対象店</option>
							<option value="3">新店</option>
						</select>
			          </div></td>
					 <th width="#{(isHonbuUser)? '':'36px'}"><span m:value="#{(isHonbuUser)? '集計区分':'支部'}"/></th>
					 <td colspan="#{(isHonbuUser)? '1':'2'}">
						<div class="hideArea">
						<select m:id="shukeiKbn"
								m:value="#{campNipoRefReqDto.shukeiKbn}"
								m:items="#{campNipoRefSesDto.listShukeiKbn}"
								m:itemValue="code"
								m:itemLabel="name"
								>
								<option value="SIBU">直営・販社含まない</option>
								<option value="AREA_DAI">直営・販社含む</option>
							</select>
						</div>
					</td>
				</tr>
				<tr>
					<th>対象期間</th>
					<td width="85px" style="border-right-width:0px;">
						<div class="hideArea">
							<select m:id="taishoKikan"
									m:value="#{campNipoRefReqDto.taishoKikan}"
									m:items="#{campNipoRefSesDto.listTaishoKikan}"
									m:itemValue="code"
									m:itemLabel="name"
									m:onchange="changeTaishoKikan(this)"
									style="height:19px;"
									>
								<option value="DAY">単日</option>
								<option value="TOTAL">期間合計</option>
								<option value="DAYS">期間指定</option>
							</select>
						</div>
					</td>
					<td style="width:270px;border-left-width:0px;#{isHonbuUser?'border-right-width:0px;':''}">
						<div class="hideArea">
							<span m:inject="s:forEach" m:items="#{campNipoRefReqDto.listsTaishoDt}" m:var="listInfo" m:varindex="i">
								<div class="pdwn_taishoDt_#{listInfo.key}"
	                                 style="display:#{(listInfo.key==campNipoRefReqDto.campId) && campNipoRefReqDto.taishoKikan!='TOTAL'? 'inline;' : 'none;'}">

								<select class="pdwn_taishoDt_#{listInfo.key}_FROM"
								    m:value="#{campNipoRefReqDto.taishoDt}"
									m:items="#{listInfo.listData}"
									m:itemValue="code"
									m:itemLabel="name"
									>
									<option value="20080501">2008/05</option>
									<option value="20080401">2008/04</option>
									<option value="20080301">2008/03</option>
									<option value="20080201">2008/02</option>
									<option value="20080101">2008/01</option>
								</select>
								<div class="pdwn_taishoKikan_DAYS"
								     style="display:#{campNipoRefReqDto.taishoKikan=='DAYS'? 'inline;' : 'none;'}">
								〜 <select class="pdwn_taishoDt_#{listInfo.key}_TO"
								           m:value="#{campNipoRefReqDto.taishoDtTo}"
									       m:items="#{listInfo.listData}"
									       m:itemValue="code"
									       m:itemLabel="name"
									       >
									<option value="20080501">2008/05</option>
									<option value="20080401">2008/04</option>
									<option value="20080301">2008/03</option>
									<option value="20080201">2008/02</option>
									<option value="20080101">2008/01</option>
								</select>
								</div>
								</div>
							</span>
						</div>
					</td>
			     <div m:rendered="#{isHonbuUser}">
			     	<td style="border-width:1px 0px;"/>
			     	<td style="border-width:1px 0px;"/>
			     	<td style="border-width:1px 0px;"/>
			     </div>
			     <div m:rendered="#{campNipoRefSesDto.userTypeCd=='02' || campNipoRefSesDto.userTypeCd=='03'}">
					<th style="" width="#{(isHonbuUser)? '':'36px'}">順位</th>
					<td style="border-right-width:0px;">
						<div class="hideArea">
							<select m:id="pldwnRankKind"
								m:value="#{campNipoRefReqDto.rankKind}"
								m:items="#{campNipoRefSesDto.listRankKind}"
								m:itemValue="code"
								m:itemLabel="name"
								>
							    <option value="KINKOSEIHI">金額構成比</option>
							    <option value="KOSU">個数</option>
							</select>
						</div>
					</td>
				</div>
			<td style="border-left-width:0px;" align="#{isHonbuUser?'right':''}">
			<input type="button"  name="conditionForm:btnExecute"
			       m:value="#{campNipoRefReqDto.searched=='true'?'再検索':'実行'}"
			       class="operation_button" style="margin:0px;margin-left:3px;"
			       onClick="return search();" onDblClick="return false;"/>
			</td></tr>
			</table>
		</td>
		<td>
			<span style="font-size:11pt;" m:value="#{'01'!=campNipoRefSesDto.userTypeCd?'※MSC＝モスストアカンパニー(旧販社)':''}"/><br/>
		</td>
		</tr>
		<tr><td>&nbsp;</td></tr>
		</table>
		<input type="hidden" id="tenpoShubetu" m:value="#{campNipoRefReqDto.tenpoShubetu}"/>
		<input type="hidden" id="taishoJoken" m:value="#{campNipoRefReqDto.taishoJoken}"/>
		<input type="hidden" id="hyojiTaisho" m:value="#{campNipoRefReqDto.hyojiTaisho}"/>
		<input type="hidden" id="taishoDt" m:value="#{campNipoRefReqDto.taishoDt}"/>
		<input type="hidden" id="taishoDtTo" m:value="#{campNipoRefReqDto.taishoDtTo}"/>
		<input type="hidden" id="rankKind" m:value="#{campNipoRefReqDto.rankKind}"/>
		<input type="hidden" id="zennenDataShubetu" m:value="#{campNipoRefReqDto.zennenDataShubetu}"/>
		<input type="hidden" id="view_viewId" m:value="#{campNipoRefViewDto.viewId}" />
		<input type="hidden" id="view_windowId" m:value="#{campNipoRefViewDto.windowId}"/>
		<input type="hidden" id="view_companyCd" m:value="#{campNipoRefViewDto.companyCd}"/>
		<input type="hidden" id="view_nendo" m:value="#{campNipoRefViewDto.nendo}"/>
		<input type="hidden" id="view_campId" m:value="#{campNipoRefViewDto.campId}"/>
		<input type="hidden" id="view_menuTotaledKbn" m:value="#{campNipoRefViewDto.menuTotaledKbn}"/>
		<input type="hidden" id="view_tenpoShubetu" m:value="#{campNipoRefViewDto.tenpoShubetu}"/>
		<input type="hidden" id="view_shukeiKbn" m:value="#{campNipoRefViewDto.shukeiKbn}"/>
		<input type="hidden" id="view_taishoKikan" m:value="#{campNipoRefViewDto.taishoKikan}"/>
		<input type="hidden" id="view_taishoJoken" m:value="#{campNipoRefViewDto.taishoJoken}"/>
		<input type="hidden" id="view_hyojiTaisho" m:value="#{campNipoRefViewDto.hyojiTaisho}"/>
		<input type="hidden" id="view_taishoDt" m:value="#{campNipoRefViewDto.taishoDt}"/>
		<input type="hidden" id="view_taishoDtTo" m:value="#{campNipoRefViewDto.taishoDtTo}"/>
		<input type="hidden" id="view_rankKind" m:value="#{campNipoRefViewDto.rankKind}"/>
		<input type="hidden" id="view_zennenDataShubetu" m:value="#{campNipoRefViewDto.zennenDataShubetu}"/>
		<a id="downloadCsv" m:action="#{campNipoRefCsvDownloadAction.downloadCsv}" />
		<a id="linkUp" m:action="#{campNipoRefSibuListAction.linkUp}" />
<div m:id="pane_waitmsg" style="display:none">
<p/><span style="font-weight:bold;" m:value="検索しています。しばらくお待ち下さい・・・"/>
</div>
<div m:rendered="#{campNipoRefViewDto.existSearchedData}" m:id="pane_result">
	<div class="element_print">
      <table>
        <tr>
	        <td>キャンペーン：<select
					m:value="#{campNipoRefViewDto.campId}"
					m:items="#{campNipoRefViewDto.listsCamp}"
					m:itemValue="campId"
					m:itemLabel="campTitle"/>
			</td>
	        <td><select
					m:value="#{campNipoRefViewDto.menuTotaledKbn}"
					m:items="#{campNipoRefSesDto.listMenuTotaled}"
					m:itemValue="code"
					m:itemLabel="name"/>
			</td>
	        <td>店舗種別：<select
					m:value="#{campNipoRefViewDto.tenpoShubetu}"
					m:items="#{campNipoRefSesDto.listTenpoShubetu}"
					m:itemValue="code"
					m:itemLabel="name"/>
			</td>
	    </tr>
      </table>
      <table>
        <tr>
	        <td><span m:value="#{(isHonbuUser)? '集計区分':'支部'}"/>：<select
					m:value="#{campNipoRefViewDto.shukeiKbn}"
					m:items="#{campNipoRefSesDto.listShukeiKbn}"
					m:itemValue="code"
					m:itemLabel="name"/>
			</td>
	        <td>対象期間：<select
					m:value="#{campNipoRefViewDto.taishoKikan}"
					m:items="#{campNipoRefSesDto.listTaishoKikan}"
					m:itemValue="code"
					m:itemLabel="name"></select>
			</td>
	    </tr>
	  </table>
	</div>
    <span m:inject="s:forEach" m:items="#{campNipoRefViewDto.listSearchData}" m:var="uiTabSearchData" m:varindex="i">
		<div m:renderd="#{uiTabSearchData.key==campNipoRefViewDto.taishoKikan}"
		     class="view_#{uiTabSearchData.key}" style="#{((campNipoRefViewDto.taishoKikan == null && i==0) || uiTabSearchData.key==campNipoRefViewDto.taishoKikan) ? '' : 'display:none;'}">
		     <div class="scroll_padding_head">
		     <div class="scroll_hidden">
			<table class="hiddenBody data_table_width" style="margin-bottom:4px;">
		       	<tr>
					<td>
						<table class="body_table2" style="#{((campNipoRefViewDto.taishoKikan == null && i==0) || uiTabSearchData.key==campNipoRefViewDto.taishoKikan) ? '' : 'display:none;'}">
							<tr>
								<th>対象期間</th>
								<td><span m:converter="#{characterEncodingConverter}" m:value="#{uiTabSearchData.taishoKikan}"/>&nbsp;</td>
								<th>対象店舗数</th>
								<td align="right" width="50px"><span m:value="#{uiTabSearchData.taishoTenpoCnt}"
								                                     m:converter="#{commonCampaignNumConverter}"/></td>
							</tr>
						</table>
					</td>
		        	<td align="right" class=" element_browser">
						<input type="button" name="downloadBt" value="ダウンロード"
						       onClick="execDownLoad(); return false;" onDblClick="return false"/>
						<input type="checkbox" name="newWinFlg" m:passthrough="true"/>別ウィンドウに表示
					</td>
		        </tr>
			</table>
			</div>
			</div>
		<!--対象日モード-->
		<div class="scroll_padding_head">
			<div class="scroll_hidden margin_bottom_8 campnipo_sibu">
			<table class="body_table2 data_table_width">
				<tr class="header_row">
					<th class="nameArea">支部名称</th>
					<th m:rendered="#{isTotal==false}" class="width_Menu">メニュー</th>
					<th class="width_KazuKei">販売個数</th>
					<th class="width_MenuUriage">販売金額</th>
					<th class="width_KoseiHi">金額構成比</th>
					<th m:rendered="#{isTotal}" class="width_Uriage">売上</th>
					<th m:rendered="#{isTotal}" class="width_Uriage">前年売上</th>
					<th m:rendered="#{isTotal}" class="width_Hiritu">前年比</th>
				</tr>
			</table>
			</div>
			</div>
			<table m:rendered="#{uiTabSearchData.searchDataExist==false}" class="data_table_width" height="50px">
				<tr>
					<td align="center" valign="center">該当日のデータはありません。</td>
				</tr>
			</table>
			<div class="scroll_padding_data_no">
			<div class="scroll_complete" id="campNipoScroll" style="height:380px;">
				<table m:rendered="#{uiTabSearchData.searchDataExist}"
				       class="body_table2 data_table_width"
				       style="border-top-width : 0px;">
			    <span m:inject="s:forEach" m:items="#{uiTabSearchData.listData}" m:var="ui" m:varindex="e">
			      <tr class="#{ui.trCssClass} non_top_border">
					  <td class="nameArea">
					  	<a m:rendered="#{ui.sibuCd != null}"
					  	   href="javaScript:void(0);"
					  	   onClick="linkUp('#{ui.sibuCd}'); return false;" onDblClick="return false;"><span m:converter="#{characterEncodingConverter}" m:value="#{ui.sibuName}"/></a>
						  <span m:converter="#{characterEncodingConverter}" m:value="#{((ui.sibuCd == null && ui.groupRowNo == 1)==true ? ui.sibuName : '')}"/>
					  </td>
			          <td m:rendered="#{isTotal==false}"
			              class="width_Menu"><span m:converter="#{characterEncodingConverter}" m:value="#{ui.menuNameKj}"/></td>
					  <td class="body_num width_KazuKei"><span m:value="#{ui.kazuKei}" m:converter="#{commonCampaignNumConverter}"/></td>
					  <td class="body_num width_MenuUriage"><span m:value="#{ui.menuUriage}" m:converter="#{commonCampaignNumConverter}" /></td>
					  <td class="body_num width_KoseiHi hiritu"><span m:value="#{ui.kingakuKouseiHi}"/></td>
					  <td m:rendered="#{isTotal}" class="body_num width_Uriage"><span m:value="#{ui.uriage}" m:converter="#{bizreportNumericCnvt}" /></td>
					  <td m:rendered="#{isTotal}" class="body_num width_Uriage"><span m:value="#{ui.uriageZen}" m:converter="#{bizreportNumericCnvt}" /></td>
					  <td m:rendered="#{isTotal}" class="body_num width_Hiritu hiritu #{( (isHosei ? ui.netUriageZennenHi:ui.uriageZennenHi) >= 100? '':'body_hiritu')}">
					  	<span m:value="#{(isHosei ? ui.netUriageZennenHi:ui.uriageZennenHi)}"/></td>
				</tr>
				</span>
				</table>
			</div>
			</div>
		</div>
	</span>

</div>
		<input type="text" m:id="dummyEnter" style="display:none"/>
	</form>
</span>
</span>
</body>
</html>
