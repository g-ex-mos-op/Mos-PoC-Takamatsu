<html xmlns:m="http://www.seasar.org/maya" m:action="#{campKakoSuiiListAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j"/>
<meta http-equiv="Content-Style-Type" content="text/css"/>
<meta http-equiv="Content-Script-Type" content="text/javascript"/>
<title>キャンペーン過去履歴（推移表）</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="キャンペーン過去履歴（推移表）"/>
<span m:inject="s:insert" m:name="bodyTitleName">■キャンペーン過去履歴（推移表）</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBR014V03"/>
<span m:inject="f:param" m:name="isHosei" m:value="#{campKakoViewSuiiRequestDto.zennenDataShubetu == 'DOGETUHOSEI'}"/>
<span m:inject="f:param" m:name="isTaishoMise" m:value="#{campKakoViewSuiiRequestDto.taishoJoken == 'MISE'}"/>
<span m:inject="f:param" m:name="onLoadName" m:value="onLoadFunction()"/>
<span m:inject="f:param" m:name="userType" m:value="#{campKakoSuiiSessionDto.userTypeCd}"/>
<div m:inject="s:insert" m:name="body">
<style type="text/css">
<!--
.data_table_width {
    width:98%;
}
.rsttable_w1 {
    width:13%;
}
.rsttable_w2 {
    width:4.5%;
}
.rsttable_w3 {
    width:9%;
}
.rsttable_w4 {
    width:9%;
}
.rsttable_w5 {
    width:11%;
}
.rsttable_w6 {
    width:11%;
}
.rsttable_w7 {
    width:11%;
}
.rsttable_w8 {
    width:4.5%;
}
.rsttable_w9 {
    width:9%;
}
.rsttable_w10 {
    width:9%;
}
.rsttable_w11 {
    width:9%;
}

-->
</style>

<script type="text/javascript">
<!--
function onLoadFunction() {
    var objForm = document.forms['campkako'];
    objForm.elements['campkako:loadingFlg'].value = "";
    if (objForm.elements['campkako:userType'].value == '01') {
        if (objForm.elements['campkako:condCampId'] == null) {
            return;
        }
	    switchMenu();
	    switchTaishoJoken(true);
	}
	else {
        if (objForm.elements['campkako:condCampId'] == null) {
            return;
        }
	    switchMenu();
	    switchTaishoJokenOner(true);
	}
	loadScroll("campkakoScroll", 358);
	focusElement('campkako');
}
function switchCamp() {
    var objForm = document.forms['campkako'];
    objForm.elements['campkako:condMenuTotaled'].selectedIndex = 0;
    switchMenu();
    if (objForm.elements['campkako:userType'].value == '01') {
        objForm.elements['campkako:condTaishoJoken'].selectedIndex = 0;
        switchTaishoJoken(false);
    }
    else {
        switchTaishoJokenOner(false);
    }
}
function switchMenu() {
    var objForm = document.forms['campkako'];
    var menuIndex = objForm.elements['campkako:condMenuTotaled'].selectedIndex;
    var campIndex = objForm.elements['campkako:condCampId'].selectedIndex;
    document.getElementById("menuCol").style.display = 'none';
    for (i = 0; i < objForm.elements.length; i++) {
        if (objForm.elements[i].name.indexOf(':condMenuCd') > 0) {
            document.getElementById(objForm.elements[i].name).style.display = 'none';
	        if (objForm.elements[i].name.indexOf('_' + campIndex + ':_') > 0) {
		        if (menuIndex != 0 && objForm.elements[i].name.indexOf('_' + menuIndex + ':condMenuCd') > 0) {
		            document.getElementById(objForm.elements[i].name).style.display = '';
		            for (j = 0; j < document.getElementById(objForm.elements[i].name).length; j++) {
		                if (document.getElementById(objForm.elements[i].name).options[j].value
		                        == objForm.elements['campkako:menuCd'].value)
		                {
		                    document.getElementById(objForm.elements[i].name).selectedIndex = j;
		                    break;
		                }
		            }
		            objForm.elements['campkako:activeSelectMenu'].value = objForm.elements[i].name;
		            document.getElementById("menuCol").style.display = "";
		        }
		    }
        }
    }
}
function switchMenuOner() {
    var objForm = document.forms['campkako'];
    var menuIndex = objForm.elements['campkako:condMenuTotaledOner'].selectedIndex;
    var campIndex = objForm.elements['campkako:condCampIdOner'].selectedIndex;

    for (i = 0; i < objForm.elements.length; i++) {
        if (objForm.elements[i].name.indexOf(':condMenuCdOner') > 0) {
            document.getElementById(objForm.elements[i].name).style.display = 'none';
	        if (objForm.elements[i].name.indexOf('_' + campIndex + ':_') > 0) {
		        if (menuIndex != 0 && objForm.elements[i].name.indexOf('_' + menuIndex + ':condMenuCdOner') > 0) {
		            document.getElementById(objForm.elements[i].name).style.display = 'inline';
		            for (j = 0; j < document.getElementById(objForm.elements[i].name).length; j++) {
		                if (document.getElementById(objForm.elements[i].name).options[j].value
		                        == objForm.elements['campkako:menuCd'].value)
		                {
		                    document.getElementById(objForm.elements[i].name).selectedIndex = j;
		                }
		            }
		            objForm.elements['campkako:activeSelectMenu'].value = objForm.elements[i].name;
		        }
		    }
        }
    }
}
function switchTaishoJoken(initFlg) {
    var objForm = document.forms['campkako'];
    var taishoJokenIndex = objForm.elements['campkako:condTaishoJoken'].selectedIndex;
    var campIndex = objForm.elements['campkako:condCampId'].selectedIndex;
    var taishoJokenValue = objForm.elements['campkako:condTaishoJoken'].options[taishoJokenIndex].value;

    document.getElementById('doSearchMiseBtn').style.display = 'none';

    var objSelects = document.campkako.getElementsByTagName('select');
    var objTexts   = document.campkako.getElementsByTagName('input');

    for (i = 0; i < objSelects.length; i++) {
        if (objSelects[i].name.indexOf(':condHyojiTaisho') > 0) {
            document.getElementById(objSelects[i].name).selectedIndex = 0;
            document.getElementById(objSelects[i].name).style.display = 'none';
	        if (objSelects[i].name.indexOf('_' + campIndex + ':_') > 0) {
		        if (taishoJokenValue != 'ALL' && objSelects[i].name.indexOf('_' + taishoJokenIndex + ':condHyojiTaisho') > 0) {
		            document.getElementById(objSelects[i].name).style.display = 'inline';
		            if (initFlg) {
			            for (j = 0; j < document.getElementById(objSelects[i].name).length; j++) {
			                if (document.getElementById(objSelects[i].name).options[j].value
			                        == objForm.elements['campkako:hyojiTaisho'].value)
			                {
			                    document.getElementById(objSelects[i].name).selectedIndex = j;
			                    break;
			                }
			            }
			        }
		            objForm.elements['campkako:activeSelectHyojiTiaho'].value = objSelects[i].name;
		            objForm.elements['campkako:activeSelectMise'].value = '';
		        }
		    }
		    continue;
        }
        if (objSelects[i].name.indexOf(':condBlock') > 0) {
            document.getElementById(objSelects[i].name).selectedIndex = 0;
            document.getElementById(objSelects[i].name).style.display = 'none';
	        if (objSelects[i].name.indexOf('_' + campIndex + ':_') > 0) {
		        if (taishoJokenValue != 'ALL' && objSelects[i].name.indexOf('_' + taishoJokenIndex + ':condBlock') > 0) {
		            document.getElementById(objSelects[i].name).style.display = 'inline';
		            for (j = 0; j < document.getElementById(objSelects[i].name).length; j++) {
		                if (document.getElementById(objSelects[i].name).options[j].value
		                        == objForm.elements['campkako:blockCd'].value)
		                {
		                    document.getElementById(objSelects[i].name).selectedIndex = j;
		                    break;
		                }
		            }
		            objForm.elements['campkako:activeSelectBlock'].value = objSelects[i].name;
		        }
		    }
		    continue;
        }
    }

    for (i = 0; i < objTexts.length; i++) {
        if (objTexts[i].name.indexOf(':condTextHyojiTaisho') > 0) {
            document.getElementById(objTexts[i].name).value = '';
            document.getElementById(objTexts[i].name).style.display = 'none';
            if (objForm.elements['campkako:condTaishoJoken'].value == 'MISE') {
		        if (objTexts[i].name.indexOf('_' + campIndex + ':_') > 0) {
			        if (taishoJokenValue != 'ALL' && objTexts[i].name.indexOf('_' + taishoJokenIndex + ':condTextHyojiTaisho') > 0) {
			            objTexts[i].style.display = '';
			            document.getElementById('doSearchMiseBtn').style.display = '';
			            if (initFlg) {
			            	objTexts[i].value = objForm.elements["campkako:hyojiTaisho"].value;
                        }
                        objForm.elements['campkako:activeSelectHyojiTiaho'].value = '';
			            objForm.elements['campkako:activeSelectMise'].value = objTexts[i].name;
			        }
			    }
			}
        }
    }
}
function switchTaishoJokenOner(initFlg)  {
    var objForm = document.forms['campkako'];
    var campIndex = objForm.elements['campkako:condCampId'].selectedIndex;

    if (objForm.elements['campkako:userType'].value == '02') {
	    for (i = 0; i < objForm.elements.length; i++) {
	        if (objForm.elements[i].name.indexOf(':condHyojiTaishoOner') > 0) {
	            document.getElementById(objForm.elements[i].name).selectedIndex = 0;
	            document.getElementById(objForm.elements[i].name).style.display = 'none';
		        if (objForm.elements[i].name.indexOf('_' + campIndex + ':_') > 0) {
		            document.getElementById(objForm.elements[i].name).style.display = 'inline';
		            if (initFlg) {
			            for (j = 0; j < document.getElementById(objForm.elements[i].name).length; j++) {
			                if (document.getElementById(objForm.elements[i].name).options[j].value
			                        == objForm.elements['campkako:hyojiTaisho'].value)
			                {
			                    document.getElementById(objForm.elements[i].name).selectedIndex = j;
			                }
			            }
			        }
			        else {
			            document.getElementById(objForm.elements[i].name).selectedIndex = 0;
			        }
		            objForm.elements['campkako:activeSelectHyojiTiaho'].value = objForm.elements[i].name;
		        }
		    }
	    }
	}
	else {
	    for (i = 0; i < objForm.elements.length; i++) {
	        if (objForm.elements[i].name.indexOf(':condHyojiTaishoTenpo') > 0) {
	            document.getElementById(objForm.elements[i].name).style.display = 'none';
		        if (objForm.elements[i].name.indexOf('_' + campIndex + ':_') > 0) {
		            for (j = 0; j < document.getElementById(objForm.elements[i].name).length; j++) {
		                if (document.getElementById(objForm.elements[i].name).options[j].value
		                        == objForm.elements['campkako:hyojiTaisho'].value && initFlg)
		                {
		                    document.getElementById(objForm.elements[i].name).selectedIndex = j;
		                }
		            }
		            objForm.elements['campkako:activeSelectHyojiTiaho'].value = objForm.elements[i].name;
		        }
		    }
	    }
	}
}

function setCondValue() {
    var objForm = document.forms['campkako'];
    if (objForm.elements['campkako:condMenuTotaled'].selectedIndex != 0) {
	    objForm.elements['campkako:menuCd'].value =
	        objForm.elements[objForm.elements['campkako:activeSelectMenu'].value].value;
    }
    if (objForm.elements['campkako:activeSelectHyojiTiaho'].value != '') {
	    objForm.elements['campkako:hyojiTaisho'].value =
	        objForm.elements[objForm.elements['campkako:activeSelectHyojiTiaho'].value].value;
    }
    if (objForm.elements['campkako:activeSelectBlock'].value != '') {
        objForm.elements['campkako:blockCd'].value =
            objForm.elements[objForm.elements['campkako:activeSelectBlock'].value].value;
    }
    if (objForm.elements['campkako:activeSelectMise'].value != '') {
	    objForm.elements['campkako:hyojiTaisho'].value =
	        objForm.elements[objForm.elements['campkako:activeSelectMise'].value].value;
	}
	if (objForm.elements['campkako:userType'].value == '02') {
	    if (objForm.elements[objForm.elements['campkako:activeSelectHyojiTiaho'].value].value == 'ALL') {
	        objForm.elements['campkako:condTaishoJokenOner'].value = 'ALL';
	    }
	    else {
	        objForm.elements['campkako:condTaishoJokenOner'].value = 'MISE';
	    }
	}
	if (objForm.elements['campkako:userType'].value == '03') {
        objForm.elements['campkako:condTaishoJokenOner'].value = 'MISE';
	}
}
function execFunction() {
    if (returnLoadingStatus()) {
	    var objForm = document.forms['campkako'];
	    setCondValue();
	    setWindowTarget(objForm);
		document.forms['campkako'].elements['campkako:__link_clicked__'].value='campkako:doExecute';
		if (document.campkako.target == "_self") {
		    if (document.campkako.elements["campkako:doExecuteBtn"] != null) {
    		    document.campkako.elements["campkako:doExecuteBtn"].disabled = true;
    		}
		    document.getElementById("campkako:pane_result").style.display = "none";
		    document.getElementById("campkako:pane_waitmsg").style.display = "inline";
		}

		document.forms['campkako'].submit();
	}
}
function setWindowTarget(objForm) {
    if (document.getElementById('campkako:newWindowFlgDisp') != null
            && objForm.elements['campkako:newWindowFlgDisp'].checked)
    {
        objForm.elements['campkako:newWindowFlg'].value = objForm.elements['campkako:newWindowFlgDisp'].checked;
        objForm.elements['campkako:loadingFlg'].value = "";
        document.campkako.target = "_blank";
    }
    else {
        document.campkako.target = "_self";
    }
}
function doCsvDownload() {
    if(isLoadingFlgOFF()){
	    document.campkako.target = "_self";
		document.forms['campkako'].elements['campkako:__link_clicked__'].value='campkako:doCsvDownload';
		document.forms['campkako'].submit();
	}
}
function focusElement(formName) {
	var objForm = document.forms[formName];
	var elementName = document.focusElementForm.elements["FOCUS_ELEMENT"].value;
	var elementIndex = document.focusElementForm.elements["FOCUS_ELEMENT_INDEX"].value;

	if (elementName == '') {
        //objForm.elements['campkako:nendo'].focus();
        return;
	}
	else {
	    for (i = 0; i < objForm.elements.length; i++) {
	        if (objForm.elements[i].name.indexOf(':' + elementName) > 0) {
		        if (objForm.elements[i].name.indexOf('_' + elementIndex + ':_') > 0) {
		            if (document.getElementById(objForm.elements[i].name).style.display == 'inline') {
		                objForm.elements[objForm.elements[i].name].focus();
		                return;
		            }
		        }
		    }
		}
	}
}
function doCallMiseForm() {
    if (returnLoadingStatus()) {
	    setCondValue();
	    document.campkako.target = "_self";
		document.forms['campkako'].elements['campkako:__link_clicked__'].value='campkako:doSearchMise';
		document.forms['campkako'].submit();
	}
}
/*
 * 年度切り替え
 */
function changeNendo() {
    if (returnLoadingStatus()) {
		document.campkako.target ="_self";
		document.campkako.elements['campkako:__link_clicked__'].value='campkako:changeNendo';
		document.campkako.submit();
	}
}
/*
 * タブ切り替え
 */
function changeTab() {
    if (returnLoadingStatus()) {
		document.campkako.target ="_self";
		document.campkako.elements['campkako:__link_clicked__'].value='campkako:changeTab';
		document.campkako.submit();
	}
}
function returnLoadingStatus(){
	if(isLoadingFlgOFF()) {
		setLoadingFlg();
		return true;
	}
	return false;
}
function isLoadingFlgOFF(){
	return (document.campkako.elements['campkako:loadingFlg'].value != "ON");
}
function setLoadingFlg() {
	document.campkako.elements['campkako:loadingFlg'].value = "ON";
}
-->
</script>

<form m:id="campkako" onkeydown="setDefaultSubmitButton('campkako', 'doExecuteBtn');" target="_blank">
<input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
<input type="hidden" m:id="windowId" m:value="#{campKakoSuiiRequestDto.windowId}"/>
<input type="hidden" id="loadingFlg" value=""/>
<input type="hidden" m:id="companyCd" m:value="#{campKakoSuiiRequestDto.companyCd}"/>
<input type="hidden" m:id="menuCd" m:value="#{campKakoSuiiRequestDto.menuCd}"/>
<input type="hidden" m:id="hyojiTaisho" m:value="#{campKakoSuiiRequestDto.hyojiTaisho}"/>
<input type="hidden" m:id="blockCd" m:value="#{campKakoSuiiRequestDto.blockCd}"/>
<input type="hidden" m:id="activeSelectMenu"/>
<input type="hidden" m:id="activeSelectHyojiTiaho"/>
<input type="hidden" m:id="activeSelectBlock"/>
<input type="hidden" m:id="activeSelectMise"/>
<input type="hidden" m:id="activeSelectZennenDataShu"/>
<input type="hidden" m:id="newWindowFlg" m:value="#{campKakoSuiiRequestDto.newWindowFlg}"/>
<input type="hidden" id="view_windowId" m:value="#{campKakoViewSuiiRequestDto.windowId}"/>
<input type="hidden" id="view_companyCd" m:value="#{campKakoViewSuiiRequestDto.companyCd}"/>
<input type="hidden" id="view_nendo" m:value="#{campKakoViewSuiiRequestDto.nendo}"/>
<input type="hidden" id="view_campId" m:value="#{campKakoViewSuiiRequestDto.campId}"/>
<input type="hidden" id="view_menuTotaledKbn" m:value="#{campKakoViewSuiiRequestDto.menuTotaledKbn}"/>
<input type="hidden" id="view_taishoJoken" m:value="#{campKakoViewSuiiRequestDto.taishoJoken}"/>
<input type="hidden" id="view_hyojiTaisho" m:value="#{campKakoViewSuiiRequestDto.hyojiTaisho}"/>
<input type="hidden" id="view_menuCd" m:value="#{campKakoViewSuiiRequestDto.menuCd}"/>
<input type="hidden" id="view_blockCd" m:value="#{campKakoViewSuiiRequestDto.blockCd}"/>

<a m:id="doExecute" m:action="#{campKakoSuiiListAction.doExecute}"/>
<a m:id="doCsvDownload" m:action="#{campKakoSuiiCsvDownloadAction.downloadCsv}"/>
<a m:id="doSearchMise" m:action="#{campKakoSuiiListAction.doSearchMise}"/>
<a id="changeNendo" m:action="#{campKakoSuiiListAction.changeNendo}"/>
<a id="changeTab" m:action="#{campKakoSuiiListAction.changeTab}"/>
<input type="hidden" m:id="userType" m:value="#{userType}"/>

<div m:id="pane_waitmsg" style="display:none">
<p/>
<span style="font-weight:bold;">
検索しています。しばらくお待ち下さい・・・</span></div>
<div m:id="pane_result">
<table class="hiddenBody element_browser" style="margin-bottom:4px;">
    <tr>
    <td>
	<table class="body_table">
	  <tr>
		  <th width="70px">年度</th>
		  <td width="85px">
		    <div class="hideArea">
		      <select m:id="nendo"
		              m:value="#{campKakoSuiiRequestDto.nendo}"
		              m:items="#{campKakoSuiiRequestDto.listsNendo}"
		              m:itemValue="code"
		              m:itemLabel="name"
		              m:onchange="changeNendo()">
		          <option value="2006">2006年度</option>
		          <option value="2007">2007年度</option>
		          <option value="2008">2008年度</option>
		      </select>
		    </div>
		  </td>
	    <th width="120px">キャンペーン</th>
	    <td width="*">
			<div class="hideArea">
			    <select m:rendered="#{campKakoSuiiRequestDto.listsCamp != null}"
			            m:id="condCampId"
			            m:value="#{campKakoSuiiRequestDto.campId}"
			            m:items="#{campKakoSuiiRequestDto.listsCamp}"
			            m:itemValue="campId"
			            m:itemLabel="campTitle"
			            onChange="switchCamp();">
			        <option value="200801">2008年4月度テリヤキチキン</option>
			        <option value="200802">２００８年玄米フレークシェイク</option>
			    </select>
			    <span m:rendered="#{campKakoSuiiRequestDto.listsCamp == null}">該当キャンペーンはありません。</span>
			</div>
	    </td>
	    <th nowrap="true">メニュー</th>
	    <td style="border-right-width:0px;">
	        <div class="hideArea">
	        <select m:value="#{campKakoSuiiRequestDto.menuTotaledKbn}"
	            m:items="#{campKakoSuiiSessionDto.listMenuTotaled}"
	            m:id="condMenuTotaled"
	            m:itemValue="code"
	            m:itemLabel="value"
	            m:onchange="switchMenu();"
	            disabled="#{campKakoSuiiRequestDto.listsCamp == null}"/></div></td>
	    <td style="border-left-width:0px;">
	    	<span id="menuCol" style="display:none;">
		    	<div class="hideArea">
	        <span m:inject="s:forEach" m:items="#{campKakoSuiiRequestDto.listsMenu}" m:var="e" m:varindex="i">
	        <span m:inject="s:forEach" m:items="#{e.listData}" m:var="f" m:varindex="j">
		        <select m:rendered="#{f.listData != null}"
	                m:items="#{f.listData}"
	                m:id="condMenuCd"
	                m:itemValue="code"
	                m:itemLabel="name"
	                />
	        </span>
	        </span>
	        </div>
	        </span>
	    </td>
	  </tr>
	  <tr m:rendered="#{campKakoSuiiSessionDto.userTypeCd == '01'}">
	    <th>対象条件</th>
	    <td>
	        <div class="hideArea">
	        <select m:value="#{campKakoSuiiRequestDto.taishoJoken}"
	            m:items="#{campKakoSuiiRequestDto.listTaishoJoken}"
	            m:id="condTaishoJoken"
	            m:itemValue="code"
	            m:itemLabel="value"
	            m:onchange="switchTaishoJoken(false);"
	            disabled="#{campKakoSuiiRequestDto.listsCamp == null}"/>
	        </div>
	    </td>
	    <th>
	        表示対象<input type="button"
	               id="doSearchMiseBtn" value="検索"
	               onclick="doCallMiseForm();" ondblclick="return false;"
	               class="button_in_table width_42"/></th>
	    <td style="border-right-width:0px;" colspan="2">
	        <div class="hideArea">
	          <div m:inject="s:forEach"
	               m:items="#{campKakoSuiiRequestDto.ListsHyojiTaisho}" m:var="e" m:varindex="i">
	          <div m:inject="s:forEach"
	               m:items="#{e.listData}" m:var="f" m:varindex="j">
	            <select m:rendered="#{f.listData != null}"
	                m:items="#{f.listData}"
	                m:id="condHyojiTaisho"
	                m:itemValue="hyojitaishoCd"
	                m:itemLabel="hyojitaishoName"
	                style="display:none;"/>
	            <select m:rendered="#{f.key == 'SIBU'}"
	                m:items="#{campKakoSuiiSessionDto.listBlock}"
	                m:id="condBlock"
	                m:itemValue="blockCd"
	                m:itemLabel="blockName"
	                style="display:none;"/>
	            <input type="text" class="imenotuse height_11"
	                m:rendered="#{f.listData == null && f.key == 'MISE'}"
	                m:id="condTextHyojiTaisho" maxlength="5" size="10" style="display:none;"/>
	          </div>
	          </div>
	        </div>
        </td>
        <td colspan="2" align="right" style="border-left-width:0px;">
		<input type="button" class="button_in_table"
		       name="campkako:doExecuteBtn" value="#{campKakoSuiiRequestDto.searched=='true'?'再検索':'実行'}"
		       disabled="#{campKakoSuiiRequestDto.listsCamp == null}"
		       onclick="execFunction();" ondblclick="return false;"/>
	    </td>
	  </tr>
	    <tr m:rendered="#{campKakoSuiiSessionDto.userTypeCd != '01'}">
	    <th width="70px">店舗</th>
	    <td colspan="4" style="border-right-width:0px;">
	      <input type="hidden" m:id="condTaishoJokenOner" m:value="#{campKakoSuiiRequestDto.taishoJoken}"/>

	        <div class="hideArea" m:rendered="#{campKakoSuiiSessionDto.userTypeCd == '02'}" style="float:left;">
	          <div m:inject="s:forEach" m:items="#{campKakoSuiiRequestDto.listsHyojiTaisho}" m:var="e" m:varindex="i">
	          <div m:inject="s:forEach" m:items="#{e.listData}" m:var="f" m:varindex="j">
	            <select m:rendered="#{f.listData != null && f.key == 'MISE'}"
	                m:items="#{f.listData}"
	                m:id="condHyojiTaishoOner"
	                m:itemValue="hyojitaishoCd"
	                m:itemLabel="hyojitaishoNameAddClose"
	                style="display:none;"/>
	          </div>
	          </div>
	        </div>
	        <div m:rendered="#{campKakoSuiiSessionDto.userTypeCd == '03'}">
	          <div m:inject="s:forEach" m:items="#{campKakoSuiiRequestDto.listsHyojiTaisho}" m:var="e" m:varindex="i">
	          <div m:inject="s:forEach" m:items="#{e.listData}" m:var="f" m:varindex="j">
	            <select m:rendered="#{f.listData != null && f.key == 'MISE'}"
	                m:items="#{f.listData}"
	                m:id="condHyojiTaishoTenpo"
	                m:itemValue="hyojitaishoCd"
	                m:itemLabel="hyojitaishoNameAddClose"
	                style="display:none;"/>
	            <div m:inject="s:forEach" m:items="#{f.listData}" m:var="g" m:varindex="j">
	              <span m:converter="#{characterEncodingConverter}" m:rendered="#{f.key == 'MISE'}" m:value="#{g.hyojitaishoNameAddClose}" m:id="condHyojiTaishoTenpoLabel" m:style="#{i == 0 ? 'display:inline;' : 'display:none;'}"/>
	            </div>
	          </div>
	          </div>
	        </div>
	    </td>
        <td colspan="2" align="right" style="border-left-width:0px;">
			<input type="button" name="campkako:doExecuteBtn"
			       value="#{campKakoSuiiRequestDto.searched?'再検索':'実行'}"
			       disabled="#{campKakoSuiiRequestDto.listsCamp == null}"
			       onclick="execFunction();" ondblclick="return false;"/></td>
	  </tr>
	</table>
	</td>
	<td>&nbsp;</td>
	<td valign="bottom" style="paddin-left:3px;">
		<a href="javaScript:void(0);"
		   onClick="changeTab(); return false;" onDblClick="return false;">期間合計へ</a>
	</td>
	</tr>
</table>
<div m:rendered="#{campKakoViewSuiiRequestDto.existSearchedData}">
<div class="scroll_padding_head">
<div class="scroll_hidden margin_bottom_hidden">

	<table class="hiddenBody data_table_width" style="margin-bottom:4px;">
       	<tr>
			<td>
			<table class="body_table2 element_print" style="margin-bottom:4px;">
			    <tr class="header_row">
			        <th>年度</th>
			        <td><span m:value="#{campKakoViewSuiiRequestDto.nendo}"/>&nbsp;</td>
			        <th>キャンペーン</th>
			        <td><span m:converter="#{characterEncodingConverter}" m:value="#{campKakoViewSuiiRequestDto.campTitle}"/>&nbsp;</td>
			        <th>メニュー</th>
			        <td>
			        	<span m:inject="s:forEach"
			        	      m:items="#{campKakoSuiiSessionDto.listMenuTotaled}" m:var="e">
			        	      <span m:rendered="#{campKakoViewSuiiRequestDto.menuTotaledKbn == e.value}"
			        	            m:value="#{e.label}"/>&nbsp;
			        	</span>
			       </td>
			       <td m:rendered="#{campKakoViewSuiiRequestDto.menuTotaledKbn != 'TOTAL'}">
			        	<span m:inject="s:forEach"
			        	      m:items="#{campKakoSuiiSessionDto.listMenuTotaled}" m:var="mKbn" m:varindex="i">
					        <span m:rendered="#{campKakoViewSuiiRequestDto.menuTotaledKbn == mKbn.value}"
					              m:inject="s:forEach" m:items="#{campKakoSuiiRequestDto.listsMenu}"
					              m:var="e">
					        <span m:rendered="#{e.key==campKakoViewSuiiRequestDto.campId}"
					              m:inject="s:forEach" m:items="#{e.listData}"
					              m:var="f" m:varindex="g">
						        <span m:rendered="#{i==g && f.listData != null}"
						              m:inject="s:forEach" m:items="#{f.listData}"
					              m:var="m">
					                <span m:rendered="#{campKakoViewSuiiRequestDto.menuCd == m.code}"
				        	            m:value="#{m.name}"/>&nbsp;
			        	</span>
				        </span>
				        </span>
				        </span>
			       </td>
			    </tr>
			</table>
			<table class="body_table2 ">
			    <tr class="header_row">
			        <th nowrap="true">対象期間</th>
			        <td nowrap="true">
			            <span m:value="#{campKakoViewSuiiRequestDto.mstCampDate.campFrom}" m:converter="#{commonCampaignDtCnvtYMD}"/>〜
			            <span m:value="#{campKakoViewSuiiRequestDto.mstCampDate.campTo}" m:converter="#{commonCampaignDtCnvtYMD}"/>&nbsp;
			        </td>
			        <th nowrap="true">対象店舗数</th>
			        <td nowrap="true"
			            style="text-align:right;width:50px;">
			          <span m:value="#{campKakoViewSuiiRequestDto.taishoTenpoCnt}"
			                m:converter="#{commonCampaignNumConverter}"/></td>
			        <th nowrap="true">表示対象</th>
			        <td nowrap="true">
			            <span m:converter="#{characterEncodingConverter}" m:rendered="#{campKakoViewSuiiRequestDto.taishoJoken != 'ALL'}"><span m:converter="#{characterEncodingConverter}" m:value="#{campKakoViewSuiiRequestDto.hyojiTaisho}"/>&nbsp;</span><span m:converter="#{characterEncodingConverter}" m:value="#{campKakoViewSuiiRequestDto.hyojiTaishoName}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:rendered="#{campKakoViewSuiiRequestDto.taishoJoken == 'SIBU'}" m:value="#{campKakoViewSuiiRequestDto.blockName}"/>
			        </td>
			    </tr>
			</table>
			</td>
			<td align="right">
				<table class="element_browser hiddenBody">
			       	<tr>
			        	<td>
					  <input type="button" value="ダウンロード"
					         onclick="doCsvDownload();" ondblclick="return false;"/></td>
					  <td><input type="checkbox"
					             m:id="newWindowFlgDisp"
					             m:value="#{campKakoSuiiRequestDto.newWindowFlg}"/>別ウィンドウに表示</td>
					  </tr>
				</table>
			</td>
		</tr>
	</table>
	<table class="body_table2 data_table_width">
	    <col class="rsttable_w1"/>
	    <col class="rsttable_w2" m:rendered="#{isTaishoMise}"/>
	    <col class="rsttable_w3"/>
	    <col class="rsttable_w4"/>
	    <col class="rsttable_w5"/>
	    <col class="rsttable_w6"/>
	    <col class="rsttable_w7"/>
	    <col class="rsttable_w8" m:rendered="#{isTaishoMise}"/>
	    <col class="rsttable_w9"/>
	    <col class="rsttable_w10"/>
	    <col class="rsttable_w11"/>
	    <tr class="header_row">
	        <th>営業日</th>
	        <th m:rendered="#{isTaishoMise}">天候</th>
	        <th>販売個数</th>
	        <th>販売金額</th>
	        <th>金額構成比</th>
	        <th>売上</th>
	        <th>前年売上</th>
	        <th m:rendered="#{isTaishoMise}">前年<br/>天候</th>
	        <th>前年比<br/>（売上）</th>
	        <th>前年比<br/>（客数）</th>
	        <th>前年比<br/>（客単価）</th>
	    </tr>
	</table>
</div>
</div>
<div class="scroll_padding_data">
<div class="scroll_standby" id="campkakoScroll">
<table class="body_table2 data_table_width" style="border-top-width : 0px;">
    <col class="rsttable_w1"/>
    <col class="rsttable_w2" m:rendered="#{isTaishoMise}"/>
    <col class="rsttable_w3"/>
    <col class="rsttable_w4"/>
    <col class="rsttable_w5"/>
    <col class="rsttable_w6"/>
    <col class="rsttable_w7"/>
    <col class="rsttable_w8" m:rendered="#{isTaishoMise}"/>
    <col class="rsttable_w9"/>
    <col class="rsttable_w10"/>
    <col class="rsttable_w11"/>
    <span m:inject="s:forEach" m:items="#{campKakoViewSuiiRequestDto.listSearchData}" m:var="e" m:varindex="i">
    <span m:rendered="#{e.eigyoDt != null}">
	    <tr class=" non_top_border">
	        <td style="text-align:center;font-weight:bold;"><span m:value="#{e.eigyoDt}" m:converter="#{campKakoDateConverterMD}"/></td>
	        <td m:rendered="#{isTaishoMise}" style="text-align:center;"><span m:converter="#{characterEncodingConverter}" m:value="#{e.tenkoKbnKigou}"/></td>
	        <td class="body_num"><span m:value="#{e.kazuKei}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td class="body_num"><span m:value="#{e.menuUriage}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td class="body_num_n"><span m:value="#{e.kingakuKoseiHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td class="body_num"><span m:value="#{e.uriage}" m:converter="#{bizreportNumericCnvt}"/></td>
            <td m:rendered="#{!isHosei}" class="body_num"><span m:value="#{e.uriageZen}" m:converter="#{bizreportNumericCnvt}"/></td>
            <td m:rendered="#{isHosei}" class="body_num"><span m:value="#{e.netUriageZen}" m:converter="#{bizreportNumericCnvt}"/></td>
	        <td m:rendered="#{isTaishoMise}" style="text-align:center;"><span m:converter="#{characterEncodingConverter}" m:value="#{e.tenkoKbnZenKigou}"/></td>
	        <td m:rendered="#{e.uriageZennenhi < 100 && !isHosei}" class="body_hiritu_m"><span m:value="#{e.uriageZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.uriageZennenhi >= 100 && !isHosei}" class="body_num_n"><span m:value="#{e.uriageZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakusuZennenhi < 100 && !isHosei}" class="body_hiritu_m"><span m:value="#{e.kyakusuZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakusuZennenhi >= 100 && !isHosei}" class="body_num_n"><span m:value="#{e.kyakusuZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakutankaZennenhi < 100 && !isHosei}" class="body_hiritu_m"><span m:value="#{e.kyakutankaZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakutankaZennenhi >= 100 && !isHosei}" class="body_num_n"><span m:value="#{e.kyakutankaZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.uriageZennenhi < 100 && isHosei}" class="body_hiritu_m"><span m:value="#{e.netUriageZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.uriageZennenhi >= 100 && isHosei}" class="body_num_n"><span m:value="#{e.netUriageZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakusuZennenhi < 100 && isHosei}" class="body_hiritu_m"><span m:value="#{e.netKyakusuZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakusuZennenhi >= 100 && isHosei}" class="body_num_n"><span m:value="#{e.netKyakusuZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakutankaZennenhi < 100 && isHosei}" class="body_hiritu_m"><span m:value="#{e.netKyakutankaZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakutankaZennenhi >= 100 && isHosei}" class="body_num_n"><span m:value="#{e.netKyakutankaZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	    </tr>
    </span>
    <span m:rendered="#{e.eigyoDt == null}">
	    <tr class="body_sum5">
	        <td style="text-align:center;font-weight:bold;">総合計</td>
	        <td m:rendered="#{isTaishoMise}">&nbsp;</td>
	        <td class="body_num"><span m:value="#{e.kazuKei}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td class="body_num"><span m:value="#{e.menuUriage}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td class="body_num"><span m:value="#{e.kingakuKoseiHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td class="body_num"><span m:value="#{e.uriage}" m:converter="#{commonCampaignNumConverter}"/></td>
            <td m:rendered="#{!isHosei}" class="body_num"><span m:value="#{e.uriageZen}" m:converter="#{commonCampaignNumConverter}"/></td>
            <td m:rendered="#{isHosei}" class="body_num"><span m:value="#{e.netUriageZen}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{isTaishoMise}">&nbsp;</td>
	        <td m:rendered="#{e.uriageZennenhi < 100 && !isHosei}" class="body_hiritu"><span m:value="#{e.uriageZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.uriageZennenhi >= 100 && !isHosei}" class="body_num"><span m:value="#{e.uriageZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakusuZennenhi < 100 && !isHosei}" class="body_hiritu"><span m:value="#{e.kyakusuZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakusuZennenhi >= 100 && !isHosei}" class="body_num"><span m:value="#{e.kyakusuZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakutankaZennenhi < 100 && !isHosei}" class="body_hiritu"><span m:value="#{e.kyakutankaZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakutankaZennenhi >= 100 && !isHosei}" class="body_num"><span m:value="#{e.kyakutankaZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.uriageZennenhi < 100 && isHosei}" class="body_hiritu"><span m:value="#{e.netUriageZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.uriageZennenhi >= 100 && isHosei}" class="body_num"><span m:value="#{e.netUriageZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakusuZennenhi < 100 && isHosei}" class="body_hiritu"><span m:value="#{e.netKyakusuZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakusuZennenhi >= 100 && isHosei}" class="body_num"><span m:value="#{e.netKyakusuZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakutankaZennenhi < 100 && isHosei}" class="body_hiritu"><span m:value="#{e.netKyakutankaZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	        <td m:rendered="#{e.kyakutankaZennenhi >= 100 && isHosei}" class="body_num"><span m:value="#{e.netKyakutankaZennenHi}" m:converter="#{commonCampaignNumConverter}"/></td>
	    </tr>
	</span>
    </span>
</table>
</div>
</div>
</div>
</div>
<input type="text" m:id="dummyEnter" style="display:none"/>
</form>
</div>
</body>
</html>
