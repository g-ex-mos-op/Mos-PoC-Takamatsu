<html xmlns:m="http://www.seasar.org/maya" m:action="#{campKakoMiseListAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>キャンペーン過去履歴（期間合計）</title>
<span m:inject="f:param" m:name="layoutTitle" m:value="キャンペーン過去履歴（期間合計）"/>
<span m:inject="s:insert" m:name="bodyTitleName">■キャンペーン過去履歴（期間合計）</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBR014V02"/>
<span m:inject="f:param" m:name="userTypeCd" m:value="#{campKakoSessionDto.userTypeCd}"/>
<span m:inject="f:param" m:name="isTotal" m:value="#{campKakoViewRequestDto.menuTotaledKbn == 'TOTAL'}"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
</head>
<body>
<span m:inject="s:insert" m:name="body" >
<STYLE type="text/css">
<!--
/* 表：比率項目表示 */
.body_table2 tr td.hiritu_red{
  background-color      : #C0FFC0;
  color                 : red;
}
.body_table2 tr td.hiritu{
  background-color      : #C0FFC0;
}

/* 表：合計欄表示（タイプ１） */
tr.body_sum1 td.hiritu, tr.body_sum1 td.hiritu_red{
  background-color      : #FFD2E9;
}
/* 表：合計欄表示（タイプ１） */
tr.body_sum2 td.hiritu, tr.body_sum2 td.hiritu_red{
  background-color      : #C0C0FF;
}
/* 表：合計欄表示（タイプ１） */
tr.body_sum3 td.hiritu, tr.body_sum3 td.hiritu_red{
  background-color      : #C0FFFF;
}
/* 表：合計欄表示（タイプ５） */
tr.body_sum5 td.hiritu, tr.body_sum5 td.hiritu_red{
  background-color      : #FFC0A0;
}
.data_table_width {
    width:98%;
}
.width_TotalBlock {
    width:8%;
}
.width_Mise {
    width:*;
}
.width_Menu {
    width:19.5%;
}
.width_Uriage {
    width:10%;
}
.width_MenuUriage {
    width:10%;
}
.width_KazuKei {
    width:9%;
}
.width_KoseiHi {
	width:6%;
}
.width_Hiritu {
    width:6%;
}
.width_Rank_Sibu {
    width:8%;
}
.width_Rank {
    width:10.5%;
}
.width_eigyoDaysZen {
    width:5%;
}
//-->
</STYLE>
<script type="text/javascript">
<!--
var userTypeHONBU = "01";
var userTypeONER = "02";
var userTypeMISE = "03";
var scrollMaxHeight = 358;
function load(){
	if(document.conditionForm != null && document.conditionForm.elements['conditionForm:windowId'] != null) {
		document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
		if(document.conditionForm.elements['downloadBt'] != null) {
			document.conditionForm.elements['downloadBt'].disabled = "";
		}
	  	if("KINGAKU_KOSEIHI"==document.conditionForm.elements['conditionForm:view_rankKind'].value) {
	  		scrollMaxHeight = 341;
	  	}
	  	loadScroll("campkakoScroll", scrollMaxHeight);
  	}
}
/**
 * 会社プルダウンリスト変更時処理
 *
 * 会社プルダウンの値毎に
 * 対象条件プルダウンの内容を変更し、
 * 対象条件プルダウンが変更されることにより表示対象オブジェクトも変更される。
 */
function changeCompanyCd(){
	if(returnLoadingStatus()){
		setJokenData();
		document.conditionForm.target ="_self";
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:changeCompanyCd';
		document.conditionForm.submit();
	}
}
/**
 * キャンペーンプルダウンリスト変更時処理
 *
 * キャンペーンプルダウンの値毎に
 * 対象日プルダウンの内容を変更される。
 */
function changeCampaign(myElemtnt){
    //対象日プルダウン変更処理
    var sIndex = myElemtnt.selectedIndex;
    var campId = myElemtnt.options[sIndex].value;
	//対象支部設定
	if(isUserType(userTypeHONBU)) {
		elementTarget = document.conditionForm.elements['conditionForm:shukeiKbn'];
	    var shukeiKbn = elementTarget.options[elementTarget.selectedIndex].value;
		document.conditionForm.elements['conditionForm:shukeiKbn'].value= shukeiKbn;
	    //対象支部プルダウン設定
	   	changeDisplay("div", "pdwn_hyojiTaisho_", campId+shukeiKbn);
	    //対象支部プルダウンリストエレメント取得処理
		elementPullDown = getPullDownElement("select", "pdwn_hyojiTaisho_", campId+shukeiKbn);
		elementPullDown.selectedIndex=0;
	}
}
/**
 * 店舗種別プルダウン変更処理
 *
 * 店舗種プルダウンの値毎に
 * 前年データ種別のプルダウンの内容を変更
 *
 */
function changeTenposShu(myElemtnt) {
    var sIndex = myElemtnt.selectedIndex;
    var selectedCd = myElemtnt.options[sIndex].value;
    //前年データ種別プルダウン設定
   	changeDisplay("div", "pdwn_zds_", selectedCd);
	//前年データ種別プルダウンリストエレメント取得処理
	var	elementPullDown = getPullDownElement("select", "pdwn_zds_", selectedCd);
	elementPullDown.selectedIndex=0;
}
/**
 * 集計区分プルダウン変更処理
 *
 * 集計区分プルダウンの値毎に
 * 対象支部のプルダウンの内容を変更
 *
 */
function changeShukeiKbn(myElemtnt) {
	var elementTarget = document.conditionForm.elements['conditionForm:campId'];
    var campId = elementTarget.options[elementTarget.selectedIndex].value;
    var sIndex = myElemtnt.selectedIndex;
    var shukeiKbn = myElemtnt.options[sIndex].value;
    if(isUserType(userTypeHONBU)) {
	    //対象支部プルダウン設定
	   	changeDisplay("div", "pdwn_hyojiTaisho_", campId+shukeiKbn);
	   	document.conditionForm.elements['conditionForm:taishoJoken'].value = shukeiKbn;
	    //プルダウンリストエレメント取得処理
		var elementPullDown = getPullDownElement("select", "pdwn_hyojiTaisho_", campId+shukeiKbn);
		elementPullDown.selectedIndex=0;
   	}
}

/**
 * 検索ボタン押下時処理
 *
 */
function search(){
	if(returnLoadingStatus()){
		setJokenData();
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:search';
		if(document.conditionForm.elements['conditionForm:newWinFlg'] != null
				&& document.conditionForm.elements['conditionForm:newWinFlg'].checked) {
			document.conditionForm.elements['conditionForm:newWindowFlg'].value=true;
			document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
			document.conditionForm.target ="_blank";
		}else{
			document.conditionForm.elements['conditionForm:newWindowFlg'].value=false;
			document.conditionForm.target ="_self";
		}
		if (document.conditionForm.target == "_self") {
		    if (document.getElementById("conditionForm:doExecuteBtn") != null) {
    		    document.getElementById("conditionForm:doExecuteBtn").disabled = true;
    		} else {
    		    document.getElementById("conditionForm:doExecuteBtn2").disabled = true;
    		}
		    document.getElementById("conditionForm:pane_result").style.display = "none";
		    document.getElementById("conditionForm:pane_waitmsg").style.display = "inline";
		}
		document.conditionForm.submit();
	}
}
/**
 * 指定店舗一覧画面表示処理
 */
function linkUp(miseCd) {
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:linkUp';
	document.conditionForm.target ="_blank";
	document.conditionForm.elements['conditionForm:newWindowFlg'].value=false;
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
	document.conditionForm.submit();
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function returnLoadingStatus(){
	if(isLoadingFlgOFF()) {
		setLoadingFlg();
		return true;
	}
	return false;
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function isLoadingFlgOFF(){
	return (document.conditionForm.elements['conditionForm:loadingFlg'].value != "ON");
}
/**
 * ダウンローﾄﾞボタン押下時処理
 *
 */
function execDownLoad(){
	if(isLoadingFlgOFF()){
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:downloadCsv';
		document.conditionForm.target ="_self";
		document.conditionForm.submit();
	}
}

/**
 * ユーザータイプ判別処理
 *
 */
function isUserType(code){
	var userType = document.conditionForm.elements['conditionForm:userTypeCd'].value;
	return (code == userType);
}
/**
 * 会社コードモスフード判別処理
 *
 */
function isCompanyCdMos(){
	var companyCd = "";
    companyCd = document.conditionForm.elements['conditionForm:companyCd'].value;
	return (companyCd == "00");
}

/**
 * ウィンドウロードフラグ設定処理
 *
 *
 */
function setLoadingFlg() {
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "ON";
}
/**
 * 検索条件値設定処理
 *
 */
function setJokenData(){
	var elementTarget = document.conditionForm.elements['conditionForm:campId'];
    var campId = elementTarget.options[elementTarget.selectedIndex].value;

	//対象支部設定
	if(isUserType(userTypeHONBU)) {
		 //店舗種別の値を検索条件へ設定します。
	     var elementPdwn = document.conditionForm.elements['conditionForm:tenpoShubetuPdwn'];
		 if(null != elementPdwn) {
		 	document.conditionForm.elements['conditionForm:tenpoShubetu'].value =  elementPdwn.options[elementPdwn.selectedIndex].value;
		 }
		elementTarget = document.conditionForm.elements['conditionForm:shukeiKbn'];
	    var shukeiKbn = elementTarget.options[elementTarget.selectedIndex].value;
	    //プルダウンリストエレメント取得処理
		elementPullDown = getPullDownElement("select", "pdwn_hyojiTaisho_", campId+shukeiKbn);
		var targetSibu = elementPullDown.options[elementPullDown.selectedIndex].value;
		document.conditionForm.elements['conditionForm:hyojiTaisho'].value=targetSibu;
	}
}
/**
 * プルダウンリストエレメント取得処理
 */
function getPullDownElement(targetTag, commonClassName, targetCode) {
	var objsDiv = document.conditionForm.getElementsByTagName(targetTag);
	for (i = 0; i < objsDiv.length; i++) {
		var classNm = objsDiv[i].className;
		if(classNm.substring(0,commonClassName.length) == commonClassName){
			if(classNm.substring(commonClassName.length) == targetCode) {
				return elementPullDown = objsDiv[i];
			}
		}
	}
	return null;
}
/*
 * 条件フォーム用表示ステータス変更処理
 */
function changeDisplay(targetTag, firstCalssNm, lastClassNm) {
	var objs = document.conditionForm.getElementsByTagName(targetTag);
	for (i = 0; i < objs.length; i++) {
		var classNm = objs[i].className;
		if(classNm.substring(0,firstCalssNm.length) == firstCalssNm){
			if(classNm.substring(firstCalssNm.length) == lastClassNm) {
				objs[i].style.display     = "inline";
			}else{
				objs[i].style.display   = "none";
			}
		}
	}
}
/*
 * 条件フォーム用表示ステータス変更処理
 */
function changeDisplayForView(targetTag, firstCalssNm, lastClassNm) {
	var objs = document.conditionForm.getElementsByTagName(targetTag);
	for (i = 0; i < objs.length; i++) {
		var classNm = objs[i].className;
		if(classNm.substring(0,firstCalssNm.length) == firstCalssNm){
			if(classNm.substring(classNm.length-lastClassNm.length) == lastClassNm) {
				objs[i].style.display     = "inline";
			}else{
				objs[i].style.display   = "none";
			}
		}
	}
}
/*
 * タブ切り替え
 */
function changeTab() {
	document.conditionForm.target ="_self";
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:changeTab';
	document.conditionForm.submit();
}
/*
 * 年度切り替え
 */
function changeNendo() {
	document.conditionForm.target ="_self";
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:changeNendo';
	document.conditionForm.submit();
}

//-->
</script>
<form m:id="conditionForm" onKeyDown="return setDefaultSubmitButton('conditionForm','btnExecute');" target="_self">
		<input type="hidden" id="viewId" m:value="#{campKakoRequestDto.viewId}" />
		<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
		<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
		<input type="hidden" id="windowId" m:value="#{campKakoRequestDto.windowId}"/>
		<input type="hidden" id="userTypeCd" m:value="#{userTypeCd}" m:passthrough="true"/>
		<input type="hidden" id="loadingFlg" value=""/>
		<input type="hidden" id="companyCd" m:value="#{campKakoRequestDto.companyCd}"/>
		<input type="hidden" id="tenpoShubetu" m:value="#{campKakoRequestDto.tenpoShubetu}"/>
		<input type="hidden" id="taishoKikan" m:value="#{campKakoRequestDto.taishoKikan}"/>
		<input type="hidden" id="taishoJoken" m:value="#{campKakoRequestDto.taishoJoken}"/>
		<input type="hidden" id="hyojiTaisho" m:value="#{campKakoRequestDto.hyojiTaisho}"/>
		<input type="hidden" id="taishoDt" m:value="#{campKakoRequestDto.taishoDt}"/>
		<input type="hidden" id="zennenDataShubetu" m:value="#{campKakoRequestDto.zennenDataShubetu}"/>
		<input type="hidden" id="newWindowFlg" m:value="#{campKakoRequestDto.newWindowFlg}"/>
	    <input type="hidden" id="view_viewId" m:value="#{campKakoViewRequestDto.viewId}" />
		<input type="hidden" id="view_windowId" m:value="#{campKakoViewRequestDto.windowId}"/>
		<input type="hidden" id="view_companyCd" m:value="#{campKakoViewRequestDto.companyCd}"/>
		<input type="hidden" id="view_nendo" m:value="#{campKakoViewRequestDto.nendo}"/>
		<input type="hidden" id="view_campId" m:value="#{campKakoViewRequestDto.campId}"/>
		<input type="hidden" id="view_menuTotaledKbn" m:value="#{campKakoViewRequestDto.menuTotaledKbn}"/>
		<input type="hidden" id="view_tenpoShubetu" m:value="#{campKakoViewRequestDto.tenpoShubetu}"/>
		<input type="hidden" id="view_shukeiKbn" m:value="#{campKakoViewRequestDto.shukeiKbn}"/>
		<input type="hidden" id="view_taishoKikan" m:value="#{campKakoViewRequestDto.taishoKikan}"/>
		<input type="hidden" id="view_taishoJoken" m:value="#{campKakoViewRequestDto.taishoJoken}"/>
		<input type="hidden" id="view_hyojiTaisho" m:value="#{campKakoViewRequestDto.hyojiTaisho}"/>
		<input type="hidden" id="view_taishoDt" m:value="#{campKakoViewRequestDto.taishoDt}"/>
		<input type="hidden" id="view_rankKind" m:value="#{campKakoViewRequestDto.rankKind}"/>
		<input type="hidden" id="view_zennenDataShubetu" m:value="#{campKakoViewRequestDto.zennenDataShubetu}"/>
		<a id="changeCompany" m:action="#{campKakoMiseListAction.changeCompany}"/>
		<a id="changeCamp" m:action="#{campKakoMiseListAction.changeCamp}"/>
		<a id="search" m:action="#{campKakoMiseListAction.search}"/>
		<a id="downloadCsv" m:action="#{campKakoCsvDownloadAction.downloadCsv}"/>
		<a id="linkUp" m:action="#{campKakoMiseListAction.linkUp}"/>
		<a id="changeTab" m:action="#{campKakoMiseListAction.changeTab}"/>
		<a id="changeNendo" m:action="#{campKakoMiseListAction.changeNendo}"/>


	<div m:id="pane_waitmsg" style="display:none;font-weight:bold;">
		<p/>検索しています。しばらくお待ち下さい・・・</div>
	<div m:id="pane_result">
		<table class="element_browser hiddenBody" style="margin-bottom:4px;">
		    <tr>
		    <td rowspan="2">
				<table class="body_table">
		            <tr>
		              <th>年度</th>
		              <td>
		                <div class="hideArea">
		                  <select m:id="nendo"
		                          m:value="#{campKakoRequestDto.nendo}"
		                          m:items="#{campKakoRequestDto.listsNendo}"
		                          m:itemValue="code"
		                          m:itemLabel="name"
		                          m:onchange="changeNendo();">
		                      <option value="2006">2006年度</option>
		                      <option value="2007">2007年度</option>
		                      <option value="2008">2008年度</option>
		                  </select>
		                </div>
		              </td>
		              <th>キャンペーン</th>
		              <td colspan="#{userTypeCd=='01'?'3':''}">
		                <div class="hideArea">
		                    <select m:rendered="#{campKakoRequestDto.listsCamp != null}"
		                            m:id="campId"
		                            m:value="#{campKakoRequestDto.campId}"
		                            m:items="#{campKakoRequestDto.listsCamp}"
		                            m:itemValue="campId"
		                            m:itemLabel="campTitle"
		                            m:onchange="changeCampaign(this)">
		                        <option value="200801">2008年4月度テリヤキチキン</option>
		                        <option value="200802">２００８年玄米フレークシェイク</option>
		                    </select>
		                    <span m:rendered="#{campKakoRequestDto.listsCamp == null}">該当キャンペーンはありません。</span>
		                </div>
		              </td>
		              <th>メニュー</th>
		              <td colspan="2">
		                <div class="hideArea">
		                    <select m:id="menuTotaledKbn"
		                            m:value="#{campKakoRequestDto.menuTotaledKbn}"
		                            m:items="#{campKakoSessionDto.listMenuTotaled}"
		                            m:itemValue="code"
		                            m:itemLabel="name"
		                            disabled="#{campKakoRequestDto.listsCamp == null}">
		                        <option value="TOTAL">合計</option>
		                        <option value="TANPIN">単品</option>
		                        <option value="SHUYAKU">単品(集約)</option>
		                    </select>
		                  </div>
		              </td>
		            </tr>
		            <tr style="line-height:21px;">
		              <th m:rendered="#{userTypeCd=='01'}">店舗種別</th>
		              <td m:rendered="#{userTypeCd=='01'}">
		                <div class="hideArea">
		                  <select m:id="tenpoShubetuPdwn"
		                          m:value="#{campKakoRequestDto.tenpoShubetu}"
		                          m:items="#{campKakoSessionDto.listTenpoShubetu}"
		                          m:itemValue="code"
		                          m:itemLabel="name"
		                          disabled="#{campKakoRequestDto.listsCamp == null}">
		                        <option value="ALL">全店</option>
		                        <option value="1">前年対象店</option>
		                  </select></div>
		              </td>
		              <th>
		                <span m:value="#{(userTypeCd=='01')? '集計区分':'支部'}"/>
		              </th>
		              <td colspan="#{(userTypeCd=='01') ? '1' : '3'}">
		                <div class="hideArea">
		                  <select m:id="shukeiKbn"
		                          m:value="#{campKakoRequestDto.shukeiKbn}"
		                          m:items="#{campKakoSessionDto.listShukeiKbn}"
		                          m:itemValue="code"
		                          m:itemLabel="name"
		                          m:onchange="changeShukeiKbn(this)"
		                          disabled="#{campKakoRequestDto.listsCamp == null}">
		                        <option value="AREA_DAI">直営・販社含む</option>
		                        <option value="SIBU">直営・販社含まない</option>
		                  </select></div>
		              </td>
				      <th m:rendered="#{userTypeCd=='01'}">対象支部</th>
					  <td m:rendered="#{userTypeCd=='01'}">
						<div class="hideArea">
							<span m:inject="s:forEach" m:items="#{campKakoRequestDto.listsHyojiTaisho}" m:var="listsInfo" m:varindex="i">
								<span m:inject="s:forEach" m:items="#{listsInfo.listData}" m:var="listInfo" m:varindex="s">
								<div class="pdwn_hyojiTaisho_#{listsInfo.key}#{listInfo.key}" style="#{(listsInfo.key==campKakoRequestDto.campId && listInfo.key==campKakoRequestDto.shukeiKbn) == true ? '' : 'display:none;'}">
								<select class="pdwn_hyojiTaisho_#{listsInfo.key}#{listInfo.key}"
									m:value="#{campKakoRequestDto.hyojiTaisho}"
									m:items="#{listInfo.listData}"
									m:itemValue="hyojitaishoCd"
									m:itemLabel="hyojitaishoName"
									m:rendered="#{listInfo.listData != null}"
									disabled="#{campKakoRequestDto.listsCamp == null}">
								    <option value="011">北海道支部</option>
								    <option value="012">東北支部</option>
								    <option value="020">新潟・群馬・栃木支部</option>
								    <option value="022">埼玉支部</option>
								    <option value="023">千葉・茨城支部</option>
								    <option value="031">東京支部</option>
								</select></div></span></span></div>
					  </td>
		              <th>順位</th>
		              <td style="border-right-width:0px;">
		                <div class="hideArea">
		                    <select m:id="pldwnRankKind"
		                        m:value="#{campKakoRequestDto.rankKind}"
		                        m:items="#{campKakoSessionDto.listRankKind}"
		                        m:itemValue="code"
		                        m:itemLabel="name"
		                        disabled="#{campKakoRequestDto.listsCamp == null}">
		                        <option value="KINKOSEIHI">金額構成比</option>
		                        <option value="KOSU">個数</option>
		                    </select></div>
		               </td>
		               <td style="border-left-width:0px;padding-left:3px;">
				        <input type="button"
				               m:id="doExecuteBtn" value="#{campKakoRequestDto.searched=='true'?'再検索':'実行'}"
				               disabled="#{campKakoRequestDto.listsCamp == null}"
				               onclick="return search();" ondblclick="return false;"/>
		              </td>
		            </tr>
		        </table>
		    </td>
		    <td rowspan="2">&nbsp;</td>
		    <td><span style="font-size:11pt;" m:value="#{'01'!=userTypeCd?'※MSC＝モスストアカンパニー(旧販社)':''}"/></td>
		    </tr>
		    <tr>
			<td valign="bottom">
			<a href="javaScript:void(0);"
		           onClick="changeTab(); return false;" onDblClick="return false;">推移表へ</a>
		        </td>
		    </tr>
		</table>
		<span m:rendered="#{campKakoViewRequestDto.existSearchedData}">
		<div class="scroll_padding_head">
			<div class="scroll_hidden margin_bottom_hidden">
			<table class="hiddenBody data_table_width" style="margin-bottom:4px;">
		       	<tr>
					<td>
					<table class="body_table2 element_print" style="margin-bottom:4px;">
					    <tr class="header_row">
					        <th>年度</th>
					        <td><span m:value="#{campKakoViewRequestDto.nendo}"/>&nbsp;</td>
					        <th>キャンペーン</th>
					        <td><span m:converter="#{characterEncodingConverter}" m:value="#{campKakoViewRequestDto.campTitle}"/>&nbsp;</td>
					        <th>メニュー</th>
					        <td>
					        	<span m:inject="s:forEach"
					        	      m:items="#{campKakoSuiiSessionDto.listMenuTotaled}" m:var="e">
					        	      <span m:rendered="#{campKakoViewRequestDto.menuTotaledKbn == e.value}"
					        	            m:value="#{e.label}"/>&nbsp;
					        	</span>
					       </td>
					    </tr>
					</table>
					<table class="body_table2">
						<tr>
							<th>対象期間</th>
							<td><span m:value="#{campKakoViewRequestDto.campFrom}" m:converter="#{commonCampaignDtCnvtYMD}"/>〜<span m:value="#{campKakoViewRequestDto.mstCampDate.campTo}" m:converter="#{commonCampaignDtCnvtYMD}"/>&nbsp;</td>
							<span m:rendered="#{userTypeCd=='01' || userTypeCd=='02'}">
							<th>対象店舗数</th>
							<td align="right" width="50px"><span m:value="#{campKakoViewRequestDto.taishoTenpoCnt}" m:converter="#{commonCampaignNumConverter}"/></td>
							</span>
							<span m:rendered="#{userTypeCd=='01'}">
								<th>対象支部</th>
								<td align="right"><span m:converter="#{characterEncodingConverter}" m:value="#{campKakoViewRequestDto.hyojiTaishoName}"/>&nbsp;</td>
							</span>
						</tr>
					</table>
					</td>
		        	<td align="right">
						<table class="element_browser hiddenBody">
					       	<tr>
					        	<td>
						        	<input type="button" name="downloadBt" value="ダウンロード"
						        	       onClick="execDownLoad(); return false;" onDblClick="return false"/>
						        </td>
								<td><input type="checkbox" id="newWinFlg"
								           m:value="#{campKakoRequestDto.newWindowFlg}"/>別ウィンドウに表示</td>
					        </tr>
						</table>
					</td>
		        </tr>
			</table>
			<div m:rendered="#{'KINGAKU_KOSEIHI'==campKakoViewRequestDto.rankKind}"
			     class="data_table_width"
			     style="text-align:right;font-weight:bold;">※「順位」は金額構成比の絶対値に基づき表示しています。</div>
			<!--対象日モード-->
			<table class="body_table2 data_table_width">
				<tr class="header_row">
					<th m:rendered="#{userTypeCd=='01' && campKakoViewRequestDto.shukeiKbn == 'SIBU'}" class="width_TotalBlock">ブロック</th>
					<th class="width_Mise">店名称</th>
					<th class="width_Menu" m:rendered="#{!isTotal}">メニュー</th>
					<th class="width_eigyoDaysZen">営業<br/>日数</th>
					<th class="width_KazuKei">販売個数</th>
					<th class="width_MenuUriage">販売金額</th>
					<th class="width_KoseiHi">金額<br/>構成比</th>
					<th class="width_Uriage" m:rendered="#{isTotal}">売上</th>
					<th class="width_Uriage" m:rendered="#{isTotal}">前年売上</th>
					<th class="width_Hiritu" m:rendered="#{isTotal}">前年比</th>
					<th class="width_eigyoDaysZen">前年<br/>日数</th>
					<th class="width_Rank_Sibu">支部順位</th>
					<th class="width_Rank">全国順位</th>
				</tr>
			</table>
			</div>
			</div>
			<div class="scroll_padding_data_no">
				<div class="scroll_complete" id="campkakoScroll" style="height:#{'KINGAKU_KOSEIHI'==campKakoViewRequestDto.rankKind?'341':'358'}px;">
					<table class="body_table2 data_table_width" style="border-top-width : 0px;">
				    <colgroup m:rendered="#{userTypeCd=='01' && campKakoViewRequestDto.shukeiKbn == 'SIBU'}">
				        <col class="width_TotalBlock"/>
				        <col class="width_Mise"/>
				        <col m:rendered="#{!isTotal}" class="width_Menu"/>
				        <col class="width_eigyoDaysZen"/>
				        <col class="width_KazuKei"/>
				        <col class="width_MenuUriage"/>
				        <col class="width_KoseiHi"/>
				        <col m:rendered="#{isTotal}" class="width_Uriage"/>
				        <col m:rendered="#{isTotal}" class="width_Uriage"/>
				        <col m:rendered="#{isTotal}" class="width_Hiritu"/>
						<col class="width_eigyoDaysZen"/>
				        <col class="width_Rank_Sibu"/>
				        <col class="width_Rank"/>
				    </colgroup>
				    <colgroup m:rendered="#{userTypeCd!='01' || campKakoViewRequestDto.shukeiKbn != 'SIBU'}">
				        <col class="width_Mise"/>
				        <col m:rendered="#{!isTotal}" class="width_Menu"/>
				        <col class="width_eigyoDaysZen"/>
				        <col class="width_KazuKei"/>
				        <col class="width_MenuUriage"/>
				        <col class="width_KoseiHi"/>
				        <col m:rendered="#{isTotal}" class="width_Uriage"/>
				        <col m:rendered="#{isTotal}" class="width_Uriage"/>
				        <col m:rendered="#{isTotal}" class="width_Hiritu"/>
						<col class="width_eigyoDaysZen"/>
				        <col class="width_Rank_Sibu"/>
				        <col class="width_Rank"/>
				    </colgroup>
		                <span m:inject="s:forEach" m:items="#{campKakoViewRequestDto.listSearchData}" m:var="ui" m:varindex="i">
					      <tr class="#{ui.trCssClass}  non_top_border">
						       <td m:rendered="#{userTypeCd=='01' && campKakoViewRequestDto.shukeiKbn == 'SIBU'}" class="leftArea font_size_13" style="font-weight:bold;">
						         <span m:converter="#{characterEncodingConverter}" m:value="#{ui.blockName}"/>
						         <span m:rendered="#{ui.miseCd == null && ui.companyCd != null && ui.miseGroupSeq == 1}">店舗合計</span>
						       </td>
							  <td class="leftArea font_size_14" style="font-weight:bold;">
							  <span m:rendered="#{isTotal}">
							  	<a m:rendered="#{ui.miseCd != null}" href="javaScript:void(0);" onClick="linkUp(#{ui.miseCd}); return false;"><span m:converter="#{characterEncodingConverter}" m:value="#{(userTypeCd=='01'? ui.miseCd: '')} #{ui.miseNameKj}"/></a>
							  	<span m:converter="#{characterEncodingConverter}" m:rendered="#{ui.miseCd == null}" m:value="#{ui.miseNameKj}"/>
							  </span>
							  <span m:rendered="#{!isTotal}">
							  	<span m:converter="#{characterEncodingConverter}" m:rendered="#{ui.miseCd != null || (ui.miseCd == null && ui.companyCd == null)}" m:style="#{ui.miseGroupSeq>1 ? 'color : #CFCFCF;':''}"  m:value="#{(userTypeCd=='01'? ui.miseCd: '')} #{ui.miseNameKj}"/>
							  	<span m:rendered="#{ui.miseCd == null && ui.companyCd != null && ui.miseGroupSeq == 1}">
							  	  <span m:rendered="#{campKakoViewRequestDto.shukeiKbn == 'AREADAI' || userTypeCd!='01'}">店舗合計</span>
							  	</span>
							  </span>
							  </td>
					          <td class="font_size_13" m:rendered="#{!isTotal}"><span m:converter="#{characterEncodingConverter}" m:value="#{ui.menuNameKj}"/></td>
							  <td class="body_num font_size_13"><span m:value="#{ui.eigyoDays}"/></td>
							  <td class="body_num font_size_13"><span m:value="#{ui.kazuKei}" m:converter="#{commonCampaignNumConverter}"/></td>
							  <td class="body_num font_size_13"><span m:value="#{ui.menuUriage}" m:converter="#{commonCampaignNumConverter}" /></td>
							  <td class="body_num font_size_13 #{ui.kingakuKoseiHiCssClass}"><span m:value="#{ui.kingakuKoseiHi}" m:converter="#{commonCampaignNumConverter}" /></td>
							  <td m:rendered="#{isTotal}" class="body_num font_size_13"><span m:value="#{ui.uriage}" m:converter="#{bizreportNumericCnvt}" /></td>
							  <td m:rendered="#{isTotal}" class="body_num font_size_13"><span m:value="#{ui.uriageZen}" m:converter="#{bizreportNumericCnvt}" /></td>
							  <td m:rendered="#{isTotal}" class="body_num font_size_13 #{ui.uriageZennenHiCssClass}">
							  	<span m:value="#{ui.uriageZennenHi}" m:converter="#{commonCampaignNumConverter}" /></td>
							  <td class="body_num font_size_13">
							  	<span m:value="#{ui.eigyoDaysZen}"/></td>
							  <td class="body_num font_size_13">
							  	<span m:rendered="#{ui.rankInSibu != null}">
							  		<span m:value="#{ui.rankInSibu}" m:converter="#{commonCampaignNumConverter}" />(<span m:value="#{ui.sibuTenpoCnt}" m:converter="#{commonCampaignNumConverter}" />)</span></td>
							  <td class="body_num font_size_13">
							  	<span m:rendered="#{ui.rankInAll != null}">
							  		<span m:value="#{ui.rankInAll}" m:converter="#{commonCampaignNumConverter}" />(<span m:value="#{ui.allTenpoCnt}" m:converter="#{commonCampaignNumConverter}" />)</span></td>
						  </tr>
						</span>
					</table>
				</div>
				</div>
		</span>
	</div>
<input type="text" m:id="dummyEnter" style="display:none"/>
</form>
</span>
</body>
</html>
