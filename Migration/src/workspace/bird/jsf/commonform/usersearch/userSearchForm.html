<html xmlns:m="http://www.seasar.org/maya" m:action="#{userSearchAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title></title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="ユーザー選択"/>
<span m:inject="s:insert" m:name="bodyTitleName">■ユーザー選択</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BCO003V01"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject="f:param" m:name="rowCont" m:value="0"/>
<div m:inject="s:insert" m:name="body">
<STYLE type="text/css">
<!--
-->
</STYLE>
<SCRIPT LANGUAGE="javascript">
<!--
function load() {
	loadScroll("userSearchFormScroll", 330);
	focusElement("userSearch");
}
function initBumonList(){
    //部門選択
	document.forms['userSearch'].elements['userSearch:__link_clicked__'].value='userSearch:loadBumonList';
	document.forms['userSearch'].submit();
	return false;
}
function clearForm(formobj) {
    for (i = 0; i < formobj.elements.length; i++) {
        if (formobj.elements[i].type == "text") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "textarea") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "file") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "password") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "checkbox") {
            formobj.elements[i].checked = formobj.elements[i].defaultChecked;
            formobj.elements[i].checked = false;
        } else if (formobj.elements[i].type == "radio") {
            formobj.elements[i].checked = formobj.elements[i].defaultChecked;
        } else if (formobj.elements[i].type == "select-one") {
            for (j = 0; j < formobj.elements[i].options.length; j++) {
                formobj.elements[i].options[j].selected = formobj.elements[i].options[j].defaultSelected;
            }
            formobj.elements[i].selectedIndex = -1;
            formobj.elements[i].selectedIndex = 0;
        } else if (formobj.elements[i].type == "select-multiple") {
            for (j = 0; j < formobj.elements[i].options.length; j++) {
                formobj.elements[i].options[j].selected = formobj.elements[i].options[j].defaultSelected;
            }
            formobj.elements[i].selectedIndex = -1;
        }
    }
}

function selectUser(index){
	document.userSearch.elements['userSearch:index'].value = index;
	document.forms['userSearch'].elements['userSearch:__link_clicked__'].value='userSearch:selectUser';
	document.forms['userSearch'].submit();
	return false;
}

//-->
</SCRIPT>
<form m:id="userSearch">
<input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
<input type="hidden" m:id="windowId" m:value="#{userSearchRecentConditionDto.windowId}"/>
<input type="hidden" m:id="index" m:value="#{userSearchAction.index}"/>
<!-- 各ボタン -->
<input type="submit" value="検索" m:action="#{userSearchAction.search}" />&nbsp;&nbsp;
<input type="button" value="クリア" onclick="clearForm(this.form);" onclick="clearForm(this.form);"/>&nbsp;&nbsp;
<input type="submit" value="戻る" m:action="#{userSearchAction.cancel}"/>&nbsp;&nbsp;
<a id="selectUser" m:action="#{userSearchAction.select}"/>
<!-- 条件部分 -->
<table class="body_table font_size_14" style="margin:4px 0px;">
  <tr>
    <!-- 会社プルダウン -->
    <th width="110px">会社</th>
    <td>
      <div class="hideArea">
        <select m:id="rCompanyCd"
                m:value="#{userSearchRecentConditionDto.kaisyaCd}"
                m:items="#{userSearchRecentConditionDto.companyList}"
                m:itemValue="companyCd"
                m:itemLabel="companyName"
                m:onChange="initBumonList()">
            <option value="">MOS</option>
        </select>
      </div>
      <a id="loadBumonList" m:action="#{userSearchAction.loadBumonList}"/>
    </td>

    <!-- 使用停止を含む -->
    <td nowrap="true">
      <input type="checkbox" m:id="stopFlg" m:value="#{userSearchRecentConditionDto.stopFlg}" />使用停止を含む
    </td>

    <!-- オーナーコード -->
    <th width="110px">オーナーコード</th>
    <td>
      <input class="width_62" type="text" style="ime-mode:disabled"
             size="10" maxlength="5"
             m:id="onerCd" m:value="#{userSearchRecentConditionDto.onerCd}"/>
    </td>

    <!-- オーナー名称 -->
    <th width="110px">オーナー名称</th>
    <td colspan=1>
      <input class="width_100" type="text" m:id="onerNameKj" m:value="#{userSearchRecentConditionDto.onerNameKj}" maxlength="40" m:size="20"/>
    </td>
  </tr>

  <tr>
    <!-- 部門選択 -->
    <th>部門選択</th>
    <td colspan="2">
      <div class="hideArea">
        <select m:id="bumonCd"
                m:value="#{userSearchRecentConditionDto.bumonCd}"
                m:items="#{userSearchRecentConditionDto.bumonList}"
                m:itemValue="bumonCd"
                m:itemLabel="bumonName"
                m:nullLabel=" ">
            <option value=""></option>
            <option value="">MOS</option>
        </select>
      </div>
    </td>

    <!-- 店コード -->
    <th>店コード</th>
    <td>
      <input class="width_62" type="text"type="text" style="ime-mode:disabled"
             size="10" maxlength="5"
             m:id="miseCd" m:value="#{userSearchRecentConditionDto.miseCd}"/>
    </td>

    <!-- 店舗名 -->
    <th>店舗名</th>
    <td colspan=1>
      <input class="width_100" type="text" m:id="miseNameKj" m:value="#{userSearchRecentConditionDto.miseNameKj}" maxlength="40" m:size="20"/>
    </td>
  </tr>

  <tr>
    <!-- ロール選択プルダウン -->
    <th>ロール選択</th>
    <td colspan="2">
      <div class="hideArea">
        <select m:id="roleCd"
                m:value="#{userSearchRecentConditionDto.roleCd}"
                m:items="#{userSearchRecentConditionDto.roleList}"
                m:itemValue="roleCd"
                m:itemLabel="roleName"
                m:nullLabel=" ">
            <option value=""></option>
            <option value="">MOS</option>
        </select>
      </div>
    </td>

    <!-- ユーザID -->
    <th>ユーザーID</th>
    <td>
      <!-- ユーザID -->
      <input class="width_62" type="text"type="text" style="ime-mode:disabled"
             size="10" maxlength="8"
             m:id="userIdCond" m:value="#{userSearchRecentConditionDto.userIdCond}" />
    </td>

    <!-- ユーザ名 -->
    <th>ユーザー名</th>
    <td>
      <input class="width_100" type="text" m:id="userName" m:value="#{userSearchRecentConditionDto.userName}" maxlength="40"/>
    </td>
  </tr>
</table>
<span m:rendered="#{userSearchRecentConditionDto.userSearchListSize != 0}">
<!-- 一覧表示エリア -->
<div class="scroll_padding_head">
<div class="scroll_hidden margin_bottom_hidden">
	<div align="right" style="width:98%;line-height:24px;">
		<input type="submit" value="最初へ" m:action="#{userSearchAction.changePage}" m:disabled="#{userSearchRecentConditionDto.firstPage}">
			<span m:inject="f:param" m:name="selectPageNumber" m:value="#{userSearchRecentConditionDto.firstPageNumber}"/>
		</input>
		<input type="submit" value="前へ" m:action="#{userSearchAction.changePage}" m:disabled="#{!userSearchRecentConditionDto.existPreviousPage}">
			<span m:inject="f:param" m:name="selectPageNumber" m:value="#{userSearchRecentConditionDto.previousPageNumber}"/>
		</input>
		<input type="submit" value="次へ" m:action="#{userSearchAction.changePage}" m:disabled="#{!userSearchRecentConditionDto.existNextPage}">
			<span m:inject="f:param" m:name="selectPageNumber" m:value="#{userSearchRecentConditionDto.nextPageNumber}"/>
		</input>
		<input type="submit" value="最後へ" m:action="#{userSearchAction.changePage}" m:disabled="#{userSearchRecentConditionDto.lastPage}">
			<span m:inject="f:param" m:name="selectPageNumber" m:value="#{userSearchRecentConditionDto.lastPageNumber}"/>
		</input>
		&nbsp;&nbsp;
		<span m:value="#{userSearchRecentConditionDto.currentPageNumber}"/> / <span m:value="#{userSearchRecentConditionDto.lastPageNumber}"/>&nbsp;ページ
	</div>
  <table class="body_table2" style="width:98%;margin-top:4px;">
    <tr class="header_row">
      <th width="87px">ユーザーID</th>
      <th width="180px">ユーザー名</th>
      <th width="200px">会社</th>
      <th width="70px">所属</th>
      <th width="*">組織</th>
    </tr>
  </table>
</div>
</div>
<div class="scroll_padding_data">
<div id="userSearchFormScroll" class="scroll_standby">
<table class="body_table2" style="border-top-width : 0px;" width="98%">
  <span m:converter="#{characterEncodingConverter}" m:inject="s:selectOneRadio2" m:value="#{index}">
    <div m:inject="s:forEach" m:items="#{userSearchRecentConditionDto.userSearchList}" m:var="e" m:varindex="i">
      <tr class="non_top_border">
        <td width="87px">
          <span m:value="#{e.userId}"/>
        </td>
        <td width="180px">
		  <a href="#" onclick="selectUser('#{i}')" m:passthrough="true">
            <span m:converter="#{characterEncodingConverter}" m:value="#{e.userName}"/>
          </a>
        </td>
        <td width="200px">
          <span m:converter="#{characterEncodingConverter}" m:value="#{e.companyName}"/>
        </td>
        <td width="70px">
          <span m:converter="#{characterEncodingConverter}" m:value="#{e.usertypeName}"/>
        </td>
        <td width="*">
          <span m:converter="#{characterEncodingConverter}" m:value="#{e.sosiki}"/>
        </td>
      </tr>
    </div>
  </span>
</table>
</div>
</div>
</span>
<input type="text" m:id="dummyEnter" style="display:none"/>
</form>
</div>
</body>
</html>
