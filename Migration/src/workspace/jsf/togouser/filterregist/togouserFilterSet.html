<html xmlns:m="http://www.seasar.org/maya" m:action="#{getTogoFilterAction.initialize}" m:extends="/jsf/layout/layoutNoNaviTogo.html">

	<head>
	    <meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
	    <title>ユーザー別フィルタ設定画面</title>
	</head>
	<body>
		<span m:inject="f:param" m:name="layoutTitle" m:value="ユーザー別フィルタ設定画面"/>
		<span m:inject="s:insert" m:name="bodyTitleName">■ユーザー別フィルタ設定画面</span>
        <span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
		<span m:inject="f:param" m:name="viewIdValue" m:value="BUR002V01"/>
		<span m:converter="#{characterEncodingConverter}" m:inject="f:param" m:name="bumonfilter" m:value="#{bumonFilterDto.bumonFilterList}"/>
		<span m:inject="s:insert" m:name="naviarea" m:src="/jsf/togouser/common/menuLink.html"/>
		<span m:inject="s:insert" m:name="body">

			<script type="text/javascript">
				<!--
				function load() {
				   document.userHenkou.elements['userHenkou:userIdIn'].focus();
				   //radioCheck();
				}

				function search() {
				var miseCd = document.userHenkou.elements['userHenkou:userIdIn'].value;
				document.userHenkou.elements['userHenkou:userId'].value=miseCd;
				document.userHenkou.elements['userHenkou:__link_clicked__'].value='userHenkou:search';
				//document.userHenkou.submit();
				}

				function radioCheck(){
					for (i = 0; i < document.userHenkou.elements.length; i++) {
						if(document.userHenkou.elements[i].type == "radio"){
						alert(document.userHenkou.elements[i].value);
							if(document.userHenkou.elements[i].value == "9"){
								document.userHenkou.elements[i].checked = true;
							}
						}else if(document.userHenkou.elements[i].type == "radio") {
							if(document.userHenkou.elements[i].value == "1"){
								document.userHenkou.elements[i].checked = true;
							}
						}else if(document.userHenkou.elements[i].type == "radio") {
							if(document.userHenkou.elements[i].value == "0"){
								document.userHenkou.elements[i].checked = true;
							}
						}
					}
				}
				function regist() {
					var message = document.userHenkou.elements['userHenkou:message'].value;
					var ancer = confirm(message);
					if (ancer == true){
						document.userHenkou.elements['userHenkou:__link_clicked__'].value='userHenkou:regist';
					}
				}
				// -->
			</script>
			<form m:id="userHenkou">
			<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
			<a id="search" m:action="#{getTogoFilterAction.search}"/>
			<a id="regist" m:action="#{getTogoFilterAction.regist}"/>
				<p/>
			<input type="submit" m:id="Search" value="編集" onClick="search();"/>
			<p/>
				<table class="body_table">
					<tr>
						<th>ユーザーID</th>
						<td>
						<input m:id="userIdIn"
						       class="imenotuse"
						       type="text"
						       m:maxlength = "8"
						       m:size = "15"
						       m:value="#{togoUserInfoDto.userId}"/></td>
					</tr>
				</table>
				<input type="text" m:id="dummyEnter" style="display:none">
				<br>
				<table m:rendered="#{togoUserInfoDto.Userlist!=null}"
				       class="body_table2" width="550px">
					<span m:inject="s:forEach" m:items="#{togoUserInfoDto.Userlist}" m:var="e">
					  <tr>
					    <th width="*">ユーザー名称</th>
					    <td width="402px"><span m:converter="#{characterEncodingConverter}" m:value="#{e.UserNameKj}"/></td>
					  </tr>
					  <tr>
					    <th>所属部門名称</th>
					    <td><span m:converter="#{characterEncodingConverter}" m:value="#{e.BumonName}"/></td>
					  </tr>
					 </span>
				</table>
				<div m:rendered="#{bumonFilterDto.BumonFilterList!=null}">
				<table class="body_table2" style="width:680px;margin-top:4px;">
				  <tr class="header_row">
				    <th width="*">対象システム</th>
				    <th width="120px">部門状況</th>
				    <th width="120px">部門に準拠</th>
				    <th width="120px">個別許可</th>
				    <th width="120px">個別不可</th>
				  </tr>
				</table>
			    <table class="body_table2" style="width:680px;border-top-width:0px;">
				    <span m:inject="s:forEach" m:items="#{bumonFilterDto.bumonFilterList}" m:var="ex" m:varindex="i">
				    <span m:inject="s:selectOneRadio2" m:name="#{i}" m:value="#{ex.RenkeiFlg}" m:var="">
				        <tr class="non_top_border">
				            <td width="*" align="left"><span m:converter="#{characterEncodingConverter}" m:id="Gname" m:value="#{ex.GroupName}"/></td>
			  	            <td width="120px" align="center">
			  	            	<span m:rendered="#{ex.GroupCdRflg=='1'}" m:value="許可"/>
			  	            	<span m:rendered="#{ex.GroupCdRflg=='0'}" m:value="不可"/>
			  	            	<span m:rendered="#{ex.GroupCdRflg==null}" m:value=""/></td>
				            <td width="120px" align="center">
				            	<input type="radio" m:value="9"/></td>
				            <td width="120px" align="center">
				            	<input type="radio" m:value="1"/></td>
				            <td width="120px" align="center">
				            	<input type="radio" m:value="0"/></td>
				       </tr>
				    </span>
				    </span>
                </table>
                </div>
                <table width="680px" m:rendered="#{togoUserInfoDto.Userlist!=null}">
					<td align="right">
						<input type="submit" value="戻る" m:action="#{getTogoFilterAction.back}"/>
					</td>
					<td width="50px" align="right">
						<input type="submit" value="登録" onClick="regist();"/>
					</td>
                </table>
				<input type="hidden" m:id="userId" m:value="#{togoUserInfoDto.userId}"/>
				<input type="hidden" m:id="message" m:value="#{togoUserInfoDto.message}"/>
			</form>
		</span>
	</body>
</html>