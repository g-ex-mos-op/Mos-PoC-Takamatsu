<html xmlns:m="http://www.seasar.org/maya" m:action="#{miseOnerSearchAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title></title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="店・オーナー検索"/>
<span m:inject="s:insert" m:name="bodyTitleName">■店・オーナー検索</span>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject="f:param" m:name="viewIdValue" m:value="BCO014V01"/>
<span m:inject="s:insert" m:name="body">
<STYLE type="text/css">
<!--
/* テーブルヘッダデフォルト設定 パターン２*/
/* テーブルヘッダのセンタリング用 */
table.body_table2 tr th{
    text-align    : center;
}
.col_bunrui {
    width         : 110px;
}
.col_mise {
    width:	*px;
}
.col_oner {
    width:	315px;
}
.col_company {
    width:	135px;
}
-->
</STYLE>
<SCRIPT LANGUAGE="javascript">
<!--
function load() {
	loadScroll("searchMiseOnerFormScroll", 400);
	focusElement('conditionFom');
}
/**
 * 個店ポータル画面遷移処理
 */
function callMisePortal(rowIndex){
	document.conditionFom.elements['conditionFom:selectedIndex'].value=rowIndex;
	document.conditionFom.elements['conditionFom:__link_clicked__'].value='conditionFom:callMisePortal';
	document.conditionFom.target = "_blank";
	document.conditionFom.submit();
	return false;
}
/**
 * オーナー照会画面遷移処理
 */
function callOnerPortal(rowIndex){
	document.conditionFom.elements['conditionFom:selectedIndex'].value=rowIndex;
	document.conditionFom.elements['conditionFom:__link_clicked__'].value='conditionFom:callOnerPortal';
	document.conditionFom.target = "_blank";
	document.conditionFom.submit();
	return false;
}
//-->
</SCRIPT>
<form m:id="conditionFom">
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:value="#{miseOnerSearchReqDto.windowId}"/>
	<input type="hidden" m:id="selectedIndex" m:value="#{miseOnerSearchReqDto.selectedIndex}"/>
	<input type="hidden" name=":isUseCommonDto" value="1" m:passthrough="true"/>
	<a id="callMisePortal" m:action="#{miseOnerSearchAction.callMisePortal}" target="_blank"/>
	<a id="callOnerPortal" m:action="#{miseOnerSearchAction.callOnerPortal}" target="_blank"/>
	<table cellspacing="0"	>
		<tr style="vertical-align: middle;">
		<td>
			<table class="body_table">
			  <tr>
			    <th>検索</th>
			    <td>
			      <input type="text" m:id="searchWord" m:value="#{miseOnerSearchReqDto.searchWord}" m:size="40" maxlength="20"/>を
			    </td>
			   </tr>
			</table>
		</td>
		<td>
			<input type="submit" value="検索" m:action="#{miseOnerSearchAction.search}" onClick="document.conditionFom.target = '_self';" onDblClick="return false;"/>&nbsp;&nbsp;
		</td>
		</tr>
	</table>
    <div m:rendered="#{miseOnerSearchReqDto.searchedDataCnt>0}"
         style="margin-top:4px;">
        <font style="font-weight:bold;">該当は<span m:value="#{miseOnerSearchReqDto.searchedDataCnt}"/>件あります。</font>
		<div class="scroll_padding_head">
        <div class="scroll_hidden">
		<table class="body_table2" style="width:98%;">
			<tr>
				<th class="col_bunrui">分類</th>
				<th class="col_mise">店</th>
				<th class="col_oner">オーナー</th>
				<th class="col_company">会社</th>
			</tr>
		</table>
		</div>
		</div>
		<div class="scroll_padding_data">
		<div id="searchMiseOnerFormScroll" class="scroll_standby">
		<table class="body_table2" style="width:98%;border-top-width:0px;margin-top:0px;">
			<div m:inject="s:forEach"
			     m:items="#{miseOnerSearchReqDto.listSearchData}"
			     m:var="e" m:varindex="i">
			      <tr class="non_top_border font_size_14">
			      	<td class="col_bunrui"><span m:converter="#{characterEncodingConverter}" m:value="#{e.bunruiName}"/></td>
			        <td class="col_mise"><a href="#" onclick="callMisePortal(#{i})"><span m:converter="#{characterEncodingConverter}" m:value="#{e.miseCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{e.miseNameKj}"/></a></td>
			        <td class="col_oner"><a href="#" onclick="callOnerPortal(#{i})"><span m:converter="#{characterEncodingConverter}" m:value="#{e.onerCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{e.onerNameKj}"/></a></td>
			        <td class="col_company"><span m:converter="#{characterEncodingConverter}" m:value="#{e.companyName}"/></td>
			      </tr>
			</div>
		</table>
		</div>
		</div>
	</div>
	<input type="text" m:id="dummyEnter" style="display:none"/>
</form>
</span>
</body>
</html>
