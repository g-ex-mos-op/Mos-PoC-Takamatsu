<html xmlns:m="http://www.seasar.org/maya" m:action="#{mlResultRegistCondAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j"/>
<meta http-equiv="Content-Style-Type" content="text/css"/>
<title>マスターライセンス結果登録</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="マスターライセンス結果登録"/>
<span m:inject="s:insert" m:name="bodyTitleName">■マスターライセンス結果登録</span>
<span m:inject="f:param" m:name="onLoadName" m:value=""/>
<span m:inject="f:param" m:name="viewIdValue" m:value="BSM008V01"/>
<div m:inject="s:insert" m:name="body">
<script language="JavaScript">
<!--
function setRadio(position) {
  var f = document.forms['mlResultRegistCond'];
  if (position == "1") {
    f.elements['mlResultRegistCond:rbSibu'].checked = true;
  }
  else if (position == "2") {
    f.elements['mlResultRegistCond:rbOnerCd'].checked = true;
  }
  else if (position == "3") {
    f.elements['mlResultRegistCond:rbMiseCd'].checked = true;
  }
}

-->
</script>
<style type="text/css">
<!--
-->
</style>

<form m:id="mlResultRegistCond">
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />

  <!-- 受験結果登録ボタン -->
  <input type="submit" value="受験結果登録" m:action="#{mlResultRegistCondAction.regist}" m:disabled="#{mlResultRegistDto.emptyListTarget}"/>

  <!-- 一括取込ボタン -->
  <span m:rendered="#{mlResultRegistDto.ikkatuTorikomiFlg}">
    <input type="submit" value="一括取込" m:action="#{mlResultRegistCondAction.importCsv}" m:disabled="#{mlResultRegistDto.emptyListTarget}"/>
  </span>

  <span m:rendered="#{mlResultRegistDto.userTypeCd == '01'}">
    <table class="body_table" style="margin-top:4px;">
      <caption class="body_title width_percent_69_86" style="text-align:left; padding:2px 0px;"> 検索条件</caption>
      <col width="180px"/>
      <col width="35px"/>
      <col width="auto"/>
      <col width="120px"/>
      <col width="120px"/>
      <tr>
        <th width="180px">会社</th>
        <th width="35px" style="border-right-width:0px;" >支部</th>
        <th width="auto" style="border-left-width:0px;"></th>
        <th width="120px">オーナー
          <input type="submit" value="検索" m:id="callOnerBtn" m:action="#{mlResultRegistCondAction.callOnerForm}" m:onclick="setRadio('2');" m:disabled="#{mlResultRegistDto.emptyListTarget}"/>
        </th>
        <th width="120px">店舗&nbsp;
          <input type="button" value="検索" m:id="miseB" m:action="#{mlResultRegistCondAction.callMiseForm}" m:onclick="setRadio('3');" m:disabled="#{mlResultRegistDto.emptyListTarget}"/>
          <a m:id="miseSearch" m:action="#{mlResultRegistCondAction.callMiseForm}"/>
        </th>
      </tr>
      <tr>
        <span m:converter="#{characterEncodingConverter}" m:inject="s:selectOneRadio2" m:value="#{mlResultRegistDto.condType}">
          <td width="180px">
            <select size=1 m:value="#{mlResultRegistDto.condCompanyCd}">
              <option value="00">モスフードサービス</option>
            </select>
          </td>
          <td width="35px" style="border-right-width:0px;"><input  m:id="rbSibu" type="radio" name="selectFlg" m:value="1"/></td>
          <td style ="width:auto;border-left-width:0px;">
          <div class="hideArea">
           <select style="margin:2px;width:*" m:id="condSibuCd"
              m:value="#{mlResultRegistDto.condSibuCd}"
              m:items="#{mlResultRegistDto.listSibu}"
              m:itemValue="sibuCd"
              m:itemLabel="sibuName"
              onChange="setRadio('1');">
              <option>東京支部</option>
            </select>
          </div>
          </td>
          <td width="120px">
            <input m:id="rbOnerCd" type="radio" name="selectFlg" m:value="2"/>
            <input style="margin:2px;" m:id="condOnerCd" class="imenotuse width_62" type="text" m:maxlength="5" size="10" m:value="#{mlResultRegistDto.condOnerCd}" onFocus="setRadio('2');"/>
          </td>
          <td width="120px">
            <input m:id="rbMiseCd" type="radio" name="selectFlg" m:value="3"/>
            <input style="margin:2px;" m:id="condMiseCd" class="imenotuse width_62" type="text" m:maxlength="5" size="10" m:value="#{mlResultRegistDto.condMiseCd}" m:converter="#{mlresultStatusRefMiseConverter}" onFocus="setRadio('3');"/>
          </td>
        </span>
      </tr>
    </table>
  </span>

<div m:rendered="#{!mlResultRegistDto.emptyListTarget}">
<span m:converter="#{characterEncodingConverter}" m:inject="s:selectOneRadio2" m:id="condTarget" m:value="#{mlResultRegistDto.condTarget}">
<table border=1 class="body_table" style="margin-top:4px;">
	<caption class="body_title width_percent_69_86" style="text-align:left; padding:2px 0px;"> 受験結果登録</caption>

	<tr>
		<th width="50px">対象</th>
		<th width="200px">実施時期</th>
		<th width="150px">年度・回</th>
		<th width="200px">対象科目</th>
	</tr>
	<div m:inject="s:forEach" m:items="#{mlResultRegistDto.listTarget}" m:var="e" m:varindex="i">
	<tr>
		<td width="50px" style="text-align:center;">
		<input type="radio" value="#{i}"/>
		</td>
		<td width="200px">
		  <span m:value="#{e.fromDt}" m:converter="#{mlrrDateConverterYMKanji}"/>〜<span m:value="#{e.toDt}" m:converter="#{mlrrDateConverterYMKanji}"/>
		</td>
		<td width="150px">
		  <span m:converter="#{characterEncodingConverter}" m:value="#{e.entryYear}"/>年度　第<span m:converter="#{characterEncodingConverter}" m:value="#{e.entryKaiRemoveZero}"/>回
		</td>
		<td width="200px">
		  <span m:converter="#{characterEncodingConverter}" m:inject="s:selectOneRadio2" m:id="kamokuRadio" m:value="#{e.targetKamoku}">
		    <input type="radio" value="0"/>能力チェック　&nbsp;
		    <input type="radio" value="1"/>面接
		  </span>
		</td>
	</tr>
	</div>
</table>
</span>
</div>

</form>

</div>
</body>
</html>
