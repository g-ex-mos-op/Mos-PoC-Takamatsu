<html xmlns:m="http://www.seasar.org/maya" m:action="#{budgetRefConditionAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=Windows-31j"/>
  <meta http-equiv="Content-Style-Type" content="text/css"/>
  <title>事業計画予算確認</title>
 </head>
 <body>
  <span m:inject="f:param" m:name="layoutTitle" m:value="事業計画予算確認"/>
  <span m:inject="s:insert" m:name="bodyTitleName">■事業計画予算確認</span>
  <span m:inject="f:param" m:name="onLoadName" m:value="init();"/>
  <span m:inject="f:param" m:name="viewIdValue" m:value="BBS023V01"/>
  <span m:inject="s:insert" m:name="body">
   <STYLE type="text/css">
    <!--
	.scroll_area {
		height				: 380px;
		width				: 980px;
	}
     /* テーブルヘッダデフォルト設定 パターン２*/
     /* テーブルヘッダのセンタリング用 */
	  table.body_table2 tr.defaultTR{
    	  background-color      : #FFFFCC;
		  border-color          : #808080 #808080 #808080 #808080;
	  }
	  table.body_table2 tr td{
		  text-align            : right;
	  }
	  table.body_table2 tr td.meisai {
		  text-align            : left;
	  }
	  table.body_table2 tr td.mise_total{
	     background-color      : #C0FFC0;
	  }
	  table.table_yosan {
	  	width:625px;
	  	border-left-width:0px;
	  }
	  .col_yosan {
	  	width:101px;
	  	border-left-width:0px;
	  }
    //-->
   </STYLE>
   <script type="text/javascript">
   <!--
    function init(){
     var userTypeCode = document.forms['budgetRef'].elements['budgetRef:userTypeCd'].value;
	 var revExec = document.forms['budgetRef'].elements['budgetRef:revExec'].value;
     if(revExec == 0){
	     if(userTypeCode == 01) {
	      document.forms['budgetRef'].elements['budgetRef:companyCd'].focus();
	     }else{
	      document.forms['budgetRef'].elements['budgetRef:exec'].disabled = true;
	     }
	 }
    }

    function sibuDownload() {
     document.budgetRef.elements['budgetRef:__link_clicked__'].value='budgetRef:typeA';
     document.budgetRef.submit();
    }

    function tenpoDownload() {
     document.budgetRef.elements['budgetRef:__link_clicked__'].value='budgetRef:typeB';
     document.budgetRef.submit();
    }

    function changePage(half) {
     if(half == 1){
          changeTabArea(0);
    	  document.forms['budgetRef'].elements['budgetRef:secondHalf'].disabled = false;
	      document.forms['budgetRef'].elements['budgetRef:firstHalf'].disabled = true;
     }else if(half == 2){
          changeTabArea(1);
    	  document.forms['budgetRef'].elements['budgetRef:secondHalf'].disabled = true;
	      document.forms['budgetRef'].elements['budgetRef:firstHalf'].disabled = false;
     }
    }

    function search(){
        document.budgetRef.elements['budgetRef:__link_clicked__'].value='budgetRef:search';
     	document.budgetRef.submit();
    }

   -->
   </script>
   <form m:id="budgetRef">
    <input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
    <input type="hidden" m:id="userTypeCd" m:value="#{budgetRefCondDto.userTypeCd}"/>
    <input type="hidden" m:id="revExec" m:value="#{budgetRefCondDto.reExec}"/>

    <a m:id="typeA" m:action="#{budgetRefCsvAction.downloadCsv}"/>
    <a m:id="typeB" m:action="#{budgetRefMesaiCsvAction.downloadCsv}"/>
    <a m:id="search" m:action="#{budgetRefConditionAction.execute}"/>
     <table class="element_browser hiddenBody" style="margin-bottom:4px;">
     <tr>
      <td>
       <table class="body_table">
        <th nowrap="nowrap">会社</th>
        <td>
         <div class="hideArea">
          <select m:id="companyCd"
           m:value="#{budgetRefCondDto.companyCd}"
           m:items="#{budgetRefCondDto.listCompany}"
           m:itemValue="companyCd"
           m:itemLabel="companyName">
           <option value="00">モスフードサービス</option>
           <option value="01">トモス</option>
           <option value="02">四季菜</option>
          </select>
         </div>
        </td>
        <th nowrap="nowrap">年度</th>
        <td>
         <div class="hideArea">
          <select m:id="nendo"
           m:value="#{budgetRefCondDto.nendo}"
           m:items="#{budgetRefCondDto.listTaishoNendo}"
           m:itemValue="nendo"
           m:itemLabel="nendo">
           <option value="00">選択</option>
          </select>
         </div>
        </td>
       </table>
      </td>
      <td style="padding-left:4px;">
        <input type="button"
               m:id="exec" value="#{budgetRefCondDto.reExec == 0?'実行':'再検索'}"
               m:onclick="search();return false;"/>
      </td>
     </tr>
    </table>
    <span m:rendered="#{budgetRefResultDto.resultList != null}">
     <table class="hiddenBody" style="margin-bottom:4px;" width="960px">
      <tr>
       <td width="270px" class="width_272_s">
        <table class="body_table">
         <th nowrap="nowrap">会社</th>
         <td><span m:converter="#{characterEncodingConverter}" m:value="#{budgetRefCondDto.companyNm}"/>&nbsp;</td>
         <th nowrap="nowrap">年度</th>
         <td><span m:value="#{budgetRefCondDto.nendo}"/>&nbsp;</td>
        </table>
       </td>
       <td width="*" class="element_browser">
        <input type="button" style="margin-right:6px;"
               value="支部別ダウンロード" m:name="budgetRef"
               m:onclick="sibuDownload();" onDblClick="return false"/>
        <input type="button" value="店舗明細ダウンロード" m:name="budgetRef" m:onclick="tenpoDownload();" onDblClick="return false"/>
       </td>
      </tr>
     <tr class="element_browser">
       <td colspan="2" align="right">
        <input type="button" m:name="budgetRef:firstHalf" value="＜＜" style="margin-right:6px;"
               m:onclick="changePage('1')" m:disabled="#{budgetRefCondDto.reExec != '0'}"/>
        <input type="button" m:name="budgetRef:secondHalf" value="＞＞"
               m:onclick="changePage('2')" m:disabled="#{budgetRefCondDto.reExec != '1'}"/>
       </td>
      </tr>
     </table>
     <div class="scroll_area_0">
       <table class="hiddenBody">
		<tr><td>
       <table  class="body_table2" width="335px">
        <tr class="header_row">
         <th width="*" colspan="2">支部</th>
         <th width="120px">通期予算合計</th>
        </tr>
       </table>
       	</td>
       	<td>
      <div class="visible_tab tab_change_area_0">
       <table  class="body_table2 table_yosan">
        <tr class="header_row">
         <th class="col_yosan">4月予算</th>
         <th class="col_yosan">5月予算</th>
         <th class="col_yosan">6月予算</th>
         <th class="col_yosan">7月予算</th>
         <th class="col_yosan">8月予算</th>
         <th class="col_yosan">9月予算</th>
        </tr>
       </table>
      </div>
      </td>
      <td>
      <div class="invisible_tab tab_change_area_1">
        <table class="body_table2 table_yosan">
        <tr class="header_row">
         <th class="col_yosan">10月予算</th>
         <th class="col_yosan">11月予算</th>
         <th class="col_yosan">12月予算</th>
         <th class="col_yosan">1月予算</th>
         <th class="col_yosan">2月予算</th>
         <th class="col_yosan">3月予算</th>
        </tr>
       </table>
      </div>
     	</td>
     	</tr>
     	</table>
     </div>
     <div class="scroll_area">
      <!-- 支部 -->
      <table class="hiddenBody">
		<tr><td>
        <table  class="body_table2" width="335px" style="border-top-width:0px;">
         <span m:inject="s:forEach" m:items="#{budgetRefResultDto.resultList}" m:var="e" m:varindex="i">
           <tr class="#{e.sibuCd != '総合計'?'defaultTR':'body_sum5'} non_top_border">
            <td class="meisai" width="*" rowspan="3">
             <span m:converter="#{characterEncodingConverter}" m:value="#{e.sibuCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{e.sibuName}"/></td>
            <td class="meisai" width="60px">
             <span m:converter="#{characterEncodingConverter}" m:value="#{e.jitutenbanKbn}"/></td>
            <td width="120px" class="#{e.sibuCd != '総合計'?'mise_total':''} font_size_14">
             <span m:value="#{e.yosanJitumise}"/></td>
           </tr>
           <tr class="#{e.sibuCd != '総合計'?'defaultTR':'body_sum5'}">
            <td class="meisai">
             <span m:converter="#{characterEncodingConverter}" m:value="#{e.karitenbanKbn}"/></td>
            <td class="#{e.sibuCd != '総合計'?'mise_total':''} font_size_14">
             <span m:converter="#{characterEncodingConverter}" m:value="#{e.yosanKariMise}"/></td>
           </tr>
           <tr class="#{e.sibuCd != '総合計'?'defaultTR':'body_sum5'}">
            <td class="meisai">
             <span m:converter="#{characterEncodingConverter}" m:value="#{e.miseKbn}"/></td>
            <td class="#{e.sibuCd != '総合計'?'mise_total':''} font_size_14">
             <span m:value="#{e.yosanAll}"/></td>
           </tr>
         </span>
        </table>
		</td>
		<td>
       <!-- 上期  -->
       <div class="visible_tab tab_change_area_0">
        <table class="body_table2 table_yosan" style="border-top-width:0px;">
         <span m:inject="s:forEach" m:items="#{budgetRefResultDto.resultList}" m:var="e" m:varindex="i">
           <tr class="#{e.sibuCd != '総合計'?'defaultTR':'body_sum5'} non_top_border">
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise4}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise5}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise6}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise7}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise8}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise9}"/>
            </td>
           </tr>
           <tr class="#{e.sibuCd != '総合計'?'defaultTR':'body_sum5'}">
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanKariMise4}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanKariMise5}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanKariMise6}"/>
             </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanKariMise7}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanKariMise8}"/>
            </td>
            <td class="col_yosan font_size_14">
              <span m:value="#{e.yosanKariMise9}"/>
            </td>
           </tr>
           <tr class="#{e.sibuCd != '総合計'?'defaultTR':'body_sum5'}">
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll4}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll5}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll6}"/>
            </td>
             <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll7}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll8}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll9}"/>
            </td>
           </tr>
         </span>
        </table>
       </div>
       </td>
       <td>
       <!--  下期 -->
       <div class="invisible_tab tab_change_area_1">
        <table class="body_table2 table_yosan" style="border-top-width:0px;">
         <span m:inject="s:forEach" m:items="#{budgetRefResultDto.resultList}" m:var="e" m:varindex="i">
           <tr class="#{e.sibuCd != '総合計'?'defaultTR':'body_sum5'} non_top_border">
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise10}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise11}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise12}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise1}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise2}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanJituMise3}"/>
            </td>
           </tr>
           <tr class="#{e.sibuCd != '総合計'?'defaultTR':'body_sum5'}">
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanKariMise10}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanKariMise11}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanKariMise12}"/>
             </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanKariMise1}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanKariMise2}"/>
            </td>
            <td class="col_yosan font_size_14">
              <span m:value="#{e.yosanKariMise3}"/>
            </td>
           </tr>
           <tr class="#{e.sibuCd != '総合計'?'defaultTR':'body_sum5'}">
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll10}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll11}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll12}"/>
            </td>
             <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll1}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll2}"/>
            </td>
            <td class="col_yosan font_size_14">
             <span m:value="#{e.yosanAll3}"/>
            </td>
           </tr>
        </span>
        </table>

       </div>
     	</td>
     	</tr>
     	</table>
     </div>
    </span>
   </form>
  </span>
 </body>
</html>
