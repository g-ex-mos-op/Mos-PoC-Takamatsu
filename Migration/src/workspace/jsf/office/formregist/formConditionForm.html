<html xmlns:m="http://www.seasar.org/maya" m:action="#{formConditionAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>情報共有（フォーム登録）</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="情報共有（フォーム登録）"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject="s:insert" m:name="bodyTitleName">■情報共有（フォーム登録）</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BOF001V01"/>
<span m:inject="s:insert" m:name="body">
<script type="text/javascript">
<!--
var maxScrollHeight = 395;
function load(){
    var f = document.forms['formRegist'];
	if(f.tabrowcnt.value>1) {
		maxScrollHeight = maxScrollHeight-(20*f.tabrowcnt.value);
	}
	loadScroll("formScroll", maxScrollHeight);
    var ops = f.elements['formRegist:selectedListIndex'];
    if (ops != null) {
	    for (var i = 0; i < ops.length; i++) {
	        if (ops[i].checked) {
	            ops[i].focus();
	        }
	    }
	}
}

function downLoad(index) {
	document.formRegist.elements["formRegist:downloadIndex"].value=index;
}
function tabChange(subcateId) {
    document.formRegist.elements["selectedSubCateId"].value = subcateId;
    document.formRegist.elements['formRegist:__link_clicked__'].value='formRegist:changeTabLink';
    document.formRegist.submit();
    return true;
}
//-->
</script>
<STYLE type="text/css">
    <!--
/** 選択ラジオボタン幅 */
.col_select {
	width				: 30px;
}
/** タイトル幅 */
.col_title {
	width				: *;
}
/** 発信元幅 */
.col_puborgname {
	width				: 170px;
}
/** 掲載期間 */
.col_pubdate {
	width				: 120px;
}
.list_tab {
 width:178px;
}
.scroll_area_tab1row {
	width:100%;
	height:385px;
    overflow  : auto;

}
.scroll_area_tab2row {
	width:100%;
	height:365px;
    overflow  : auto;

}
.list_tab_area {
  width:98%;
}

 -->
</STYLE>
<STYLE type="text/css" media="print">
    <!--
.scroll_area_tab1row {
	overflow				: visible;
	height					: auto;
}
.scroll_area_tab2row {
	overflow				: visible;
	height					: auto;
}
 -->
</STYLE>

<form m:id="formRegist">
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" m:id="downloadIndex" m:value="#{formConditionDto.downloadIndex}"/>
	<input type="hidden" name="tabrowcnt" m:value="#{formConditionDto.subCateRowCnt}" m:passthrough="true"/>
	<input type="button" value="新規登録" m:action="#{formConditionAction.goInsert}"/>&nbsp;&nbsp;&nbsp;
	<span m:rendered="#{formConditionDto.listSubCategorySize != 0}">
		<input type="button" m:disabled="#{formConditionDto.listFormSize == 0}" value="編集" m:action="#{formConditionAction.goRegist}"/>&nbsp;
		<input type="button" m:disabled="#{formConditionDto.listFormSize == 0}" value="削除" m:action="#{formConditionAction.goDelete}"/>&nbsp;
		<input type="button" m:disabled="#{formConditionDto.listFormSize == 0}" value="順位設定" m:action="#{formConditionAction.registRank}"/>
	</span>
	<table class="hiddenBody" width="#{formConditionDto.listSubCategorySize > 0?'98%':''}" style="margin-top:4px;">
		<tr>
			<td width="280px">
			<table class="body_table">
				<tr>
					<th>カテゴリー選択</th>
					<td>
						<div class="hideArea">
						<select m:value="#{formConditionDto.cateId}"
								m:items="#{formConditionDto.listCategory}"
								m:itemValue="cateId"
								m:itemLabel="cateName" >
							<option value="">選択</option>
							<option value="">情報システムＧ</option>
							<option value="">人事グループ</option>
						</select>
						</div>
					</td>
				</tr>
			</table>
			</td>
			<td width="50px">
				<input type="button" value="検索" m:action="#{formConditionAction.search}" style="margin:3px;"/>
			</td>
			<td width="*" align="right">
				<div m:rendered="#{formConditionDto.listSubCategorySize > 0}">
				<input type="submit" m:disabled="#{formConditionDto.firstPage}" value="最初へ" m:action="#{formConditionAction.changePage}">
					<span m:inject="f:param" m:name="selectPageNumber" m:value="#{formConditionDto.firstPageNumber}"/>
				</input>
				<input type="submit" m:disabled="#{!formConditionDto.existPreviousPage}" value="前へ" m:action="#{formConditionAction.changePage}">
					<span m:inject="f:param" m:name="selectPageNumber" m:value="#{formConditionDto.previousPageNumber}"/>
				</input>
				<input type="submit" m:disabled="#{!formConditionDto.existNextPage}" value="次へ" m:action="#{formConditionAction.changePage}">
					<span m:inject="f:param" m:name="selectPageNumber" m:value="#{formConditionDto.nextPageNumber}"/>
				</input>
				<input type="submit" m:disabled="#{formConditionDto.lastPage}" value="最後へ" m:action="#{formConditionAction.changePage}">
					<span m:inject="f:param" m:name="selectPageNumber" m:value="#{formConditionDto.lastPageNumber}"/>
				</input>
				<span m:value="#{formConditionDto.currentPageNumber}"/> / <span m:value="#{formConditionDto.lastPageNumber}"/>&nbsp;ページ
				</td>
			</td>
		</tr>
	</table>
	<div m:rendered="#{formConditionDto.listSubCategorySize > 0}" style="margin-top:4px;">
		<a id="changeTabLink" m:action="#{formConditionAction.changeTab}">
					<span m:inject="f:param" m:name="selectedSubCateId" m:value=""/>
				</a>
	<div class="scroll_padding_head">
	<div class="scroll_hidden margin_bottom_hidden">
		<!-- サブカテゴリ タブ -->
		<table width="98%" cellpadding="0" cellspacing="0">
		    <div m:inject="s:forEach" m:items="#{formConditionDto.listTabSubCate}" m:var="listSubCate" m:varindex="i">
				<tr>
				<div m:inject="s:forEach" m:items="#{listSubCate}" m:var="e" m:varindex="i">
					<th m:rendered="#{e!=null}" style="width:19%;"
				         class="body_#{e.subCateId == formConditionDto.selectedSubCateId?'':'non_'}active_cell"
					     onClick="#{e.subCateId != formConditionDto.selectedSubCateId?'return tabChange(\'':''}#{e.subCateId != formConditionDto.selectedSubCateId?e.subCateId:''}#{e.subCateId != formConditionDto.selectedSubCateId?'\');':''}"
					     onMouseOver="this.style.cursor='pointer';"><span m:converter="#{characterEncodingConverter}" m:value="#{e.subCateName}"/></th>
					<th m:rendered="#{e==null}" width="19%">&nbsp;</th>
				</div>
				<th width="*"/>
				</tr>
			</div>
			<!--タブ帯-->
			<tr class="body_caption" style="height:5px;"><td colspan="6"/></tr>
		</table>
		<!-- フォーム一覧 -->
		<table class="body_table2" width="98%">
			<colgroup>
				<col class="col_select"/>
				<col class="col_title"/>
				<col class="col_puborgname"/>
				<col class="col_pubdate"/>
				<col class="col_pubdate"/>
			</colgroup>
			<tr class="header_row">
				<th>&nbsp;</th>
				<th>タイトル</th>
				<th>発信元</th>
				<th>掲載期間FROM</th>
				<th>掲載期間TO</th>
			</tr>
		</table>
	</div>
	</div>
	<div class="scroll_padding_data">
		<div class="scroll_standby" id="formScroll">
		<table class="body_table2" width="98%" style="border-top-width:0px">
			<colgroup>
				<col class="col_select"/>
				<col class="col_title"/>
				<col class="col_puborgname"/>
				<col class="col_pubdate"/>
				<col class="col_pubdate"/>
			</colgroup>
			<div class="search_result" m:rendered="#{formConditionDto.listFormSize != 0}">
				<div m:inject="s:selectOneRadio2" m:id="selectedListIndex" m:value="#{formConditionDto.selectedListIndex}" m:required="true">
					<div m:inject="s:forEach" m:items="#{formConditionDto.listForm}" m:var="e" m:varindex="i">
					<tr class="non_top_border" style="#{e.listAttachFileSize != 0?'line-height:24px;':''}">
						<td align="center"><input type="radio" m:value="#{i}"/></td>
						<td>
							<a m:action="#{downloadFormRegistAction.download}" title="#{e.fileName}" onClick="downLoad(#{i})">
								<span m:converter="#{characterEncodingConverter}" m:value="#{e.title}"/>
							</a>
							<div m:rendered="#{e.listAttachFileSize != 0}">
								<div class="hideArea" style="display:inline;">
								<select class="condition_field"
										m:value="#{e.selectedAttachFileIndex}"
										m:items="#{e.listAttachFile}"
										m:itemValue="value"
										m:itemLabel="label"
										m:nullLabel="">
									<option value="">添付ファイル１</option>
									<option value="">添付ファイル２</option>
									<option value="">添付ファイル３</option>
								</select>
								</div>
								<input type="button" value="ダウンロード" m:onclick="downLoad(#{i})" m:action="#{downloadFormRegistActionTenpu.download}"/>
							</div>
						</td>
						<td><span m:converter="#{characterEncodingConverter}" m:value="#{e.bumonName}"/></td>
						<td align="center"><span m:value="#{e.pubDateFrom}" m:converter="#{formRegistDateConverter}"/></td>
						<td align="center"><span m:value="#{e.pubDateTo}"  m:converter="#{formRegistDateConverter}"/></td>
					</tr>
					</div>
				</div>
			</div>
		</table>
		</div>
	</div>
	</div>

	<input type="text" m:id="dummyEnter" style="display:none"/>
	<script type="text/javascript">
	<!--
		focusElement("formRegist");
	-->
	</script>
</form>
</span>
</body>
</html>
