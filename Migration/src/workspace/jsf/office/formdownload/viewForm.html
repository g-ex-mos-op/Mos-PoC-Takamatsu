<html xmlns:m="http://www.seasar.org/maya" m:action="#{formDownloadAction.initialize}" m:extends="/jsf/layout/layout.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>情報共有（フォーム）</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="情報共有（フォーム）"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject="s:insert" m:name="naviarea" m:src="/jsf/office/formdownload/cateNavi.html"/>
<span m:converter="#{characterEncodingConverter}" m:inject="s:insert" m:name="bodyTitleName">■情報共有（フォーム）<span m:converter="#{characterEncodingConverter}" m:value="#{formDownloadDto.viewCateName}"></span></span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BOF002V01"/>
<span m:inject="s:insert" m:name="body">
<script type="text/javascript">
<!--
function load(){
}
function setViewIndex(index) {
	document.formDownload.elements["formDownload:indexEntityViewDetail"].value=index;
}
function downloadMode(index) {
	document.formDownload.elements["formDownload:downloadMode"].value=index;
}
function downloadFile(index) {
	downloadMode(2);
	document.formDownload.elements["formDownload:downloadFileIndex"].value=index;
}
//-->
</script>
<STYLE type="text/css" media="screen">
<!--
.operation_panel {
    position            : absolute;
}

.list_tab_pane {
    width               : 97%;
}
.list_tab {
    width               : 24.5%;
}
/** カテゴリー幅 */
.col_cate {
	width				: 110px;
}
/** サブカテゴリー幅 */
.col_subcate {
	width				: 110px;
}
/** サブカテゴリー幅 */
.col_title {
	width				: *;
}
/** 関連ファイル有無幅 */
.col_attachfile {
	width				: 100px;
	text-align			: center;
}
/** 発信元幅 */
.col_puborgname {
	width				: 170px;
}
table.header_table{
  width				: 97%;
}
table.body_table2{
  width				: 97%;
}

.scroll_area {
	height				: 182px;
	width				: 100%;
}
div.scroll_detaile_area {
	overflow				: auto;
	height				: 135px;
	width				: 100%;
	margin-top:-2px;
}
@media print {
.scroll_area {
}
div.scroll_detaile_area {
	height					: auto;
	overflow				: visible;
}
 -->
</STYLE>

<form m:id="formDownload">
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" m:id="indexEntityViewDetail" m:value="#{formDownloadDto.indexEntityViewDetail}"/>
	<input type="hidden" m:id="downloadMode" m:value="#{formDownloadDto.downloadMode}"/>
	<input type="hidden" m:id="downloadFileIndex" m:value="#{formDownloadDto.downloadFileIndex}"/>

   <!-- 検索条件 -->
<table width="100%" cellpadding="0" cellspacing="0">
	<tr valign="top">
		<td>
			<div class="search_condition">

			   <table class="body_table">
			       <tr>
			           <th>タイトル</th>
			           <td>
			               <input class="imeon" m:id="titleName" type="text" m:value="#{formDownloadDto.condTitle}" m:maxlength="80" m:size="52"/>
			               <input type="submit" value="検索" class="operation_button" m:action="#{formDownloadAction.searchByTitle}"/>
			           </td>
			       </tr>
			   </table>
			</div>
		</td>
        <div class="search_result" m:rendered="#{formDownloadDto.viewListFlg}">
		<td align="right" valign="bottom">
			       <input type="submit" value="最初へ" m:action="#{formDownloadAction.changePage}" m:disabled="#{formDownloadDto.firstPage}">
			           <span m:inject="f:param" m:name="selectPageNumber" m:value="#{formDownloadDto.firstPageNumber}"/>
			       </input>
			       <input type="submit" value="前へ" m:action="#{formDownloadAction.changePage}" m:disabled="#{!formDownloadDto.existPreviousPage}">
			           <span m:inject="f:param" m:name="selectPageNumber" m:value="#{formDownloadDto.previousPageNumber}"/>
			       </input>
			       <input type="submit" value="次へ" m:action="#{formDownloadAction.changePage}" m:disabled="#{!formDownloadDto.existNextPage}">
			           <span m:inject="f:param" m:name="selectPageNumber" m:value="#{formDownloadDto.nextPageNumber}"/>
			       </input>
			       <input type="submit" value="最後へ" m:action="#{formDownloadAction.changePage}" m:disabled="#{formDownloadDto.lastPage}">
			           <span m:inject="f:param" m:name="selectPageNumber" m:value="#{formDownloadDto.lastPageNumber}"/>
			       </input>
			       <span class="operation_panel_page_number"><span m:value="#{formDownloadDto.currentPageNumber}"/>／<span m:value="#{formDownloadDto.lastPageNumber}"/>ページ</span>
		</td>
		</div>
	</tr>
</table>

   <div m:rendered="#{formDownloadDto.viewListFlg && formDownloadDto.searchMode == 2}" style="margin-top:10px;">
<table class="header_table" cellspacing="0">
    <tr>
        <td class="body_caption" colspan=2>検索結果一覧</td>
    </tr>
</table>
   </div>

   <!-- サブカテゴリ タブ -->
   <div m:rendered="#{formDownloadDto.viewListFlg && formDownloadDto.searchMode == 1}">
   	   <div class="list_tab_pane" style="margin-top:7px;">
		   <ul class="list_tab_area">
			   <div m:inject="s:forEach" m:items="#{formDownloadDto.listSubCate}" m:var="e" m:varindex="i">
			       <li class="list_tab">
			           <div m:rendered="#{e.subCateId == formDownloadDto.condSubCateId}" class="selected_tab">
			                   <span m:converter="#{characterEncodingConverter}" m:value="#{e.subCateName}"/>
			           </div>
			           <div m:rendered="#{e.subCateId != formDownloadDto.condSubCateId}">
			               <a m:action="#{formDownloadAction.changeTab}"  class="list_tab">
			                   <span m:converter="#{characterEncodingConverter}" m:value="#{e.subCateName}"/>
			                   <span m:inject="f:param" m:name="condSubCateId" m:value="#{e.subCateId}"/>
			               </a>
			           </div>
			       </li>
			   </div>
		   </ul>
		   <ul class="list_tab_area">
			   <table width="100%" cellspacing="0" cellpadding="0">
			       <tr style="height:5px;"><td class="body_caption"></td></tr>
			   </table>
		   </ul>
	   </div>
   </div>
<div class="search_result" m:rendered="#{formDownloadDto.viewListFlg}">

   <!-- フォーム一覧 -->

   <!--タイトル検索 -->
   <div m:rendered="#{formDownloadDto.searchMode == 2}">
   <table class="body_table2">
	<colgroup>
		<col class="col_cate"/>
		<col class="col_subcate"/>
		<col class="col_title"/>
		<col class="col_attachfile"/>
		<col class="col_puborgname"/>
	</colgroup>
       <tr class="header_row">
				<th>カテゴリー</th>
				<th>サブカテゴリー</th>
				<th>登録タイトル一覧</th>
				<th>関連ファイル</th>
				<th>発信元</th>
       </tr>
   </table>
       <div class="scroll_area">
           <table class="body_table2">
			<colgroup>
				<col class="col_cate"/>
				<col class="col_subcate"/>
				<col class="col_title"/>
				<col class="col_attachfile"/>
				<col class="col_puborgname"/>
			</colgroup>
               <div m:inject="s:forEach" m:items="#{formDownloadDto.listForm}" m:var="e" m:varindex="i">
                   <tr>
                       <td>
                           <span m:converter="#{characterEncodingConverter}" m:value="#{e.cateName}"/>
                       </td>
                       <td>
                           <span m:converter="#{characterEncodingConverter}" m:value="#{e.subCateName}"/>
                       </td>
                       <td>
                           <a m:action="#{formDownloadAction.viewDetail}"  m:onClick="setViewIndex(#{i})">
                               <span m:converter="#{characterEncodingConverter}" m:value="#{e.title}"/>
                           </a>
                       </td>
                       <td>
                    	<span m:value="#{(e.listDownloadFileSize != 0) == true ? '有' : '無'}"/>
                       </td>
                       <td>
                       		<span m:converter="#{characterEncodingConverter}" m:value="#{e.pubOrgName}"/>
                       </td>
                   </tr>
               </div>
           </table>
       </div>
   </div>



   <!--カテゴリー検索 -->
   <div m:rendered="#{formDownloadDto.searchMode == 1}">
   <table class="body_table2">
	<colgroup>
		<col class="col_title"/>
		<col class="col_attachfile"/>
		<col class="col_puborgname"/>
	</colgroup>
       <tr class="header_row">
	            <th>登録タイトル一覧</th>
	            <th>関連ファイル</th>
	            <th>発信元</th>
       </tr>
   </table>
       <div class="scroll_area">
           <table class="body_table2">
			<colgroup>
				<col class="col_title"/>
				<col class="col_attachfile"/>
				<col class="col_puborgname"/>
			</colgroup>
               <div m:inject="s:forEach" m:items="#{formDownloadDto.listForm}" m:var="e" m:varindex="i">
                   <tr>
                       <td>
                           <a m:action="#{formDownloadAction.viewDetail}"  m:onClick="setViewIndex(#{i})">
                               <span m:converter="#{characterEncodingConverter}" m:value="#{e.title}"/>
                           </a>
                       </td>
                       <td>
                    	<span m:value="#{(e.listDownloadFileSize != 0) == true ? '有' : '無'}"/>
                       </td>
                       <td><span m:converter="#{characterEncodingConverter}" m:value="#{e.pubOrgName}"/></td>

                   </tr>
               </div>
           </table>
       </div>
   </div>

   <div m:rendered="#{formDownloadDto.entityViewDetail != null}" style="margin-top:7px;">
	   <table class="header_table" cellspacing="0">
	       <tr>
	           <td class="body_caption">フォーム内容</td>
	       </tr>
	   </table>
	   <div class="scroll_detaile_area">
	   <table class="body_table2">
	       <tr>
	           <th width="155px">選択フォームタイトル</th>
	           <td>
	               <a m:action="#{formDownloadFileDownlodAction.download}" title="#{formDownloadDto.entityViewDetail.fileName}" m:onclick="downloadMode(1)">
	                   <span m:converter="#{characterEncodingConverter}" m:value="#{formDownloadDto.entityViewDetail.title}"/>
	               </a>
	               &nbsp;

	           </td>
	       </tr>
	       <tr>
	           <th>公開対象</th>
	           <td>
                   <span m:converter="#{characterEncodingConverter}" m:value="#{formDownloadDto.viewShozoku}"/>
	           </td>
	       </tr>
	       <tr>
	           <th>関連ファイル</th>
	           <td>
                   <div m:rendered="#{formDownloadDto.entityViewDetail.listDownloadFileSize != 0}">
					<table cellpadding="0" cellspacing="0">
						<tr>
							<td>
                       <div class="hideArea">
                           <select class="condition_field"
                                   m:value="#{formDownloadDto.viewSelectAttachFileIndex}"
                                   m:items="#{formDownloadDto.entityViewDetail.listDownloadFile}"
                                   m:itemValue="value"
                                   m:itemLabel="label"
                                   >
                           </select>
                       </div>
                       </td>
                       <td>
                       <input type="button" value="ダウンロード" class="operation_button" m:action="#{viewFormDownloadFileDownlodAction.download}" m:onclick="downloadMode(3)"/>
							</td>
						</tr>
					</table>
                   </div>
	           </td>
	       </tr>
	       <tr>
	           <th>発信元</th>
	           <td><span m:converter="#{characterEncodingConverter}" m:value="#{formDownloadDto.entityViewDetail.pubOrgName}"/></td>
	       </tr>
	       <tr>
	           <th>掲載期間</th>
	           <td><span m:value="#{formDownloadDto.entityViewDetail.pubDateFrom}" m:converter="#{formDownloadDateConverter}"/>〜
	               <span m:value="#{formDownloadDto.entityViewDetail.pubDateTo}" m:converter="#{formDownloadDateConverter}"/>
	           </td>
	       </tr>
	       <tr>
	           <th>説明</th>
	           <td><span m:value="#{formDownloadDto.entityViewDetail.discription}" m:converter="#{formDownloadChangeLineConverter}" m:escape="false" /></td>
	       </tr>
	   </table>
	   </div>
   </div>
</div>


<input type="text" m:id="dummyEnter" style="display:none"/>
<script type="text/javascript">
<!--
	focusElement("formDownload");
-->
</script>
</form>
</span>
</body>
</html>
