<html xmlns:m="http://www.seasar.org/maya" m:action="#{ownerInfoReferenceAction.initialize}"
      m:extends="/jsf/layout/layout.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>オーナー照会</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="オーナー照会"/>
<span m:inject="s:insert" m:name="bodyTitleName">■オーナー照会</span>
<span m:inject="f:param" m:name="onLoadName" m:value="bodyLoad();"/>
<span m:inject="s:insert" m:name="naviarea" m:src="/jsf/storeinfo/onerref/ownerInfoReferenceResultNavi.html"/>
<span m:inject="f:param" m:name="viewIdValue" m:value="BSI002V02"/>
<span m:inject="s:insert" m:name="body">
<STYLE type="text/css">
<!--
.link_feild {
	text-decoration: underline;
}
.scroll_area1 {
    width:    780px;
	height:	  232px;
	overflow: auto;
}
.scroll_area3 {
    width:    780px;
	height:	  332px;
	overflow: auto;
}
@media print {
	.scroll_area1 {
		overflow	: visible;
		height		: auto;
	}
	.scroll_area3 {
		overflow	: visible;
		height		: auto;
	}
}
-->
</STYLE>
<SCRIPT LANGUAGE="javascript">
<!--
function bodyLoad(){
}

function initOnerList(){
    //オーナー選択
	document.forms['ownerInfoReferenceResult'].elements['ownerInfoReferenceResult:__link_clicked__'].value='ownerInfoReferenceResult:loadOnerList';
	document.forms['ownerInfoReferenceResult'].submit();
	return false;
}
function callMiseInfo(miseCd) {
	document.ownerInfoReferenceResult.elements['ownerInfoReferenceResult:miseInfoMiseCd'].value=miseCd;
	document.ownerInfoReferenceResult.elements['ownerInfoReferenceResult:isUseCommonDto'].value="1";
	document.forms['ownerInfoReferenceResult'].elements['ownerInfoReferenceResult:__link_clicked__'].value='ownerInfoReferenceResult:callMiseInfo';
	document.ownerInfoReferenceResult.target="_blank";
	document.forms['ownerInfoReferenceResult'].submit();
	document.ownerInfoReferenceResult.elements['ownerInfoReferenceResult:isUseCommonDto'].value="";
	return false;
}
function search(){
	document.forms['ownerInfoReferenceResult'].elements['ownerInfoReferenceResult:__link_clicked__'].value='ownerInfoReferenceResult:search';
	document.ownerInfoReferenceResult.target="_self";
	document.forms['ownerInfoReferenceResult'].submit();
}
//-->
</SCRIPT>
<form m:id="ownerInfoReferenceResult"  onKeyDown="return setDefaultSubmitButton('ownerInfoReferenceResult','execution');">
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="miseInfoMiseCd" m:value="#{ownerInfoReferenceAction.miseInfoMiseCd}"/>
	<input type="hidden" m:id="isUseCommonDto" m:value=""/>
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
	<a id="callMiseInfo" m:action="#{ownerInfoReferenceAction.callMiseInfo}" target="_blank"/>
	<a m:id="search" m:action="#{ownerInfoReferenceAction.search}" target="_self"/>
	<table class="hiddenBody element_browser" style="margin-bottom: 4px;">
		<tr><td>
	<!--ユーザタイプが「本部」の場合 ※テキスト-->
	<table class="body_table">
	  <tr m:rendered="#{ownerReferenceDto.userTypeCd == '01'}" >
	    <th>会社</th>
	    <td>
	      <div class="hideArea">
	        <select m:id="companyCd"
	                m:value="#{ownerReferenceDto.companyCd}"
	                m:items="#{ownerReferenceDto.companyList}"
	                m:itemValue="companyCd"
	                m:itemLabel="companyName">
	            <option value="">選択</option>
	            <option value="">MOS</option>
	        </select>
	      </div>
	    </td>
	    <th style="border-right-width:0px;">オーナーコード</th>
	    <th style="border-left-width:0px;padding-left:3px;"><input type="submit" value="検索" m:action="#{ownerInfoReferenceAction.selectOnerSearch}" m:size="10">
	        <span m:converter="#{characterEncodingConverter}" m:inject="f:param" m:name="onerSearchNavigationCase" m:value="#{viewIdValue}" />
		  </input>
	    </th>
	    <td width="*">
	      <input class="imenotuse" type="text" m:id="onerCd" m:value="#{ownerReferenceDto.onerCd}" m:maxlength="5" m:size="10"/>
	    </td>
	  </tr>
		<!--ユーザタイプが「オーナー」の場合 ※プルダウン-->
		<tr m:rendered="#{ownerReferenceDto.userTypeCd == '02'}">
		    <th>会社</th>
		    <td>
	            <div class="hideArea">
	            <select style="width:140px;"
	                    m:value="#{ownerReferenceDto.companyCd}"
	                    m:items="#{ownerReferenceDto.companyList}"
	                    m:itemValue="companyCd"
	                    m:itemLabel="companyName"
	                    m:onChange="initOnerList()">
	                <option value="">選択</option>
	                <option value="">MOS</option>
	            </select>
	            </div>
	            <a id="loadOnerList" m:action="#{ownerInfoReferenceAction.loadOnerList}"/>
	        </td>
	        <th width="130">オーナーコード</th>
	        <td>
	            <div class="hideArea">
	            <select style="width:330px;" class="condition_field"
	                    m:id="onerCd2"
	                    m:value="#{ownerReferenceDto.onerCd}"
	                    m:items="#{ownerReferenceDto.listPullOner}"
	                    m:itemValue="onerCd"
	                    m:itemLabel="onerNameShow">
	                <option value="">（株）グリフィン</option>
	                <option value="">（有）タム</option>
	                <option value="">（株）ドリームファクトリー</option>
	            </select>
	            </div>
	        </td>
	      </tr>
    </table>
    </td>
    <td style="padding-left:3px;">
		<!--実行ボタン-->
		<input m:id="execution" type="button" value="実行"
                     m:onclick="search();return false;"/>
    </td>
	</tr>
</table>
	<script type="text/javascript">
	<!--
	    focusElement("ownerInfoReferenceResult");
	-->
	</script>
	<!-- 表示店舗コードと名称 -->
	<table class="body_table" style="clear: both; margin-top: 5px;">
	    <tr>
	        <th>会社</th>
	        <td>
	            <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.searchedCondCompanyName}"/>&nbsp;
	        </td>
	        <th>オーナーコード</th>
	        <td width="*">
	        <span m:value="#{ownerReferenceDto.mstOner.onerCd}"/>&nbsp;
	        <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.onerNameKj}"/>
	        </td>
	    </tr>
	</table>
	<!--タブ-->
	<table cellspacing="0" cellpadding="0" style="width:760px; margin-top: 5px;" class="element_browser">
	  <tr>
	    <td class="tab_change_area_0 body_active_cell" width="145px"
		        onClick="changeTabArea('0')"
		        onMouseOver="this.style.cursor='pointer';">基本情報</td>
	    <td class="tab_change_area_1 body_non_active_cell" width="145px"
		        onClick="changeTabArea('1')"
		        onMouseOver="this.style.cursor='pointer';">契約情報</td>
	    <td class="tab_change_area_2 body_non_active_cell" width="145px"
		        onClick="changeTabArea('2')"
		        onMouseOver="this.style.cursor='pointer';">業務情報</td>
	    <td class="tab_change_area_3 body_non_active_cell" width="145px"
		        onClick="changeTabArea('3')"
		        onMouseOver="this.style.cursor='pointer';">共栄会情報</td>
	    <td width="*">&nbsp;</td>
	  </tr>
	  <tr  class="body_caption" style="height:5px"><td colspan="5"/></tr>
	</table>
<!--基本情報-->
<div class="tab_change_area_0 visible_tab">
<div class="element_print" style="margin-top:10px;">【基本情報】</div>
<table style="border-top-width : 0px;" class="body_table2" width="760px">
  <tr>
    <th style="text-align : left" colspan="4" class="body_header4">オーナー情報</th>
  </tr>
  <tr>
    <th width="140">オーナーコード</th>
    <td width="*">
      <span m:value="#{ownerReferenceDto.mstOner.onerCd}"/>
    </td>
    <th width="100">電話番号１</th>
    <td width="230">
      <span m:value="#{ownerReferenceDto.mstOner.onerTel}"/>
    </td>
  </tr>
  <tr>
    <th>オーナー名称</th>
    <td>
      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.onerNameKj}"/>
    </td>
    <th>電話番号２</th>
    <td>
      <span m:value="#{ownerReferenceDto.mstOner.onerTel2}"/>
    </td>
  </tr>
  <tr>
    <th>オーナー名称カナ</th>
    <td>
      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.onerNameKna}"/>
    </td>
    <th>FAX</th>
    <td>
      <span m:value="#{ownerReferenceDto.mstOner.onerFax}"/>
    </td>
  </tr>
  <tr>
    <th>性別</th>
    <td>
      <span m:rendered="#{ownerReferenceDto.mstOner.sex == '1'}">男</span>
      <span m:rendered="#{ownerReferenceDto.mstOner.sex == '2'}">女</span>
    </td>
    <th>生年月日</th>
    <td>
      <span m:value="#{ownerReferenceDto.mstOner.birthOner}" m:converter="#{dateConverter}"/>
    </td>
  </tr>
  <tr>
    <th>郵便番号</th>
    <td>
      <span m:value="#{ownerReferenceDto.mstOner.onerPostNo}" m:converter="#{maskConverterPostCd}"/>
    </td>
    <th>一号店</th>
    <td>
      <span m:rendered="#{ownerReferenceDto.existsFirstMise==true}">
      <a href="#" onClick="callMiseInfo('#{ownerReferenceDto.mstOner.miseFirst}');">
        <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.miseFirst}"/>&nbsp;
        <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.miseFirstName}"/>
      </a>
      </span>
    </td>
  </tr>
  <tr>
    <th>住所</th>
    <td colspan="3">
      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.onerAdrs1}"/>&nbsp;
      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.onerAdrs2}"/>&nbsp;
      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.onerAdrs3}"/>
    </td>
  </tr>
  <tr class="header_row">
    <th width="140">代表者名</th>
    <th colspan="3">代表者変更理由</th>
  </tr>
</table>
<div style="width:790px; height:213px;"class="scroll_area">
  <table style="border-top-width : 0px;" class="body_table2" width="760">
    <div m:inject="s:forEach" m:items="#{ownerReferenceDto.trnOnerDaiList}" m:var="e" m:varindex="i">
      <tr class="non_top_border">
        <td width="140" style="#{i==0?'border-top-width : 0px;':''}"><span m:converter="#{characterEncodingConverter}" m:value="#{e.onerSubKj}"/></td>
        <td width="*" colspan="3" style="#{i==0?'border-top-width : 0px;':''}"><span m:converter="#{characterEncodingConverter}" m:value="#{e.daihyoChgReason}"/></td>
      </tr>
    </div>
  </table>
</div>
</div>
<!--契約情報-->
<div class="tab_change_area_1 invisible_tab">
	<div class="element_print" style="margin-top:10px;">【契約情報】</div>
	<table class="body_table2" style="border-top-width : 0px;border-bottom-width : 0px;margin-bottom:-1px;" width="760">
	  <tr>
	    <th style="text-align : left" colspan="4" class="body_header4">
	      契約情報
	    </th>
	  </tr>
	  <tr>
	    <th width="140">契約開始日</th>
	    <td width="240">
	      <span m:value="#{ownerReferenceDto.mstOner.keiyakuSta}" m:converter="#{dateConverter}"/>
	    </td>
	    <th width="140">契約終了日</th>
	    <td width="240">
	      <span m:value="#{ownerReferenceDto.mstOner.keiyakuEnd}" m:converter="#{dateConverter}"/>
	    </td>
	  </tr>
	  <tr>
	    <th>オーナー区分</th>
	    <td>
	      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.onerKbn}"/>
	    </td>
	    <th>決算月</th>
	    <td>
	      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.kessanM}"/>
	    </td>
	  </tr>
	  <tr>
	    <th>運営</th>
	    <td colspan="3">
	      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.unei}"/>
	    </td>
	  </tr>
	  <tr>
	    <th>他事業</th>
	    <td colspan="3">
	      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.otherBusiness}"/>
	    </td>
	  </tr>
	</table>

	<table style="border-top-width : 0px;" class="body_table2" width="760">
	  <tr>
	    <th colspan="4" class="body_header4">
	          <span style="float:left">保有店舗情報</span>
	          <span style="float:right">
	              合計：<span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOnerHoyuMiseListSize}"/>件
	          </span>
	    </th>
	  </tr>
	  <tr class="header_row">
	    <th width="110px">店コード</th>
	    <th width="*">店名称</th>
	    <th width="110px">オープン日</th>
	    <th width="110px">クローズ日</th>
	  </tr>
	</table>
	<div class="scroll_area1">
	  <table style="border-top-width : 0px;" class="body_table2" width="760">
	    <div m:inject="s:forEach" m:items="#{ownerReferenceDto.mstOnerHoyuMiseList}" m:var="e" m:varindex="i">
	      <tr class="non_top_border">
	        <td width="110px">
	            <span m:value="#{e.miseCd}"/>
	        </td>
	        <td width="*" class="link_feild">
	          <font onClick="callMiseInfo('#{e.miseCd}');" onDblClick="return false;" onMouseOver="this.style.cursor='pointer';">
	          <span m:converter="#{characterEncodingConverter}" m:value="#{e.miseNameKj}"/>
	          </font>
	        </td>
	        <td width="110px"><span m:value="#{e.openDt}"  m:converter="#{dateConverter}"/></td>
	        <td width="110px"><span m:value="#{e.closeDt}" m:converter="#{dateConverter}"/></td>
	      </tr>
	    </div>
	  </table>
	</div>
</div>
<div class="tab_change_area_2 invisible_tab">
	<div class="element_print" style="margin-top:10px;">【業務情報】</div>
	<table class="body_table2" style="border-top-width : 0px;border-bottom-width : 0px; margin-bottom:-1px;" width="760">
	  <tr>
	    <th style="text-align : left" colspan="4" class="body_header4">
	      オーナー業務</th>
	  </tr>
	  <tr>
	    <th width="160px">資本金</th>
	    <td width="240" align="right">
	      <span m:value="#{ownerReferenceDto.mstOner.capital}" m:converter="#{numericConverterKingaku}"/>
	    </td>
	    <th width="160px">モス事業の売上比率</th>
	    <td width="*" align="right">
	      <span m:value="#{ownerReferenceDto.mstOner.mosRate}"/>
	    </td>
	  </tr>
	  <tr>
	    <th>業務内容</th>
	    <td colspan="3">
	      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.gyomu}"/>
	    </td>
	  </tr>
	</table>
	<table class="body_table2" width="760" style="border-top-width : 0px;">
	  <tr>
	    <th style="text-align : left" colspan="4" class="body_header4">
	      モス担当者情報
	    </th>
	  </tr>
	  <tr>
	    <th width="160px">氏名</th>
	    <td width="240">
	      <span m:converter="#{characterEncodingConverter}" m:value="#{ownerReferenceDto.mstOner.tantoName}"/>
	    </td>
	    <th width="160px">自宅電話番号</th>
	    <td width="*">
	      <span m:value="#{ownerReferenceDto.mstOner.tantoTel}"/>
	    </td>
	  </tr>
	</table>
</div>
<div class="tab_change_area_3 invisible_tab">
	<div class="element_print" style="margin-top:10px;">【共栄会情報】</div>
<table style="border-top-width : 0px;" class="body_table2" width="760">
  <tr>
    <th style="text-align : left" colspan="4" class="body_header4">
      共栄会情報 </th>
  </tr>
  <tr class="header_row">
    <th width="160px">期数</th>
    <th width="*">役職名</th>
    <th width="100px">期間開始</th>
    <th width="100px">期間終了</th>
  </tr>
</table>
<div class="scroll_area3">
  <table style="border-top-width : 0px;" class="body_table2" width="760">
    <div m:inject="s:forEach" m:items="#{ownerReferenceDto.mstKyoeiList}" m:var="e" m:varindex="i">
      <tr class="non_top_border">
        <td width="160px"><span m:converter="#{characterEncodingConverter}" m:value="#{e.kisuu}"/></td>
        <td width="*"><span m:converter="#{characterEncodingConverter}" m:value="#{e.postName}"/></td>
        <td width="100px"><span m:value="#{e.kikanFrom}"  m:converter="#{dateConverter}"/></td>
        <td width="100px"><span m:value="#{e.kikanTo}" m:converter="#{dateConverter}"/></td>
      </tr>
    </div>
  </table>
</div>
</div>
<input type="text" m:id="dummyEnter" style="display:none"/>
</form>
</span>
</body>
</html>
