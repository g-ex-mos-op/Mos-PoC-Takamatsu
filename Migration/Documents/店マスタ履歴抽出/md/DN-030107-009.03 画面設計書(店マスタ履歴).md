# DN-030107-009.03 画面設計書(店マスタ履歴)

## 概要

本文書は画面設計書であり、店マスタ履歴抽出機能に関する画面設計の内容を記載しています。本文書には6個のシートが含まれています。

## 文書情報

| 項目 | 内容 |
|------|------|
| 管理番号 | DN-030107-009.03 |
| 分類 | 画面設計書 |
| 作成者 | 作成者：ISID-AO 山内<br>作成日：2015/12/28 |
| 作成日 | 作成者：ISID-AO 山内<br>作成日：2015/12/28 |
| 更新者 | 作成者：ISID-AO 山内<br>作成日：2015/12/28 |
| 更新日 | 作成者：ISID-AO 山内<br>作成日：2015/12/28 |

## 更新履歴

|  | 承認履歴 |  |  |  |  |  |  |  |
|------|------|------|------|------|------|------|------|------|
|  | バージョン | 変更管理NO | 作成 | 作成 | レビュー | レビュー | 承認 | 承認 |
|  | バージョン | 変更管理NO | 担当者 | 日付 | 担当者 | 日付 | 担当者 | 日付 |
|  | 1 | システム更改に伴う追加改修 | 山内 | 42366 | 稲田 | 42380 | 田村 | 42384 |
|  | 2 | システム更改に伴う追加改修 | 山内 | 42398 | 稲田 | 42398 | 田村 | 42398 |
|  | 3 | システム更改に伴う追加改修 | 李賀 | 42405 | 藤村 | 42417 | 田村 | 42417 |
|  | 変更履歴 |  |  |  |  |  |  |  |
|  | バージョン | 変更内容 | 変更内容 | 変更内容 | 変更内容 | 変更内容 | 変更内容 | 変更内容 |
|  | 1 | 新規作成 | 新規作成 | 新規作成 | 新規作成 | 新規作成 | 新規作成 | 新規作成 |
|  | 2 | 要求番号ＦRQ0601を新規追加<br>仕様番号SP010502のExcelファイルの日付フォーマットをyyyy/mm/ddからyyyy/m/dに修正 | 要求番号ＦRQ0601を新規追加<br>仕様番号SP010502のExcelファイルの日付フォーマットをyyyy/mm/ddからyyyy/m/dに修正 | 要求番号ＦRQ0601を新規追加<br>仕様番号SP010502のExcelファイルの日付フォーマットをyyyy/mm/ddからyyyy/m/dに修正 | 要求番号ＦRQ0601を新規追加<br>仕様番号SP010502のExcelファイルの日付フォーマットをyyyy/mm/ddからyyyy/m/dに修正 | 要求番号ＦRQ0601を新規追加<br>仕様番号SP010502のExcelファイルの日付フォーマットをyyyy/mm/ddからyyyy/m/dに修正 | 要求番号ＦRQ0601を新規追加<br>仕様番号SP010502のExcelファイルの日付フォーマットをyyyy/mm/ddからyyyy/m/dに修正 | 要求番号ＦRQ0601を新規追加<br>仕様番号SP010502のExcelファイルの日付フォーマットをyyyy/mm/ddからyyyy/m/dに修正 |
|  | 3 | ■「画面構成」シート<br>機能概要、構成概要を追記<br>■「コンポーネント一覧」シート<br>画面項目、及び項目説明を追記<br>■「アクション」シート<br>業務アクション内容を追記 | ■「画面構成」シート<br>機能概要、構成概要を追記<br>■「コンポーネント一覧」シート<br>画面項目、及び項目説明を追記<br>■「アクション」シート<br>業務アクション内容を追記 | ■「画面構成」シート<br>機能概要、構成概要を追記<br>■「コンポーネント一覧」シート<br>画面項目、及び項目説明を追記<br>■「アクション」シート<br>業務アクション内容を追記 | ■「画面構成」シート<br>機能概要、構成概要を追記<br>■「コンポーネント一覧」シート<br>画面項目、及び項目説明を追記<br>■「アクション」シート<br>業務アクション内容を追記 | ■「画面構成」シート<br>機能概要、構成概要を追記<br>■「コンポーネント一覧」シート<br>画面項目、及び項目説明を追記<br>■「アクション」シート<br>業務アクション内容を追記 | ■「画面構成」シート<br>機能概要、構成概要を追記<br>■「コンポーネント一覧」シート<br>画面項目、及び項目説明を追記<br>■「アクション」シート<br>業務アクション内容を追記 | ■「画面構成」シート<br>機能概要、構成概要を追記<br>■「コンポーネント一覧」シート<br>画面項目、及び項目説明を追記<br>■「アクション」シート<br>業務アクション内容を追記 |

---

---

## 要求仕様

| [BIRD]　画面設計書(要求仕様書) |  |  |  |  |  |  |  |  | 承認者：<br>承認日： |  |  | 結果レビュー者：<br>結果承認者　　：<br>結果承認日　　： |
|------|------|------|------|------|------|------|------|------|------|------|------|------|

| 画面名 |  | 店マスタ履歴 |  |  |  |  | フィーチャ |  | テスト担当： |  |  |  |
|------|------|------|------|------|------|------|------|------|------|------|------|------|
| NO | カテゴリ | 要求番号 | 仕様番号 | 優先 | 分類 | 内容 | 追加変更日 | 備考 | 実施日 | 結果 | 課題管理表NO | 備考 |
| 1 | 前提条件 | ＦRQ0101 |  | A | 要求 | 入力された店コードの店舗履歴情報をCSVファイル・Excelファイルでダウンロードできるようにしたい。 |  |  |  |  |  |  |
|  |  | ＦRQ0101 |  |  | 理由 |  |  |  |  |  |  |  |
|  |  | ＦRQ0101 |  |  | 説明 |  |  |  |  |  |  |  |
|  |  | ＦRQ0101 | SP010101 |  | 仕様 | 本部ユーザーのみ利用としてオーナーユーザー・店舗ユーザーは利用不可とする。 |  |  |  |  |  |  |
|  |  | ＦRQ0101 | SP010102 |  | 仕様 | 店舗情報はCSVファイル（CSV形式）とExcelファイル（xlxs形式）でダウンロード可能とする |  |  |  |  |  |  |
|  |  | ＦRQ0101 | SP010103 | A | 仕様 |  |  |  |  |  |  |  |
|  |  | ＦRQ0102 |  | A | 要求 | バッチ処理にて更新中のテーブルに対して、画面がアクセスできないようにする |  |  |  |  |  |  |
|  |  | ＦRQ0102 |  |  | 理由 | バッチ処理と画面処理がバッティングすることによるデッドロックや処理エラーを減らすため |  |  |  |  |  |  |
|  |  | ＦRQ0102 |  |  | 説明 |  |  |  |  |  |  |  |
|  |  | ＦRQ0102 | SP010201 | A | 仕様 | 画面処理は【オンライン使用テーブル管理】に登録されているロジックが使用する対象（テーブル）が、<br>バッチで利用されていないことを確認した後、画面処理を実行する<br>（バッチは処理前にテーブルステータス管理にある使用するテーブルのステータスを1：処理中、または9：異常にする） |  |  |  |  |  |  |
| 2 | 条件部 | ＦRQ0201 |  | A | 要求 | 条件部は常に画面上に表示させておく |  |  |  |  |  |  |
|  |  | ＦRQ0201 |  |  | 理由 | 閲覧操作の向上の為 |  |  |  |  |  |  |
|  |  | ＦRQ0201 |  |  | 説明 |  |  |  |  |  |  |  |
|  |  | ＦRQ0201 | SP010201 | A | 仕様 | 条件部には以下の項目を設ける<br>①ダウンロード対象<br>②店コード |  |  |  |  |  |  |
|  |  | ＦRQ0201 | SP010202 | A | 仕様 | ①ダウンロード対象欄には固定文字で「店マスタ履歴」と表示する。 |  |  |  |  |  |  |
|  |  | ＦRQ0201 | SP010203 | A | 仕様 | ②店コード欄には店コード検索ボタンと店コード入力欄を作成する。 |  |  |  |  |  |  |
|  |  | ＦRQ0201 | SP010204 | A | 仕様 | ②店コード欄の検索ボタンがクリックされた場合は店選択画面に遷移する。<br>※e-mossles共通仕様 |  |  |  |  |  |  |
|  |  | ＦRQ0201 | SP010205 | A | 仕様 | ②店コード欄に入力された店コードが5桁未満の場合は前0埋めで処理を実行する。<br>※店コード欄に「2001」と入力された場合は「02001」として処理を実行する。 |  |  |  |  |  |  |
| 3 | 出力部 | ＦRQ0301 |  | A | 要求 | ダウンロードファイルは「CSV」「EXCEL」で出力できるようにする。 |  |  |  |  |  |  |
|  |  | ＦRQ0301 |  |  | 理由 | ユーザーが用途に応じてダウンロードファイルを選択できるようにする。 |  |  |  |  |  |  |
|  |  | ＦRQ0301 |  |  | 説明 |  |  |  |  |  |  |  |
|  |  | ＦRQ0301 | SP010301 | A | 仕様 | 条件部の下部にCSVダウンロードボタンとExcelダウンロードボタンを２つ作成する。<br><br>ボタン配置は「画面レイアウト」シート参照 |  | 要「画面レイアウト」シートを参照 |  |  |  |  |
|  |  | ＦRQ0301 | SP010302 | A | 仕様 | ダウンロードボタンの名称は以下の通り<br>CSVダウンロードボタンの名称は「ダウンロード(CSV)」<br>Excelダウンロードボタンの名称は「ダウンロード(Excel） |  | 要「画面レイアウト」シートを参照 |  |  |  |  |
|  |  | ＦRQ0301 | SP010303 | A | 仕様 | CSVダウンロードボタンをクリックした場合、CSVファイルを出力する。 |  |  |  |  |  |  |
|  |  | ＦRQ0301 | SP010304 | A | 仕様 | CSVファイル名は「mise_rireki_yyyymmdd.csv」とする。 |  |  |  |  |  |  |
|  |  | ＦRQ0301 | SP010305 | A | 仕様 | Excelダウンロードボタンをクリックした場合、Excelファイルを出力する。 |  |  |  |  |  |  |
|  |  | ＦRQ0301 | SP010306 | A | 仕様 | Excelファイル名は「mise_rireki_yyyymmdd.xlsx」とする。 |  |  |  |  |  |  |
|  |  | ＦRQ0301 | SP010307 | A | 仕様 | ExcelファイルのSheet名は「mise_rireki_yyyymmdd」とする。 |  |  |  |  |  |  |
|  |  | ＦRQ0301 | SP010308 | A | 仕様 | ダウンロードボタンをクリックした時に②店コードが未入力の場合、条件部の上にエラーメッセージ「店コードは必須です。」を表示させる。 |  |  |  |  |  |  |
|  |  | ＦRQ0301 | SP010309 | A | 仕様 | ダウンロードボタンをクリックした時に条件に合致するデータが取得できなかった場合、条件部の上にエラーメッセージ「該当データがありません。」を表示させる。 |  |  |  |  |  |  |
| 4 | ダウンロード共通 | ＦRQ0401 |  | A | 要求 | 選択されたカテゴリ項目に応じて出力情報を変更する |  |  |  |  |  |  |
|  |  | ＦRQ0401 |  |  | 理由 | 必要最小限のデータをダウンロードさせることで視認性を向上させる。 |  |  |  |  |  |  |
|  |  | ＦRQ0401 |  |  | 説明 |  |  |  |  |  |  |  |
|  |  | ＦRQ0401 | SP010401 | A | 仕様 | 出力ファイルの並び順は「引継ぎオープン日」降順とする。 |  |  |  |  |  |  |
|  |  | ＦRQ0401 | SP010402 | A | 仕様 | ダウンロードファイルのヘッダー部に入力された条件を出力する。<br><br>①ダウンロード対象：<br>　固定文字「店マスタ履歴」を出力<br>②店コード：<br>　入力させた店コードと店名称を表示<br>③ダウンロード日付：<br>　出力日を出力（yyyy/mm/dd形式） |  | 要サンプル確認 |  |  |  |  |
|  |  | ＦRQ0401 | SP010403 | A | 仕様 | ダウンロードファイルのデータ部に入力された条件のデータを出力する。<br><br>店マスタ有効日、店コード、店名称（漢字）、店名称（カナ）、オーナーコード、オーナー名称、支部コード、支部名称、支部取込コード、支部取込名称、店区分、店区分名称、業態区分、業態区分名称、担当SVコード、担当SV名称、店オープン日、店クローズ日、新店時店コード、最新店コード、県コード、県名称、郵便番号、店住所１、店住所２、店住所３、電話番号、店舗タイプ区分、店舗タイプ区分名称、店舗形態区分、店舗形態区分名称、ロケーション区分、ロケーション区分名称、転貸、転貸開始日、転貸終了日、転貸情報、賃貸店舗経理コード、賃貸店舗契約日（XX）、契約終了予定日（XX）、賃貸店舗契約日（XX）、契約終了予定日（XX）、賃貸店舗契約日（XX）、契約終了予定日（XX）、賃貸店舗契約日（XX）、契約終了予定日（XX）、賃貸店舗契約日（XX）、契約終了予定日（XX） |  | ダウンロードファイルのデータ部の賃貸店舗契約日（XX）、契約終了予定日（XX）はBC18CHITの登録数を元に可変で出力する。<br><br>またXX部分はBC18CHITのMISE_LEASE_NAMEを順番に当てはめていく。<br><br>要サンプル確認 |  |  |  |  |
| 5 | ダウンロード（Excel） | ＦRQ0501 |  | A | 要求 | Excelファイルの場合コード系の項目はゼロパッティング(前０埋め)表示とする。ただし文字列扱いにはしない。 |  |  |  |  |  |  |
|  |  | ＦRQ0501 |  |  | 理由 | ダウンロードファイルのコードと別資料（台帳）のコードが引当てられるようにするため。文字列にすると別資料と引き当てができなくなる。 |  |  |  |  |  |  |
|  |  | ＦRQ0501 |  |  | 説明 |  |  |  |  |  |  |  |
|  |  | ＦRQ0501 | SP010501 | A | 仕様 | コード系の項目はゼロパッティングで表示とする。<br>例：店コードの場合はセルの書式設定-ユーザー定義「00000」で設定する。 |  | Apache POIの機能でゼロパッティングされるよう書式設定をする<br><br>要サンプル確認 |  |  |  |  |
|  |  | ＦRQ0501 | SP010502 | A | 仕様 | 日付系の項目はyyyy/m/dフォーマットで出力する。<br>例：2016年1月1日の場合は2016/1/1で出力。 |  | 要サンプル確認 |  |  |  |  |
| 6 | ダウンロード（CSV） | ＦRQ0601 |  | A | 要求 |  | 42398 |  |  |  |  |  |
|  |  | ＦRQ0601 |  |  | 理由 |  | 42398 |  |  |  |  |  |
|  |  | ＦRQ0601 |  |  | 説明 |  | 42398 |  |  |  |  |  |
|  |  | ＦRQ0601 | SP010601 | A | 仕様 | 日付系の項目はyyyy/mm/ddフォーマットで出力する。<br>例：2016年1月1日の場合は2016/01/01で出力。 | 42398 | CSVファイルはテキストエディタで開いた時にyyyy/mm/ddで表示されるようフォーマットを設定 |  |  |  |  |

---

## 画面構成

| [BIRD] |  | 画面設計書 |  |  |  |  |  |  |  |  |  |  | 管理番号：DN-030107-009.01<br>分類　　　：画面設計書 |  |  |  |  | 更新者：SHSC　李賀<br>更新日：2016/2/5 |  |  |  | 作成者：ISID-AO 山内<br>作成日：2015/12/28 |  |  |  |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|

| 画面構成 |  |  |  | 画面ID |  | BSI009 |  | 画面名 |  | 店マスタ履歴 |  |  |  |  |  |  |  |  |  |  |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|
| 機能概要 |  |  | 店舗の履歴情報をCSV形式またはExcel形式で抽出する。 |  |  |  |  |  |  |  |  |  |  |  |  |  |  | 構成概要 |  |  |
| パッケージルート |  |  | jp.co.isid.mos.bird.storemanage.misehistoryextract |  |  |  |  |  |  |  |  |  | 画面タイプ |  | 検索エンジン型 |  |  | テーブル |  | 店マスタ履歴(BM74MMRI) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | BIRDユーザー（BR01USER） |
|  |  | view |  |  |  | action |  |  |  |  | logic |  |  |  | dao |  |  | テーブル |  | 店統合マスタ(BM01TENM) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | 汎用店舗グループ（支部）(BM10GSIB) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | グループ統合オーナマスタ(BM11ONER) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | 相手区分(BC21AITE) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | 業態区分(BC09GTAI) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | 店舗タイプ区分(MC23MTYP) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | 店舗形態区分(TC20MKTA) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | ロケーション区分(TC19LOCT) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | 都道府県コード(BC38TKEN) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | 賃貸店舗履歴(MM24CHIT) |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  | 賃貸店舗種別（BC18CHIT） |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  |  |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  |  |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  |  |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  |  |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  |  |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  |  |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  |  |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  |  |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  |  |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | テーブル |  |  |

---

## 画面レイアウト

| [BIRD] |  | 画面設計書 |  |  |  |  |  |  |  |  |  |  | 管理番号：DN-030107-009.01<br>分類　　　：画面設計書 |  |  |  |  | 更新者：SHSC　李賀<br>更新日：2016/2/5 |  |  |  | 作成者：ISID-AO 山内<br>作成日：2015/12/28 |  |  |  |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|

| 画面レイアウト |  |  |  | 画面ID |  | BSI009 |  | 画面名 |  | 店マスタ履歴 |  |  |  |  |  |  |  |  |  |  |  |  |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|
| ビューID |  | BSI009V01 |  |  | ビュー名 |  | 店マスタ履歴 |  |  |  |  |  |  |  |  |  |  |  |  |  |  | 備考 |
| JSF名 |  |  |  |  | CSS名 |  | - |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |

|  |  | ダウンロード対象 |  |  | 店マスタ履歴 |  | 店コード |
|------|------|------|------|------|------|------|------|

---

## コンポーネント一覧

| [BIRD] |  | 画面設計書 |  |  |  |  |  |  |  |  |  |  | 管理番号：DN-030107-009.01<br>分類　　　：画面設計書 |  |  |  |  | 更新者：SHSC　李賀<br>更新日：2016/2/5 |  |  |  | 作成者：ISID-AO 山内<br>作成日：2015/12/28 |  |  |  |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|

| コンポーネント一覧 |  |  |  | 画面ID |  | BSI009 |  | 画面名 |  | 店マスタ履歴 |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|
| ビュー名 |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| 項目名 |  |  | 編集 | 表示 | データタイプ |  | 桁数 | コントロール |  | 初期値 |  |  | 必須 | 対応プロパティ・アクション |  |  |  |  | 備考 |  |  |  |  |  |  |
| 条件エリア |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| ダウンロード対象 |  |  | × | ○ | 文字列 |  |  | ラベル |  |  |  |  |  | 固定文字列 |  |  |  |  |  |  |  |  |  |  |  |
| 店コード |  |  | ○ | ○ | 数字文字列 |  | 5 | テキスト |  |  |  |  | ○ |  |  |  |  |  | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 |
|  | 検索 |  | × | ○ |  |  |  | ボタン |  |  |  |  |  |  |  |  |  |  | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 | 店コードが5桁未満の場合は前0埋めで処理を実行する。 |

| ダウンロード(CSV) |  |  | × | ○ |  |  |  | ボタン |  |  |  |  | - | 【CSVダウンロード】アクション実施 |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|
| ダウンロード(Excel) |  |  | × | ○ |  |  |  | ボタン |  |  |  |  | - | 【Excelダウンロード】アクション実施 |

---

## アクション

| [BIRD] |  | 画面設計書 |  |  |  |  |  |  |  |  |  |  | 管理番号：DN-030107-009.01<br>分類　　　：画面設計書 |  |  |  |  | 更新者：SHSC　李賀<br>更新日：2016/2/5 |  |  |  | 作成者：ISID-AO 山内<br>作成日：2015/12/28 |  |  |  |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|

| アクション |  |  |  | 画面ID |  | BSI009 |  | 画面名 |  | 店マスタ履歴 |  |  |  |  |  |  |  |  |  |  |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|
| ビュー名 |  | 店舗選択 |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| アクションID |  | BSI009A01 |  |  | アクション名 |  | 初期処理 |  |  |  |  |  |  |  |  |  | 遷移先ビュー |  |  | 呼び出し元 |
| 事前条件 |  |  |  |  |  |  |  |  | 処理概要 |  |  |  |  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  |  | １．メニューから遷移します。 |  |  |  |  |  |  |  |  |  |  |  |


### 事後条件

| 事後条件 |
|------|

| アクションID |  | BSI009A02 |  |  | アクション名 |  | CSVダウンロード |  |  |  |  |  |  |  |  |  | 遷移先ビュー |  |  | 自画面 |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|
| 事前条件 |  |  |  |  |  |  |  |  | 処理概要 |  |  |  |  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  |  | １．店コードが未入力の場合、 |  |  |  |  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  |  |  | 条件部の上にエラーメッセージ「店コードは必須です。」を表示する |  |  |  |  |  |  |  |  |  |  |

|  |  |  |  |  |  |  |  |  | ２．ロジック【CSVデータリストの作成】を実行する。 |  |
|------|------|------|------|------|------|------|------|------|------|------|
|  |  |  |  |  |  |  |  |  |  | パラメータ：店マスタ履歴情報抽出Dto |

|  |  |  |  |  |  |  |  |  | ３．処理「２．」でデータ取得できない場合、 |  |
|------|------|------|------|------|------|------|------|------|------|------|
| 事後条件 |  |  |  |  |  |  |  |  |  | 条件部の上にエラーメッセージ「該当データがありません。」を表示する |

|  |  |  |  |  |  |  |  |  | ４．処理「２．」でデータ取得する場合、CSVファイルをダウンロードする |  |
|------|------|------|------|------|------|------|------|------|------|------|
|  |  |  |  |  |  |  |  |  |  | ・CSVファイル名は「mise_rireki_yyyymmdd.csv」とする。 |
|  |  |  |  |  |  |  |  |  |  | ※yyymmddとはダウンロード時点の日付となる。 |
|  |  |  |  |  |  |  |  |  |  | ※詳しいのはCSV出力レイアウト設計書に沿って、ご実装ください。 |

| アクションID |  | BSI009A03 |  |  | アクション名 |  | Excelダウンロード |  |  |  |  |  |  |  |  |  | 遷移先ビュー |
|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|------|
| 事前条件 |  |  |  |  |  |  |  |  | 処理概要 |  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  |  | １．店コードが未入力の場合、 |  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  |  |  | 条件部の上にエラーメッセージ「店コードは必須です。」を表示する |  |  |  |  |  |  |  |

|  |  |  |  |  |  |  |  |  | ２．ロジック【EXCELデータリストの作成】を実行する。 |  |
|------|------|------|------|------|------|------|------|------|------|------|
|  |  |  |  |  |  |  |  |  |  | パラメータ：店マスタ履歴情報抽出Dto |

|  |  |  |  |  |  |  |  |  | ３．処理「２．」でデータ取得できない場合、 |  |
|------|------|------|------|------|------|------|------|------|------|------|
|  |  |  |  |  |  |  |  |  |  | 条件部の上にエラーメッセージ「該当データがありません。」を表示する |

|  |  |  |  |  |  |  |  |  | ４．処理「２．」でデータ取得する場合、Excelファイルをダウンロードする |  |
|------|------|------|------|------|------|------|------|------|------|------|
| 事後条件 |  |  |  |  |  |  |  |  |  | ・Excelファイル名は「mise_rireki_yyyymmdd.xlsx」とする。 |
|  |  |  |  |  |  |  |  |  |  | ・ExcelファイルのSheet名は「mise_rireki_yyyymmdd」とする。 |
|  |  |  |  |  |  |  |  |  |  | ※yyymmddとはダウンロード時点の日付となる。 |
|  |  |  |  |  |  |  |  |  |  | ※詳しいのはCSV出力レイアウト設計書に沿って、ご実装ください。 |


---

## 読み取りが難しかった項目

- .xls形式のため、画像・図形の抽出ができませんでした。元のExcelファイルを参照してください。

- 結合セルのレイアウトが完全に再現できなかった箇所がある可能性があります。

- 複雑なレイアウトの表は、元のExcelファイルと照合して確認してください。


## 不明点・不明瞭な点

- 空欄になっている項目については、意図的な省略か記載漏れか確認が必要です。

- 用語や略語の意味が不明確な箇所は、関連ドキュメントを参照してください。
