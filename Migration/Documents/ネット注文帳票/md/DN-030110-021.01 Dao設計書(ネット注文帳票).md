# 概要

| 項目 | 内容 |
|------|------|
| 管理番号 | DN-030110-021.01 |
| 分類 | Dao設計書 |
| 作成者 | 王増文 |
| 作成日 | 2018/09/06 |
| 更新者 | 王増文 |
| 更新日 | 2018/09/06 |

**構成**: 本ドキュメントは以下のEntity定義で構成されています。
- NetOrderReportDataDao (ネット注文帳票情報)

# 変更履歴

## 承認履歴

| バージョン | 変更管理NO | 作成担当者 | 作成日付 | レビュー担当者 | レビュー日付 | 承認担当者 | 承認日付 |
|------------|------------|------------|----------|----------------|--------------|------------|----------|
| 01 | ネット注文帳票 | 王増文 | 2018/09/06 | 田村雄一 | 2018/09/06 | 竹内裕二 | 2018/09/06 |

## 変更履歴

| バージョン | 変更内容 |
|------------|----------|
| 01 | 新規作成 |

# 設定＆実行

| 項目 | 内容 |
|------|------|
| エンティティ出力先 | C:\Temp |

### 作成対象シート

- 変更履歴
- ネット注文帳票情報取得(NetOrderReportDataDao)

### 設定画面

![設定画面1](./images/設定＆実行_1.png)

![設定画面2](./images/設定＆実行_2.png)

![設定画面3](./images/設定＆実行_3.png)

# Entity定義

## NetOrderReportDataDao (ネット注文帳票情報)

### 基本情報

| 項目 | 内容 |
|------|------|
| Entity名 | ネット注文帳票情報(NetOrderReport) |
| テーブル名 | BT63SNIP |
| パッケージ | jp.co.isid.mos.bird.bizreport.netorderreport.entity.NetOrderReport |

### プロパティ定義

| プロパティ名 | 論理名 | Java型 | 列型 | 参照 | 対象テーブル | 説明 |
|--------------|--------|--------|------|------|--------------|------|
| jigyouCd | 事業本部コード | java.lang.String | - | JIGYOU_CD | BM10GSIB |  |
| jigyouName | 事業本部名称 | java.lang.String | - | JIGYOU_NAME | BM10GSIB |  |
| slareaCd | 営業エリアコード | java.lang.String | - | SLAREA_CD | BM10GSIB |  |
| slareaName | 営業エリア名称 | java.lang.String | - | SLAREA_NAME | BM10GSIB |  |
| sibuCd | 支部コード | java.lang.String | - | SIBU_CD | BM01TENM |  |
| sibuName | 支部名称 | java.lang.String | - | SIBU_NAME | BM10GSIB |  |
| areaDai | 支部取込コード | java.lang.String | - | AREA_DAI | BM01TENM |  |
| areaName | 支部取込名 | java.lang.String | - | AREA_NAME | BM10GSIB |  |
| miseCd | 店コード | java.lang.String | - | MISE_CD | BM45ZDAY |  |
| miseNameKj | 店名称 | java.lang.String | - | MISE_NAME_KJ | BM01TENM |  |
| onerCd | オーナーコード | java.lang.String | - | ONER_CD | BM01TENM |  |
| onerNameKj | オーナー名称 | java.lang.String | - | ONER_NAME_KJ | BM11ONER |  |
| otherKin7 | ネットテイク金額 | java.lang.String | - | SUM(B1.OTHER_KIN_7) | BT63SNIP |  |
| otherKin8 | ネット宅配金額 | java.lang.String | - | SUM(B1.OTHER_KIN_8) | BT63SNIP |  |
| eat_kin | EAT-IN金額 | java.lang.String | - | SUM(B1.EAT_KIN) | BT63SNIP |  |
| takeKin | TAKE-OUT金額 | java.lang.String | - | SUM(B1.TAKE_KIN) | BT63SNIP |  |
| telKin | TEL-ORDER金額 | java.lang.String | - | SUM(B1.TEL_KIN) | BT63SNIP |  |
| driveKin | DRV-TH金額 | java.lang.String | - | SUM(B1.DRIVE_KIN) | BT63SNIP |  |
| otherKin1 | 宅配金額 | java.lang.String | - | SUM(B1.OTHER_KIN_1) | BT63SNIP |  |
| otherKin2 | 外販金額 | java.lang.String | - | SUM(B1.OTHER_KIN_2) | BT63SNIP |  |
| otherKen7 | ネットテイク件数 | java.lang.String | - | SUM(B1.OTHER_KEN_7) | BT63SNIP |  |
| otherKen8 | ネット宅配件数 | java.lang.String | - | SUM(B1.OTHER_KEN_8) | BT63SNIP |  |
| eatKen | EAT-IN件数 | java.lang.String | - | SUM(B1.EAT_KEN) | BT63SNIP |  |
| takeKen | TAKE-OUT件数 | java.lang.String | - | SUM(B1.TAKE_KEN) | BT63SNIP |  |
| telKen | TEL-ORDER件数 | java.lang.String | - | SUM(B1.TEL_KEN) | BT63SNIP |  |
| driveKen | DRV-TH件数 | java.lang.String | - | SUM(B1.DRIVE_KEN) | BT63SNIP |  |
| otherKen1 | 宅配件数 | java.lang.String | - | SUM(B1.OTHER_KEN_1) | BT63SNIP |  |
| otherKen2 | 外販件数 | java.lang.String | - | SUM(B1.OTHER_KEN_2) | BT63SNIP |  |
| otherKin7Zen | 前年ネットテイク金額 | java.lang.String | - | SUM(B2.OTHER_KIN_7) | BT63SNIP |  |
| otherKin8Zen | 前年ネット宅配金額 | java.lang.String | - | SUM(B2.OTHER_KIN_8) | BT63SNIP |  |
| eatKinZen | 前年EAT-IN金額 | java.lang.String | - | SUM(B2.EAT_KIN) | BT63SNIP |  |
| takeKinZen | 前年TAKE-OUT金額 | java.lang.String | - | SUM(B2.TAKE_KIN) | BT63SNIP |  |
| telKinZen | 前年TEL-ORDER金額 | java.lang.String | - | SUM(B2.TEL_KIN) | BT63SNIP |  |
| driveKinZen | 前年DRV-TH金額 | java.lang.String | - | SUM(B2.DRIVE_KIN) | BT63SNIP |  |
| otherKin1Zen | 前年宅配金額 | java.lang.String | - | SUM(B2.OTHER_KIN_1) | BT63SNIP |  |
| otherKin2Zen | 前年外販金額 | java.lang.String | - | SUM(B2.OTHER_KIN_2) | BT63SNIP |  |
| otherKen7Zen | 前年ネットテイク件数 | java.lang.String | - | SUM(B2.OTHER_KEN_7) | BT63SNIP |  |
| otherKen8Zen | 前年ネット宅配件数 | java.lang.String | - | SUM(B2.OTHER_KEN_8) | BT63SNIP |  |
| eatKenZen | 前年EAT-IN件数 | java.lang.String | - | SUM(B2.EAT_KEN) | BT63SNIP |  |
| takeKenZen | 前年TAKE-OUT件数 | java.lang.String | - | SUM(B2.TAKE_KEN) | BT63SNIP |  |
| telKenZen | 前年TEL-ORDER件数 | java.lang.String | - | SUM(B2.TEL_KEN) | BT63SNIP |  |
| driveKenZen | 前年DRV-TH件数 | java.lang.String | - | SUM(B2.DRIVE_KEN) | BT63SNIP |  |
| otherKen1Zen | 前年宅配件数 | java.lang.String | - | SUM(B2.OTHER_KEN_1) | BT63SNIP |  |
| otherKen2Zen | 前年外販件数 | java.lang.String | - | SUM(B2.OTHER_KEN_2) | BT63SNIP |  |

### Dao情報

| 項目 | 内容 |
|------|------|
| Dao名 | ネット注文帳票情報(NetOrderReportDataDao) |
| Daoクラス | jp.co.isid.mos.bird.bizreport.netorderreport.dao.NetOrderReportDataDao |

### SQL定義: ネット注文帳票情報検索(selectNetOrderReport)

#### パラメータ情報

| パラメータ名 |
|--------------|
| 検索FROM日付 |
| 検索TO日付 |
| ソート順キー |

#### 使用テーブル

| テーブル名 | テーブルID | 補足 |
|------------|------------|------|
| 営業日報（日次） | BT63SNIP |  |
| 前年営業日情報 | BM45ZDAY |  |
| グループ統合オーナマスタ | BM11ONER |  |
| 店統合マスタ | BM01TENM |  |
| 汎用店舗グループ（支部） | BM10GSIB |  |
| ネット注文帳票除外店舗マスタ | BM82NOJT |  |

#### サブクエリー: 本年データ

##### JOIN情報

| 項目 | 営業日報（日次） | 前年営業日情報 | グループ統合オーナマスタ | 店統合マスタ | 汎用店舗グループ（支部） | ネット注文帳票除外店舗マスタ |
|------|------------------|----------------|--------------------------|--------------|--------------------------|------------------------------|
| テーブル | BT63SNIP | BM45ZDAY | BM11ONER | BM01TENM | BM10GSIB | BM82NOJT |
| カラム | 店舗コード | ⇔店舗コード |  | ⇔店舗コード |  |  |
| 矢印が向いている方がメイン |  |  | オーナーコード | ⇔オーナーコード |  |  |

> **JOIN記号の説明**
> - `→`、`←`：outer join（矢印が向いている方がメイン）
> - `⇔`：inner join

#### サブクエリー: 前年データ

##### JOIN情報

| 項目 | 営業日報（日次） | 前年営業日情報 | グループ統合オーナマスタ | 店統合マスタ | 汎用店舗グループ（支部） | ネット注文帳票除外店舗マスタ |
|------|------------------|----------------|--------------------------|--------------|--------------------------|------------------------------|
| テーブル | BT63SNIP | BM45ZDAY | BM11ONER | BM01TENM | BM10GSIB | BM82NOJT |
| カラム | 店舗コード | ⇔前年同月店舗コード |  | ⇔店舗コード |  |  |
| 矢印が向いている方がメイン |  |  | オーナーコード | ⇔オーナーコード |  |  |

#### 本年データと前年データの結合

| 項目 | 本年データ | 前年データ |
|------|------------|------------|
| 結合方法 | 全てunion all | 全てunion all |

### 参考図

![NetOrderReportDataDao](./images/NetOrderReportDataDao.png)

# 読み取りが難しかった項目

- **図形変換**: DrawingMLに図形が含まれていますが、コネクタ（接続線）がないため、Mermaid図への変換は行いませんでした。図形は主にボタンなどのUI要素と思われます。
- **結合セルのレイアウト**: 一部の結合セルは展開して表示しています。元のレイアウトと異なる場合があります。

# 不明点・不明瞭な点

- **SQL文の詳細**: SQL定義セクションにはパラメータ情報とJOIN情報が記載されていますが、完全なSQL文は別途管理されている可能性があります。
- **列型の意味**: プロパティ定義の「列型」列がすべて「-」となっており、実際の列型定義は別の場所で管理されている可能性があります。
