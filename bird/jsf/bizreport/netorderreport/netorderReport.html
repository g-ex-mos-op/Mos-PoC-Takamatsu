<html xmlns:m="http://www.seasar.org/maya" m:action="#{netorderAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
	<title>ネット注文帳票</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="ネット注文帳票"/>
<span m:inject="s:insert" m:name="bodyTitleName">■ネット注文帳票</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBR019V01"/>
<span m:inject="f:param" m:name="onLoadName" m:value="bodyLoad();"/>
<span m:inject="s:insert" m:name="body">

<script type="text/javascript">
  <!--
  	//ダウンロード
  function bodyLoad() {
	  //excelダウンロード
	  var downloadExcelFlg = document.getElementById('netOrderReportForm:downloadExcelFlg').value;
	  if (downloadExcelFlg=="true"){
		  document.getElementById('netOrderReportForm:downloadExcel').click();
	  }
	  //pdfダウンロード
	  var downloadPdfFlg= document.getElementById('netOrderReportForm:downloadPdfFlg').value;
	  if (downloadPdfFlg=="true"){
		  document.getElementById('netOrderReportForm:downloadPdf').click();
		  document.netOrderReportForm.elements["netOrderReportForm:downloadPdf"].disabled = true;
	  }
  }
	//対象期間プルダウン変更処理
  function switchDisplayKikan() {
  	document.getElementById('netOrderReportForm:div_kikanYM').style.display="none";
  	document.getElementById('netOrderReportForm:div_kikanSitei').style.display="none";

  	var taishoKikan = document.netOrderReportForm.elements['netOrderReportForm:kikanTaisho'].selectedIndex;
  	if(taishoKikan == 0) {
  		document.getElementById('netOrderReportForm:div_kikanYM').style.display="inline";
  	}else if(taishoKikan == 1) {
  		document.getElementById('netOrderReportForm:div_kikanSitei').style.display="inline";
  	}
  }
  -->
</script>
<form m:id="netOrderReportForm">
<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
<input type="hidden" m:id="downloadExcelFlg" m:value="#{searchDto.downloadExcelFlg}"/>
<input type="hidden" m:id="downloadPdfFlg" m:value="#{searchDto.downloadPdfFlg}"/>
<a id="downloadExcel"  m:action="#{netorderAction.downloadExcel}"></a>
<a id="downloadPdf" m:action="#{netorderAction.downloadPdf}"></a>
<div m:id="download" style="#{searchDto.downloadFlg ? 'display:none;':''}">
	<table class="hiddenBody element_browser" style="margin-bottom:4px;">
		<tr>
		<td>
		<table class="body_table">
			<tr>
				<th>対象期間</th>
				<td>
					<div class="hideArea">
						<select	m:id="kikanTaisho"
								m:value="#{searchDto.taishoKikanCd}"
								m:items="#{searchDto.taishoKikanList}"
								m:itemValue="code"
								m:itemLabel="name"
								m:onchange="switchDisplayKikan();"></select></div>
				</td>
				<th>期間指定</th>
				<td colspan="3">
					<div class="hideArea">
						<div id="div_kikanYM" class="div_kikanNipo" style="#{(searchDto.taishoKikanCd=='MONTH')== true? '' : 'display:none;'}">
							<select m:value="#{searchDto.kikanYM}"
									m:items="#{searchDto.kikanYMList}"
									m:id="kikanNipo"
									m:itemValue="code"
									m:itemLabel="name"></select></div>
						<div id="div_kikanSitei" class="div_kikanSitei" style="#{(searchDto.taishoKikanCd=='DAYS') == true  ? '' : 'display:none;'}">
							<select m:value="#{searchDto.kikanFrom}"
										m:items="#{searchDto.kikanFromList}"
										m:id="kikanFrom"
										m:itemValue="code"
										m:itemLabel="name"></select>
							〜<select m:value="#{searchDto.kikanTo}"
										m:items="#{searchDto.kikanToList}"
										m:id="kikanTo"
										m:itemValue="code"
										m:itemLabel="name"></select></div></div>
				</td>
			</tr>
		</table>
		</td>
		</tr>
		</table>
ダウンロード： <a m:action="#{netorderAction.checkDownloadExcel}">[EXCELファイル]</a>
 <a m:action="#{netorderAction.checkDownloadPdf}">[PDFファイル(表紙)] </a>
 <br/>
</div>
<div m:id="result" style="#{searchDto.downloadFlg ? '':'display:none;'}">
<table>
	<tr>
		<td>ダウンロードデータの準備をしています。</td>
	</tr>
	<tr>
		<td>そのまましばらくお待ち下さい。</td>
	</tr>
	<tr>
		<td>ダウンロード完了後、下記のボタンを押して下さい。</td>
	</tr>
	<tr>
		<td>
			<input type="button" class="operation_button" value="戻る"
					m:id="modoru" m:action="#{netorderAction.modoru}">
		</td>
	</tr>
</table>
</div>
</form>
</span>
</body>
</html>
