<html xmlns:m="http://www.seasar.org/maya" m:action="#{uriMaintenanceGetKeigenTaxConfirmAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j"/>
<title>売上修正(軽減税率確認画面)</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="売上修正(軽減税率確認画面)"/>
<span m:inject="s:insert" m:name="bodyTitleName">■売上修正(軽減税率確認画面)</span>
<span m:inject="f:param" m:name="onLoadName" m:value="load();"/>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBR008V07"/>
<span m:inject="f:param" m:name="dayRowCnt" m:value="#{(uriMaintenanceDto.resultData.listDataCnt-1)<=11?uriMaintenanceDto.resultData.listDataCnt-1:(uriMaintenanceDto.syukeiKbnResultData.tabCnt>10?13:14)}"/>
<div m:inject="s:insert" m:name="body">

<script type="text/javascript">
<!--
function load() {
	document.kaigenTaxform.elements['kaigenTaxform:loadingFlg'].value = "";
}
function setLoadingFlg() {
	document.kaigenTaxform.elements['kaigenTaxform:loadingFlg'].value = "ON";
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function returnLoadingStatus(){
	if(isLoadingFlgOFF()) {
		setLoadingFlg();
		return true;
	}
	return false;
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function isLoadingFlgOFF(){
	return (document.kaigenTaxform.elements['kaigenTaxform:loadingFlg'].value != "ON");
}

function execAction(targetAction) {
 if(returnLoadingStatus()) {
	document.kaigenTaxform.elements['kaigenTaxform:__link_clicked__'].value='kaigenTaxform:'+targetAction;
	document.kaigenTaxform.submit();
  }
  return false;
}
/**
 * タブ切替時処理
 */
function changeTab(targetTabNo) {
	document.kaigenTaxform.elements['kaigenTaxform:targetTabNo'].value=targetTabNo;
	return execAction("changeTab");
}
window.onload=function(){
    function $(id){return document.getElementById(id) }
    var hDiv=$('hDiv'),dDiv=$('dDiv'),tb0=$('tb0'),tb1=$('tb1');
  //hDivとdDivが一緒に転がります
  if(dDiv!=null){
	  dDiv.onscroll=function(){
		  hDiv.style.left  = dDiv.scrollLeft*-1 +'px'
	  }
  }
  //エラーが発生時、dDiv.topをリセットする
  var a =document.getElementById("errMsg");
  if(a!=null && a!=""){
	  if(a.innerText!=null && a.innerText!="" && a.innerText=="該当データがありません。"){
			 document.getElementById("loginButton").style.display="none";
			 document.getElementById("allDiv").style.display="none";

	  }
  }
}
-->
</script>


<style type="text/css">
<!--

table.list_width {
	width:950px;
}
table.list_data {
	border-top-width:0px;
	border-bottom-width:0px;
}

table.list_data tr td{
  text-align            : right;
}
table.body_table2 tr td.col_total {
	background-color      : #FFC0A0;
}
.col_head {
	width:65px;
	text-align:right;
}
.col_view0 {
	width:80px;
	text-align:right;
}
-->
</style>


<form m:id="kaigenTaxform" style="display:inline;">
	<input type="hidden" m:id="windowId" m:value="#{uriMaintenanceDto.windowId}"/>
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:value="#{uriMaintenanceDto.viewSessionKey}"/>
	<input type="hidden" m:id="skTabNo" m:value="#{uriMaintenanceDto.skTabNo}"/>
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
	<input type="hidden" name="maxScrollHeight" m:value="" m:passthrough="true"/>
	<input type="hidden" id="loadingFlg" value=""/>
	<span  class="element_browser">
		<input type="button" value="戻る" m:action="#{uriMaintenanceGetKeigenTaxConfirmAction.back}" onClick="returnLoadingStatus();"/>
		<input id ="loginButton" type="button" value="登録" onClick="execAction('regist');" onDblClick="return false;"/>
	</span>
	<a id="regist" m:action="#{uriMaintenanceConfirmAction.regist}"></a>
	<input type="hidden" m:id="syukeiKbn" m:value="#{uriMaintenanceDto.syukeiKbn}"/>
	<a m:id="changeTab" m:action="#{uriMaintenanceGetKeigenTaxConfirmAction.changeTab}"></a>
	<input type="hidden" m:id="targetTabNo" m:value="#{uriMaintenanceGetKeigenTaxConfirmAction.targetTabNo}"/>
	<table class="body_table2" style="margin-top:4px;margin-bottom:4px;">
	    <tr>
	      <th>会社</th>
	      <td><span m:converter="#{characterEncodingConverter}" m:value="#{uriMaintenanceDto.condCompanyNm}"></span>&nbsp;</td>
	      <th>店コード</th>
	      <td><span m:value="#{uriMaintenanceDto.condMiseCd}"
	      	      m:converter="#{uriMainteCodeConverterMise}"></span>&nbsp;
	      	  <span m:converter="#{characterEncodingConverter}" m:value="#{uriMaintenanceDto.condMiseNm}"></span>&nbsp;</td>
	      <th>対象年月</th>
	      <td><span m:converter="#{characterEncodingConverter}" m:value="#{uriMaintenanceDto.condTargetYm}"
	                m:converter="#{uriMainteDateConverterYM}"></span>&nbsp;</td>
	    </tr>
	</table>
	<!--結果表示エリア-->
		<!-- タブ部 -->
		<table cellspacing="0" cellpadding="0" class="list_width element_browser">
			<tr><td>
				    <ul class="list_tab_area">
				        <li class="body_active_cell"
				          style="width:85px;">
				          <a href="javaScript:void(0);" onClick="return changeTab('01');" onDblClick="return false;">その1</a>
				        </li>
				    </ul>
				</td>
				<td width="*" align="right" valign="bottom">
				</td>
			</tr>
		</table>
		<!-- タブ帯部 -->
		<table class="body_caption list_width element_browser" style="clear:both;" cellspacing="0" cellpadding="0">
		  <tr style="height:5px;"><td></td></tr>
		</table>
		<!--結果表示エリア:ヘッダー部-->
		<span class="element_print" m:value="【#{uriMaintenanceDto.resultData.keyName}タブ】"></span>
				<table class="body_table2 list_width" id ="tb0">
					<tr class="header_row">
						<th width="67px" rowspan="2">営業日</th><!--営業日-->
						<th colspan="6">売上</th><!--売上<-->
						<th colspan="6">消費税</th><!--消費税-->
					</tr>
					<tr class="header_row">
						<th class="col_view0">通常税率<br>対象</th>
						<th class="col_view0">軽減税率<br>対象</th>
						<th class="col_head">予備3</th>
						<th class="col_head">予備4</th>
						<th class="col_head">予備5</th>
						<th class="col_head">合計</th>
						<th class="col_view0">通常税率<br>対象</th>
						<th class="col_view0">軽減税率<br>対象</th>
						<th class="col_head">予備3</th>
						<th class="col_head">予備4</th>
						<th class="col_head">予備5</th>
						<th class="col_head">合計</th>
					</tr>
				</table>
		<!--結果表示エリア:データー部-->
		<div class="scroll_area" id ="dDiv" style ="width:1215px">
			<table class="body_table2 list_data list_width" id ="tb1">
				<div m:inject="s:forEach" m:items="#{uriMaintenanceDto.listGetKeigenTaxData}" m:var="meisai" m:varindex="d">
					<!--売上金-->
			        <span>
						<tr m:rendered="#{meisai.eigyoDt != null}">
							<td style="text-align:left;width:67px"><span m:value="#{meisai.eigyoDt}" m:converter="#{uriMainteDateConverterDE}"></span></td><!--営業日-->
							<td class="col_view0"><span m:value="#{meisai.uriage1}" m:converter="#{numConverter}"></span></td><!--売上_通常税率対象-->
							<td class="col_view0"><span m:value="#{meisai.uriage2}" m:converter="#{numConverter}"></span></td><!--売上_軽減税率対象-->
							<td class="col_head"><span m:value="#{meisai.uriage3}" m:converter="#{numConverter}"></span></td><!--売上_予備3-->
							<td class="col_head"><span m:value="#{meisai.uriage4}" m:converter="#{numConverter}"></span></td><!--売上_予備4-->
							<td class="col_head"><span m:value="#{meisai.uriage5}" m:converter="#{numConverter}"></span></td><!--売上_予備5-->
							<td class="col_head col_total"><span m:value="#{meisai.uriage1 + meisai.uriage2 + meisai.uriage3 + meisai.uriage4+ meisai.uriage5}" m:converter="#{numConverter}"></span></td><!--合計(売上)-->
							<td class="col_view0"><span m:value="#{meisai.tax1}" m:converter="#{numConverter}"></span></td><!--消費税_通常税率対象-->
							<td class="col_view0"><span m:value="#{meisai.tax2}" m:converter="#{numConverter}"></span></td><!--消費税_軽減税率対象-->
							<td class="col_head"><span m:value="#{meisai.tax3}" m:converter="#{numConverter}"></span></td><!--消費税_予備3-->
							<td class="col_head"><span m:value="#{meisai.tax4}" m:converter="#{numConverter}"></span></td><!--消費税_予備4-->
							<td class="col_head"><span m:value="#{meisai.tax5}" m:converter="#{numConverter}"></span></td><!--消費税_予備5-->
							<td class="col_head col_total"><span m:value="#{meisai.tax1 + meisai.tax2 + meisai.tax3 + meisai.tax4 + meisai.tax5}" m:converter="#{numConverter}"></span></td><!--合計(消費税)-->
						</tr>
				    </span>
				</div>
			</table>
			<!-- 結果表示エリア:合計行 -->
			<table class="body_table2 list_width" style="margin-top:0px;text-align:right; margin-bottom:3px">
		        <tr class="body_sum5 non_top_border">
					<td style="text-align:left;width:67px">合計</td>
					<td class="col_view0"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.sumUriage1}" m:converter="#{numConverter}"></span></td>
					<td class="col_view0"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.sumUriage2}" m:converter="#{numConverter}"></span></td>
					<td class="col_head"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.sumUriage3}" m:converter="#{numConverter}"></span></td>
					<td class="col_head"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.sumUriage4}" m:converter="#{numConverter}"></span></td>
					<td class="col_head"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.sumUriage5}" m:converter="#{numConverter}"></span></td>
					<td class="col_head"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.totalUriage}" m:converter="#{numConverter}"></span></td>
					<td class="col_view0"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.sumTax1}" m:converter="#{numConverter}"></span></td>
					<td class="col_view0"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.sumTax2}" m:converter="#{numConverter}"></span></td>
					<td class="col_head"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.sumTax3}" m:converter="#{numConverter}"></span></td>
					<td class="col_head"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.sumTax4}" m:converter="#{numConverter}"></span></td>
					<td class="col_head"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.sumTax5}" m:converter="#{numConverter}"></span></td>
					<td class="col_head"><span m:value="#{uriMaintenanceDto.uiMeisaiKeigenTaxInfo.totalTax}" m:converter="#{numConverter}"></span></td>
			    </tr>
			</table>
		</div>
	<!--結果表示エリア:スクロール終了-->
	<input type="text" m:id="dummyEnter" style="display:none"/>
	</form>
</div>
</body>
</html>
