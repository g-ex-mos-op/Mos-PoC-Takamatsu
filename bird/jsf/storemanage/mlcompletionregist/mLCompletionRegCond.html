<html xmlns:m="http://www.seasar.org/maya" m:action="#{mlCompletionregistCondAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>マスターライセンス研修修了登録</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="マスターライセンス研修修了登録"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject="s:insert" m:name="bodyTitleName">■マスターライセンス研修修了登録</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BSM006V01"/>
<span m:inject="f:param" m:name = "msg" m:value="更新研修のデータを全てクリアします。よろしいですか？"/>
<span m:inject="s:insert" m:name="body">
<script type="text/javascript">
<!--
function load(){
	focusElement('conditionForm');
	document.forms['conditionForm'].elements['conditionForm:optionFlg'].checked=true;

}
function loadSibuList(){
	document.forms['conditionForm'].elements['conditionForm:__link_clicked__'].value='conditionForm:loadSibuList';
	document.forms['conditionForm'].submit();
	return false;
}
function changeEntry(entrycd) {
	var elEntryCd = document.conditionForm.elements['conditionForm:entryCd'];
	if(elEntryCd != null) {
		if(elEntryCd.length > 0) {
			for(i=0; i<elEntryCd.length; i++){
				if(elEntryCd[i].value==entrycd){
					document.conditionForm.elements["conditionForm:entryCd"][i].click();
					break;
				}
			}
		}else{
			elEntryCd.click();
		}
	}
}
function allClear() {
	if(confirm(document.conditionForm.elements['conditionForm:jyokenMsg'].value)) {
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:allClear';
		document.conditionForm.submit();
	}
}
//-->
</script>
<style type="text/css">
<!--


-->
</style>

<form m:id="conditionForm">
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" id="jyokenMsg" m:value="#{msg}"/>

<div class="search_condition">
<!-- 検索条件 -->
<table>
  <tr>
    <td>
      <span m:inject="s:selectOneRadio2" m:id="entryCd" m:value="#{mlCompletionregistDto.entryCd}">
        <table class="body_table" width="500">
          <caption class="body_title width_body_title_500" style="padding:2px 0px;">研修選択</caption>
          <tr>
            <th>選択</th>
            <th>研修名</th>
            <th>タイトル</th>
          </tr>
          <tr>
            <td align="center">
              <span m:rendered="#{mlCompletionregistDto.basicTrainingListSize > 0}">
                <input type="radio" name="entryCd" m:value="01"/>
              </span>
              <span m:rendered="#{mlCompletionregistDto.basicTrainingListSize==0}">
                <input type="radio" name="entryCd" m:value="01"  disabled="disabled" />
              </span>
            </td>
            <td>ベーシック研修　</td>
            <td>
              <span m:rendered="#{mlCompletionregistDto.basicTrainingListSize > 0}">
                <div class="hideArea">
                  <select class="condition_field"
                      m:id="basicTargetCd"
                      m:value="#{mlCompletionregistDto.basicTargetCd}"
                      m:items="#{mlCompletionregistDto.basicTrainingList}"
                      m:itemValue="targetCd"
                      m:itemLabel="entryTitle"
                      m:onchange="changeEntry('01')">
                    <option value=""></option>
                  </select>
                </div>
              </span>
              <span m:rendered="#{mlCompletionregistDto.basicTrainingListSize==0}">
                <span m:value="対象が存在しません。" />
              </span>
            </td>
          </tr>
          <tr>
            <td align="center">
              <span m:rendered="#{mlCompletionregistDto.tripTrainingListSize>0}">
                <input type="radio" name="entryCd" m:value="05"/>
              </span>
              <span m:rendered="#{mlCompletionregistDto.tripTrainingListSize==0}">
                <input type="radio" name="entryCd" m:value="05"  disabled="disabled" />
              </span>
            </td>
            <td>出張ベーシック研修　</td>
            <td>
              <span m:rendered="#{mlCompletionregistDto.tripTrainingListSize > 0}">
                <div class="hideArea">
                <select class="condition_field"
                    m:id="tripTargetCd"
                    m:value="#{mlCompletionregistDto.tripTargetCd}"
                    m:items="#{mlCompletionregistDto.tripTrainingList}"
                    m:itemValue="targetCd"
                    m:itemLabel="entryTitle"
                    m:onchange="changeEntry('05')">
                  <option value=""></option>
                </select>
                </div>
              </span>
              <span m:rendered="#{mlCompletionregistDto.tripTrainingListSize==0}">
                <span m:value="対象が存在しません。" />
              </span>
            </td>
          </tr>
          <tr>
            <td align="center">
              <span m:rendered="#{mlCompletionregistDto.renewalTrainingListSize > 0}">
                <input type="radio" name="entryCd" m:value="30"/>
              </span>
              <span m:rendered="#{mlCompletionregistDto.renewalTrainingListSize==0}">
                <input type="radio" name="entryCd" m:value="30" disabled="disabled" />
              </span>
            </td>
	        <td>マスターライセンス更新研修　</td>
	        <td>
	        	<span m:rendered="#{mlCompletionregistDto.renewalTrainingListSize > 0}">
				<div class="hideArea">
				<select class="condition_field"
						m:id="renewalTargetCd"
						m:value="#{mlCompletionregistDto.renewalTargetCd}"
						m:items="#{mlCompletionregistDto.renewalTrainingList}"
						m:itemValue="targetCd"
						m:itemLabel="entryTitle"
						m:onchange="changeEntry('30')">
					<option value=""></option>
				</select>
				</div>
				</span>
				<span m:rendered="#{mlCompletionregistDto.renewalTrainingListSize==0}">
					<span m:value="対象が存在しません。" />
				</span>
            </td>
          </tr>
        </table>
      </span>

      <p></p>

      <!-- 対象者選択エリア -->
      <table class="body_table" width="400">
        <caption class="body_title width_body_title_400" style="padding:2px 0px;">対象者選択</caption>
        <tr>
          <th>会社</th>
          <td>
            <div class="hideArea">
              <select class="condition_field"
                  m:id="companyCd"
                  m:value="#{mlCompletionregistDto.companyCd}"
                  m:items="#{mlCompletionregistDto.companyList}"
                  m:itemValue="companyCd"
                  m:itemLabel="companyName"
                  m:onchange="loadSibuList()">
                <option value=""></option>
              </select>
            </div>
            <a id="loadSibuList" m:action="#{mlCompletionregistCondAction.changeCompany}"/>
          </td>
        </tr>
        <tr>
          <th>支部</th>
          <td>
            <div class="hideArea">
              <select class="condition_field"
                  m:id="sibuCd"
                  m:value="#{mlCompletionregistDto.sibuCd}"
                  m:items="#{mlCompletionregistDto.sibuList}"
                  m:itemValue="sibuCd"
                  m:itemLabel="sibuName"
                  m:nullLabel=" ">
                <option value=""></option>
              </select>
            </div>
          </td>
        </tr>
        <tr>
          <th>オプション</th>
          <td>
            <input type="checkbox" m:id="optionFlg" m:value="#{mlCompletionregistDto.optionFlg}" checked="checked"/>エントリー者のみ表示
          </td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td align="right">
      <span m:rendered="#{ mlCompletionregistDto.haveTrainingLists }">
        <input type="button" value="実行" class="operation_button" m:action="#{mlCompletionregistCondAction.execute}"/>&nbsp;&nbsp;
        <input type="button" value="ダウンロード" m:action="#{csvDownloadAction.downloadCsv}"/>
      </span>
      <span m:rendered="#{ !mlCompletionregistDto.haveTrainingLists }">
        <input type="button" value="実行" class="operation_button"  disabled="disabled" m:passthrough="true"/>&nbsp;&nbsp;
        <input type="button" value="ダウンロード"  disabled="disabled" m:passthrough="true"/>
      </span>
    </td>
  </tr>
  <!-- 全クリアボタン -->
  <tr>
    <td align="right"><br/></td>
  </tr>
  <tr>
    <td align="left">
    <span m:rendered="#{ mlCompletionregistDto.allClear}">
		※上記条件に関係なく、このボタンで今年度のマスターライセンス更新研修情報が全クリアされます。
		<table>
		  <tr>
		    <td align="center">
		    <fieldset align="center" style="height:50px;">
				<legend align="center" style="color:#0044ff;">マスターライセンス更新研修情報</legend>
				<input type="button" value="全クリア" style="margin-top:4px;"
				       onClick="allClear(); return false;" onDblClick="return false;"
				       m:passthrough="true"/>
				<a id="allClear" m:action="#{mlCompletionregistCondAction.allClear}"/>
		      </fieldset>
		    </td>
		  </tr>
		</table>
	</span>
    </td>
  </tr>
</table>

</div>
<input type="text" m:id="dummyEnter" style="display:none" />
</form>
</span>

</body>
</html>