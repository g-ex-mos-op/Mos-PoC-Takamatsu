<html xmlns:m="http://www.seasar.org/maya" m:action="#{jikanBetuRefViewAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>時間帯別売上</title>
<span m:inject="f:param" m:name="layoutTitle" m:value="時間帯別売上"/>
<span m:inject="s:insert" m:name="bodyTitleName">■時間帯別売上</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="#{jikanBetuRefReqDto.viewId}"/>
<span m:inject="f:param" m:name="userTypeCd" m:value="#{jikanBetuRefSesDto.userTypeCd}"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject = "f:param" m:name = "msg" m:value="結果が表示されるまでに時間がかかります。よろしいですか？"/>
</head>
<body>
<span m:inject="s:insert" m:name="body" >
<STYLE type="text/css">
<!--
/* テーブルヘッダデフォルト設定 パターン２*/
/* テーブルヘッダのセンタリング用 */
table.body_table2 tr th{
  text-align            : center;
}
table.body_table2 tr.smallArea{
  font-size            : 11pt;
}
/* テーブル枠の設定 */
/* テーブルヘッダデフォルト設定 パターン１*/
table.body_table2 tr.defaultTR{
  background-color      : #FFFFCC;
}
table.body_table2 tr td{
  text-align            : right;
}
table.body_table2 tr td.leftArea{
  text-align            : left;
}
table.body_table2 tr td.centerArea{
  text-align            : center;
  font-weight           : bold;
}

/* 表：合計欄表示（タイプ１） */
.body_sum1 * td.*{
  background-color      : #FFD2E9;
}
/* 表：合計欄表示（タイプ５） */
.body_sum5 * td.*{
  background-color      : #FFC0A0;
}

.data_table_width {
    width:98%;
}
.width_Week {
    width:45px;
}
.width_TimeElem {
    width:70px;
}
.width_Time {
    width:58px;
}
.width_Kingaku {
    width:*;
}
.width_KingakuZen {
    width:100px;
}
.width_KingakuShubetu {
    width:95px;
}
.width_Kyakusu {
    width:75px;
}
.width_Hiritu {
	width:60px;
}
//-->
</STYLE>
<script type="text/javascript">
<!--
var userTypeHONBU = "01";
var userTypeONER = "02";
var userTypeMISE = "03";

function load(){
if(document.conditionForm != null && document.conditionForm.elements['conditionForm:windowId'] != null) {
		document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
		if(document.conditionForm.elements['downloadBt'] != null) {
			document.conditionForm.elements['downloadBt'].disabled = "";
		}
		var taishoJoken = "MISE";
		if (!isUserType(userTypeMISE)) {
  		    var changeElement = document.conditionForm.elements['conditionForm:taishoJoken'];
	        taishoJoken = changeElement.options[changeElement.selectedIndex].value;
	    }

		var kikanList = document.conditionForm.elements['conditionForm:taishoKikan'];
		var kikan = document.conditionForm.elements['conditionForm:selectTaishoKikan'].value;
		var lastIndex = kikanList.length-1;
	    if("MISE"!=taishoJoken) {

	    	if("KIKAN"!=kikan) {
	    		var lastSelectedIndex = kikanList.selectedIndex;
				//削除
				kikanList.options[lastIndex] = null;
				if(lastIndex==lastSelectedIndex) {
					kikanList.selectedIndex = 0;
					changeTaishoKikan(kikanList);
				}
			}
	    }else if("KIKAN"!=kikanList.options[lastIndex].value) {
			//追加
			kikanList.options[lastIndex+1] = new Option(document.conditionForm.kikanSiteiName.value,"KIKAN");
	    }else{
	    	changebotton(kikan,taishoJoken);
	    }
  	}
  	loadScrolls("conditionForm");
  	focusElement('conditionForm');
}

function changeTaishoJoken(changeElement){
    //選択した対象条件の値を取得します。
    var selectedCode = changeElement.options[changeElement.selectedIndex].value;
    //対象条件別表示対象プルダウン設定処理
    changeDisplay("select", "pdwn_taishoJoken_", selectedCode);
	var kikanList = document.conditionForm.elements['conditionForm:taishoKikan'];
	var lastIndex = kikanList.length-1;
    if("MISE"!=selectedCode) {
    	if("KIKAN"==kikanList.options[lastIndex].value) {
    		var lastSelectedIndex = kikanList.selectedIndex;
			//削除
			kikanList.options[lastIndex] = null;
			if(lastIndex==lastSelectedIndex) {
				kikanList.selectedIndex = 0;
				changeTaishoKikan(kikanList);
			}
		}
    }else if("KIKAN"!=kikanList.options[lastIndex].value) {
		//追加

		kikanList.options[lastIndex+1] = new Option(document.conditionForm.kikanSiteiName.value,"KIKAN");
    }
    //選択している期間指定の値を取得します。
    var taishoKikan = kikanList.options[kikanList.selectedIndex].value;
   	changeDisplay("div", "link1_",selectedCode+taishoKikan);
    changeDisplay("div", "link2_",taishoKikan);
	//表示対象プルダウンリストエレメント取得処理
	var	elementPullDown = getElement("select", "pdwn_taishoJoken_", selectedCode);
	if(elementPullDown != null) {
		elementPullDown.selectedIndex=0;
		if (isUserType(userTypeHONBU)) {
		    document.getElementById("conditionForm:miseCd").style.display="none";
		    document.getElementById("conditionForm:miseSchBt").style.display="none";
		}
	}
	if (isUserType(userTypeHONBU)){
		if("MISE" == selectedCode) {
		    document.getElementById("conditionForm:miseCd").style.display="inline";
			document.getElementById("conditionForm:miseSchBt").style.display="inline";
		    document.conditionForm.elements['conditionForm:honbuBlockCd'].style.display="none";
			focusElement("conditionForm");
		}else if("SIBU" == selectedCode) {
			document.getElementById("conditionForm:miseCd").style.display="none";
			document.getElementById("conditionForm:miseSchBt").style.display="none";
		    document.conditionForm.elements['conditionForm:honbuBlockCd'].style.display="inline";
		}else {
			document.getElementById("conditionForm:miseCd").style.display="none";
			document.getElementById("conditionForm:miseSchBt").style.display="none";
		    document.conditionForm.elements['conditionForm:honbuBlockCd'].style.display="none";
		}
    }
}

/**
 * 対象期間プルダウンリスト変更時処理
 *
 * 対象期間プルダウンの値毎に
 * 期間指定プルダウンの内容を変更される。
 */
function changeTaishoKikan(changeElement){
    //選択した対象期間の値を取得します。
    var selectedCode = changeElement.options[changeElement.selectedIndex].value;
    //対象期間別期間指定プルダウン設定処理
    changeDisplay("table", "pdwn_taishoKikan_", selectedCode);
	//期間指定プルダウンリストエレメント取得処理
	var	elementPullDown = getElement("select", "pdwn_taishoKikan_", selectedCode);
	//年月指定プルダウン初期化
	if(elementPullDown != null) {
		elementPullDown.selectedIndex=0;
	}
	var	elementPullDown = getElement("select", "pdwn_taishoKikan_", selectedCode+"TO");
	//期間指定プルダウン初期化
	if(elementPullDown != null) {
		elementPullDown.selectedIndex=0;
	}
    //選択した対象条件の値を取得します。
    if (!isUserType(userTypeMISE)) {
    	var elementTarget = document.conditionForm.elements['conditionForm:taishoJoken'];
        var taishoJoken = elementTarget.options[elementTarget.selectedIndex].value;
    }
    if("KIKAN"==selectedCode) {
    	changeDisplay("div", "link","KIKAN");
    	document.getElementById("syubetu_only").style.display="inline";
    	document.getElementById("link_all").style.display="none";
    	document.getElementById("conditionForm:chengebotton").style.display="none";

    }else{
   		changeDisplay("div", "link1_",taishoJoken+selectedCode);
    	changeDisplay("div", "link2_",selectedCode);
    	document.getElementById("syubetu_only").style.display="none";
    	document.getElementById("link_all").style.display="inline";
	   	document.getElementById("conditionForm:chengebotton").style.display="inline";
   	}
	var resultArea = document.getElementById("conditionForm:window");
	if(resultArea != null && "KIKAN" == selectedCode) {
  		document.getElementById("conditionForm:window").style.display = "none";
    }else if(resultArea != null && "MONTH" == selectedCode){
  		document.getElementById("conditionForm:window").style.display = "inline";
	}

}
/**
 * 検索ボタン押下時処理
 *
 */
function search(){
	if(returnLoadingStatus()){
		setJokenData();
		var userType = document.conditionForm.elements['conditionForm:userTypeCd'].value;
	    var elementTarget = document.conditionForm.elements['conditionForm:taishoKikan'];
	    var taishoKikan = elementTarget.options[elementTarget.selectedIndex].value;
			if(taishoKikan=="KIKAN"){
				document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:syubethuCsv';
				//自画面へリクエストする場合。
				document.conditionForm.target ="_self";
			}else{
				document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:search';
				if(document.conditionForm.elements['conditionForm:newWindowFlg'].value=='true') {
					//別ウィンドウフラグがチェックされている場合。
					document.conditionForm.target ="_blank";
					document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
				}else{
					//自画面へリクエストする場合。
					document.conditionForm.target ="_self";
					var resultArea = getElement("div", "pane_result", "");
					if(resultArea != null) {
					  	resultArea.style.display = "none";
					}
					document.getElementById("conditionForm:pane_waitmsg").style.display = "inline";
				}
			}
		document.conditionForm.submit();
	}
}
/**
 * タブ検索ボタン押下時処理
 *
 */
function searchTab(){
	if(returnLoadingStatus()){
		setJokenData();
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:search';
		if(document.conditionForm.elements['conditionForm:newWindowFlg'].value=='true') {
			//別ウィンドウフラグがチェックされている場合。
			document.conditionForm.target ="_blank";
			document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
		}else{
			//自画面へリクエストする場合。
			document.conditionForm.target ="_self";
			var resultArea = getElement("div", "pane_result", "");
			if(resultArea != null) {
			  	resultArea.style.display = "none";
			}
			document.getElementById("conditionForm:pane_waitmsg").style.display = "inline";
		}
		document.conditionForm.elements['conditionForm:tabSearchFlg'].value="TABSEARCH";
		document.conditionForm.submit();
	}
}
function changeTab(dataKbn) {
	if(document.conditionForm.elements['conditionForm:view_dataKbn'].value != dataKbn) {
		document.conditionForm.elements['conditionForm:dataKbn'].value=dataKbn;
		searchTab();
	}
}
/**
 * 集約メニューリンク押下時処理
 */
function linkUp(menuCd) {
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function returnLoadingStatus(){
	if(isLoadingFlgOFF()) {
		setLoadingFlg();
		return true;
	}
	return false;
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function isLoadingFlgOFF(){
	return (document.conditionForm.elements['conditionForm:loadingFlg'].value != "ON");
}
/**
 * 実行ボタン押下時処理
 *
 */
function callMiseForm(){
	if(returnLoadingStatus()){
		setJokenData();
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:callMiseForm';
		document.conditionForm.target ="_self";
		document.conditionForm.submit();
	}
}

/**
 * ユーザータイプ判別処理
 *
 */
function isUserType(code){
	var userType = document.conditionForm.elements['conditionForm:userTypeCd'].value;
	return (code == userType);
}
/**
 * ウィンドウロードフラグ設定処理
 *
 *
 */
function setLoadingFlg() {
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "ON";
}
/**
 * 検索条件値設定処理
 *
 */
function setJokenData(){
	var targetForm = document.conditionForm;
	//表示対象設定
	if (!isUserType(userTypeMISE)) {
	   var elementTarget = targetForm.elements['conditionForm:taishoJoken'];
       var taishoJoken = elementTarget.options[elementTarget.selectedIndex].value;
    }
    //プルダウンリストエレメント取得処理
    var hyojiTaisho = "";
    var tenpoShubetu = "";
    var blockCd = "";
    if("ALL"==taishoJoken) {
    	if(isUserType(userTypeHONBU)) {
    		tenpoShubetu = "1";
    	}
    	hyojiTaisho = "";
    }
    else if(isUserType(userTypeHONBU) && "MISE"==taishoJoken) {
    	hyojiTaisho = targetForm.elements["conditionForm:miseCd"].value;
    }
    else if(isUserType(userTypeMISE)) {
        hyojiTaisho = targetForm.elements['conditionForm:hyojiTaisho'].value;
	}
    else {
		var elementPullDown = getElement("select", "pdwn_taishoJoken_", taishoJoken);
		hyojiTaisho = elementPullDown.options[elementPullDown.selectedIndex].value;
    }

	if(isUserType(userTypeHONBU) && "SIBU"==taishoJoken) {
    	blockCd = targetForm.elements['conditionForm:honbuBlockCd'].value;
    	// 支部の場合は店舗種別を前年度対象とする
    	tenpoShubetu = "1";
    }

	targetForm.elements['conditionForm:tenpoShubetu'].value=tenpoShubetu;
	targetForm.elements['conditionForm:hyojiTaisho'].value=hyojiTaisho;
	targetForm.elements['conditionForm:blockCd'].value=blockCd;

    //選択した対象期間の値を取得します。
    var taishoKikan = targetForm.elements['conditionForm:taishoKikan'].value;
    targetForm.elements['conditionForm:selectTaishoKikan'].value=taishoKikan;
    var	elementPullDown = getElement("select", "pdwn_taishoKikan_", taishoKikan);
    var kikanSitei = "";
    //期間指定プルダウンリストエレメント取得処理
	if(elementPullDown != null) {
		kikanSitei = elementPullDown.options[elementPullDown.selectedIndex].value;
	}
	targetForm.elements['conditionForm:kikanSitei'].value=kikanSitei;
	if(taishoKikan=="KIKAN") {
    	var	elementPullDown = getElement("select", "pdwn_taishoKikan_", taishoKikan+"TO");
     	var kikanSiteiDay = "";
	   	if(elementPullDown != null) {
			kikanSiteiDay = elementPullDown.options[elementPullDown.selectedIndex].value;
		}
		targetForm.elements['conditionForm:kikansiteiday'].value=kikanSiteiDay;
    }
}
/**
 * エレメント取得処理
 */
function getElement(targetTag, firstCalssNm, targetCode) {
	var objsDiv = document.conditionForm.getElementsByTagName(targetTag);
	for (i = 0; i < objsDiv.length; i++) {
		var classNm = objsDiv[i].className;
		if(classNm.indexOf(firstCalssNm) >= 0){
			if(classNm.indexOf(targetCode) >= 0) {
				return elementPullDown = objsDiv[i];
			}
		}
	}
	return null;
}
/*
 * 条件フォーム用表示ステータス変更処理
 */
function changeDisplay(targetTag, firstClassNm, lastClassNm) {
	var objs = document.conditionForm.getElementsByTagName(targetTag);
	for (i = 0; i < objs.length; i++) {
		var classNm = objs[i].className;
		if(classNm.indexOf(firstClassNm)>=0){
			if("" != lastClassNm && classNm.indexOf(lastClassNm)>=0) {
				objs[i].style.display     = "inline";
			}else{
				objs[i].style.display   = "none";
			}
		}
	}
}
/*
 * プルダウン変更時のボタン、リンク制御
 */
function changebotton(taisyokikan,taishoJoken){
	var targetForm = document.conditionForm;
	if("KIKAN"==taisyokikan) {
    	changeDisplay("div", "link","KIKAN");
    	document.getElementById("syubetu_only").style.display="inline";
    	document.getElementById("link_all").style.display="none";
    	document.getElementById("conditionForm:chengebotton").style.display="none";
    }else{
   		changeDisplay("div", "link1_",taishoJoken+taisyokikan);
    	changeDisplay("div", "link2_",taisyokikan);
    	document.getElementById("syubetu_only").style.display="none";
    	document.getElementById("link_all").style.display="inline";
	   	document.getElementById("conditionForm:chengebotton").style.display="inline";
   	}
	var resultArea = document.getElementById("conditionForm:window");
	if(resultArea != null && "KIKAN" == taisyokikan) {
  		document.getElementById("conditionForm:window").style.display = "none";
    }else if(resultArea != null && "MONTH" == taisyokikan){
  		document.getElementById("conditionForm:window").style.display = "";
	}
}
//-->
</script>
<div m:rendered="#{jikanBetuRefSesDto.listCompany != null}">
	<form m:id="conditionForm" onKeyDown="return setDefaultSubmitButton('conditionForm','btnExecute');">
		<input type="hidden" id="viewId" m:value="#{jikanBetuRefReqDto.viewId}" />
		<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
		<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
		<input type="hidden" id="windowId" m:value="#{jikanBetuRefReqDto.windowId}"/>
		<input type="hidden" id="userTypeCd" m:value="#{jikanBetuRefReqDto.userTypeCd}" m:passthrough="true"/>
		<input type="hidden" id="loadingFlg" value=""/>
		<input type="hidden" id="companyCd" m:value="#{jikanBetuRefReqDto.companyCd}"/>
		<input type="hidden" id="tenpoShubetu" m:value="#{jikanBetuRefReqDto.tenpoShubetu}"/>
		<input type="hidden" id="csvDataKbn" m:value="#{jikanBetuRefReqDto.csvDataKbn}"/>
		<input type="hidden" id="dataKbn" m:value="#{jikanBetuRefReqDto.dataKbn}"/>
		<input type="hidden" id="taishoJokenTenpo" m:value="#{jikanBetuRefReqDto.taishoJoken}"/>
		<input type="hidden" id="tenpoNameKj" m:value="#{jikanBetuRefReqDto.tenpoName}"/>
	    <input type="hidden" id="jyokenMsg" m:value="#{msg}" m:passthrough="true"/>
	    <input type="hidden" name="kikanSiteiName" m:value="期間指定" m:passthrough="true"/>
		<a id="callMiseForm" m:action="#{jikanBetuRefViewAction.callMiseForm}"/>
		<a id="search" m:action="#{jikanBetuRefViewAction.search}"/>
		<table class="hiddenBody element_browser" style="margin-bottom:4px;">
		<tr>
			<td>
		<table class="body_table">
		    <tr>
				<th>対象条件</th>
				<td m:rendered="#{jikanBetuRefSesDto.userTypeCd != '03'}">
				    <div class="hideArea">
					    <select class="condition_field"
						    m:id="taishoJoken"
							m:value="#{jikanBetuRefReqDto.taishoJoken}"
							m:items="#{jikanBetuRefReqDto.listTaishoJoken}"
							m:itemValue="key"
							m:itemLabel="keyName"
							m:onchange="changeTaishoJoken(this)"
							name="jyoken">
							<option value="ALL">全店</option>
							<option value="SIBU">支部</option>
							<option value="MISE">個店</option>
						</select></div>
				</td>
				<td m:rendered="#{jikanBetuRefSesDto.userTypeCd == '03'}">
				    <div class="hideArea">
                        <span m:value="#{'MISE'==jikanBetuRefReqDto.taishoJoken?'店舗':''}"/></div>
				</td>
				 <th nowrap>
					 表示対象<input id="miseSchBt" type="button" value="検索"
					                onClick="callMiseForm();" onDblClick="return false;"
					                class="button_in_table"
					                style="#{('01'==jikanBetuRefReqDto.userTypeCd && 'MISE'==jikanBetuRefReqDto.taishoJoken) == true ? '' : 'display:none;'}"/>
				 </th>
				 <td style="min-width:1px" m:rendered="#{jikanBetuRefSesDto.userTypeCd != '03'}">
				    <div style="width:1px; font-size:0px;margin:0px; "></div>
					<div class="hideArea">
					<span m:inject="s:forEach" m:items="#{jikanBetuRefReqDto.listTaishoJoken}" m:var="listInfo" m:varindex="i">
						<select m:rendered="#{listInfo.listData !=null}" class="pdwn_taishoJoken_#{listInfo.key}"
							style="#{(listInfo.key==jikanBetuRefReqDto.taishoJoken) == true ? '' : 'display:none;'}"
							m:value="#{jikanBetuRefReqDto.hyojiTaisho}"
							m:items="#{listInfo.listData}"
							m:itemValue="hyojitaishoCd"
							m:itemLabel="hyojitaishoNameAddClose"
							>
						    <option value="011">北海道支部</option>
						    <option value="012">東北支部</option>
						    <option value="020">新潟・群馬・栃木支部</option>
						    <option value="022">埼玉支部</option>
						    <option value="023">千葉・茨城支部</option>
						    <option value="031">東京支部</option>
						    <option value="041">神奈川支部</option>
						    <option value="045">甲信支部</option>
						    <option value="046">静岡支部</option>
						    <option value="051">中京北陸支部</option>
						    <option value="061">関西支部</option>
						    <option value="071">中・四国支部</option>
						    <option value="072">九州支部</option>
						    <option value="075">沖縄支部</option>
						    <option value="076">東北販社</option>
						    <option value="077">北関東販社</option>
						    <option value="078">南関東販社</option>
						    <option value="079">関西販社</option>
						    <option value="080">九州販社</option>
						    <option value="081">直営本部</option>
						    <option value="082">ＭＬ事業本部ＦＣ支部</option>
						    <option value="083">ＭＬ事業本部直営支部</option>
						    <option value="084">第一業態開発グループ</option>
						    <option value="085">第二業態開発グループ</option>
						    <option value="092">部門</option>
						    <option value="093">子会社トモス</option>
						    <option value="094">子会社なか卯</option>
						    <option value="095">子会社その他</option>
						    <option value="096">外販事業</option>
						    <option value="097">関連事業</option>
						    <option value="098">その他１</option>
						    <option value="099">その他２</option>
						    <option value="100">ちりめん亭ＦＣ</option>
						    <option value="101">ちりめん亭ＲＣ</option>
						    <option value="102">四季菜ＦＣ</option>
						    <option value="103">四季菜ＲＣ</option>
						</select>
					</span>
					<select class="condition_field"
							m:rendered="#{('01'==jikanBetuRefReqDto.userTypeCd)}"
							style="#{('01'==jikanBetuRefReqDto.userTypeCd && 'SIBU'==jikanBetuRefReqDto.taishoJoken) == true ? '' : 'display:none;'}"
							m:id="honbuBlockCd"
							m:value="#{jikanBetuRefReqDto.blockCd}"
							m:items="#{jikanBetuRefReqDto.blockList}"
							m:itemValue="blockCd"
							m:itemLabel="blockName"
							m:nulllabel="全ブロック">
						<option value=""></option>
						<option value="001">Ａブロック</option>
						<option value="002">Ｂブロック</option>
						<option value="003">Ｃブロック</option>
						<option value="004">Ｄブロック</option>
						<option value="005">Ｅブロック</option>
						<option value="006">Ｆブロック</option>
						<option value="007">Ｇブロック</option>
						<option value="008">Ｈブロック</option>
						<option value="009">Ｉブロック</option>
						<option value="010">Ｊブロック</option>
						<option value="011">Ｋブロック</option>
						<option value="012">Ｌブロック</option>
						<option value="013">Ｍブロック</option>
						<option value="014">Ｎブロック</option>
						<option value="015">Ｏブロック</option>
					</select>
					<input m:rendered="#{('01'==jikanBetuRefReqDto.userTypeCd)}"
					       type="text" id="miseCd" m:value="#{'MISE'==jikanBetuRefReqDto.taishoJoken?jikanBetuRefReqDto.hyojiTaisho:''}"
					       class="imenotuse height_11" size="10" maxlength="5"
					       style="#{'MISE'==jikanBetuRefReqDto.taishoJoken? '' : 'display:none;'}"
					       m:passthrough="true"/>
					</div>
				</td>
				<td m:rendered="#{jikanBetuRefSesDto.userTypeCd == '03'}">
     				<div class="hideArea">
	     			    <span m:converter="#{characterEncodingConverter}" id="tenpoName" m:value="#{jikanBetuRefReqDto.tenpoName}"/></div>
				</td>
				<th>対象期間</th>
				<td>
				<div class="hideArea">
					<select class="condition_field"
							m:id="taishoKikan"
							m:value="#{jikanBetuRefReqDto.taishoKikan}"
							m:items="#{jikanBetuRefReqDto.listTaishoKikan}"
							m:itemValue="key"
							m:itemLabel="keyName"
							m:onchange="changeTaishoKikan(this)"
						>
						<option value="MONTH">対象年月</option>
						<option value="KIKAN">期間指定</option>
					</select></div>
				</td>
				<th>期間指定</th>
				<td>
					<div class="hideArea">
						<span m:inject="s:forEach" m:items="#{jikanBetuRefReqDto.listTaishoKikan}" m:var="listInfo" m:varindex="i">
							<table class="pdwn_taishoKikan_#{listInfo.key}"
							       style="border-width:0px;padding:0px;border-collapse:collapse;#{(listInfo.key==jikanBetuRefReqDto.taishoKikan) == true ? '' : 'display:none;'}">
								<tr><td style="border-width:0px;padding:0px;">
								<select class="pdwn_taishoKikan_#{listInfo.key}"
								m:value="#{jikanBetuRefReqDto.kikanSitei}"
								m:items="#{listInfo.listData}"
								m:itemValue="code"
								m:itemLabel="name"
								>
								<option value="20080501">2008/05</option>
								<option value="20080401">2008/04</option>
								<option value="20080301">2008/03</option>
								<option value="20080201">2008/02</option>
								<option value="20080101">2008/01</option>
							</select></td>
							<!--期間指定の場合-->
							<td m:rendered="#{'KIKAN'==listInfo.key}" style="border-width:0px;padding:0px;">～</td>
							<td m:rendered="#{'KIKAN'==listInfo.key}" style="border-width:0px;padding:0px;">
							<select class="pdwn_taishoKikan_#{listInfo.key}TO"
								m:value="#{jikanBetuRefReqDto.kikanSiteiTo}"
								m:items="#{listInfo.listData}"
								m:itemValue="code"
								m:itemLabel="name"
								>
								<option value="20080501">2008/05</option>
								<option value="20080401">2008/04</option>
								<option value="20080301">2008/03</option>
								<option value="20080201">2008/02</option>
								<option value="20080101">2008/01</option>
							</select></td>
							</tr></table></span></div>
				</td>
		    </tr>
		</table>
		</td>
		<td>&nbsp;<input type="button" id="chengebotton" name="conditionForm:btnExecute"
		             m:value="#{jikanBetuRefReqDto.searched==true?'再検索':'実行'}" class="operation_button"
		             onClick="document.conditionForm.elements['conditionForm:dataKbn'].value='WEEK';return search();"
		             onDblClick="return false;"/></td>
       </tr>
		</table>
<div m:id="pane_waitmsg" style="display:none">
<p/><span style="font-weight:bold;" m:value="検索しています。しばらくお待ち下さい・・・"/></div>
<div class="pane_result">
	<div class="scroll_padding_head">
	<div class="scroll_hidden margin_bottom_hidden">
	<table m:rendered="#{jikanBetuRefViewDto.existSearchedData}"
	       class="hiddenBody" style="width:98%;">
	   	<tr>
			<td>
				<table class="body_table2">
					<tr>
						<th>対象期間</th>
						<td><span m:converter="#{characterEncodingConverter}" m:value="#{jikanBetuRefViewDto.kikanSitei}"
						          m:converter="#{jikanBetuRefViewDto.taishoKikan =='MONTH'? dateCnvtKjYM:dateCnvtKjYM}"/></td>
						<span m:rendered="#{'ALL'!=jikanBetuRefViewDto.taishoJoken}">
						<th>表示対象</th>
						<td><span m:rendered="#{jikanBetuRefViewDto.hyojiTaisho != null && jikanBetuRefViewDto.hyojiTaisho != ''}">
								<span m:converter="#{characterEncodingConverter}" m:value="#{jikanBetuRefViewDto.hyojiTaisho}"/>&nbsp;</span><span m:converter="#{characterEncodingConverter}" m:value="#{jikanBetuRefViewDto.hyojiTaishoName}"/>

							<span m:rendered="#{jikanBetuRefSesDto.userTypeCd == '01' && jikanBetuRefViewDto.taishoJoken == 'SIBU'}">
								&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{jikanBetuRefViewDto.blockName}"/></span></td>
						</span>
						<span m:rendered="#{'ALL'==jikanBetuRefViewDto.taishoJoken || 'SIBU'==jikanBetuRefViewDto.taishoJoken}">
						<th>対象店舗数</th>
						<td align="right" width="50px"><span m:value="#{jikanBetuRefViewDto.taishoTenpoCnt}"
						                                     m:converter="#{numConverter}"/></td>
						</span>
					</tr>
				</table>
			<td m:rendered="#{jikanBetuRefSesDto.userTypeCd == '01' || jikanBetuRefSesDto.userTypeCd == '02'}"
			    id="window" align="right">
				<input type="checkbox" m:value="#{jikanBetuRefReqDto.newWindowFlg}"
				       onClick="document.conditionForm.elements['conditionForm:newWindowFlg'].value=this.checked;"/>別ウィンドウに表示
			</td>
			</td>
		</tr>
	  	<tr style="height:4px;"></tr>
	</table>
	<table cellspacing="0" cellpadding="0" class="element_browser data_table_width">
		<tr style="line-height:19px;">
		<td m:rendered="#{jikanBetuRefViewDto.existSearchedData}" width="150px" class="body_#{('WEEK'==jikanBetuRefViewDto.dataKbn) ? '' : 'non_'}active_tab">
			<a href="javaScript:void(0);"
			   onClick="changeTab('WEEK'); return false;" onDblClick="return false;"
			   m:passthrough="true" >曜日別</a></td>
		<td m:rendered="#{jikanBetuRefViewDto.existSearchedData}" width="150px" class="body_#{('SHUBETU'==jikanBetuRefViewDto.dataKbn) ? '' : 'non_'}active_tab">
			<a href="javaScript:void(0);"
			   onClick="changeTab('SHUBETU'); return false;" onDblClick="return false;"
			   m:passthrough="true" >種別</a></td>
		<td m:rendered="#{jikanBetuRefViewDto.existSearchedData}" width="*"/>
	    <td align="#{jikanBetuRefViewDto.existSearchedData?'right':''}">
	    <div class="hideArea" id="link_all" style="display:inline">
		ダウンロード：<a onClick="setJokenData();" onDblClick="return false" m:action="#{jikanBetuRefViewAction.downloadWeek}"><font title="曜日別CSVファイルのダウンロードを行います。">[曜日別]</font></a>
			&nbsp;<a onClick="setJokenData();" onDblClick="return false" m:action="#{jikanBetuRefViewAction.downloadSuiiNipo}"><font title="日別推移CSVファイルのダウンロードを行います。">[日別推移]</font></a>
			&nbsp;<a onClick="setJokenData();" onDblClick="return false" m:action="#{jikanBetuRefViewAction.downloadJikanbetu}"><font title="メニュー別CSVファイルのダウンロードを行います。">[メニュー別]</font></a>
			&nbsp;<a onClick="setJokenData();" onDblClick="return false" m:action="#{jikanBetuRefViewAction.downloadShubetu}"><font title="種別CSVファイルのダウンロードを行います。">[種別]</font></a>
		</div>
		<div class="hideArea" id="syubetu_only" style="display:none">
		ダウンロード：&nbsp;<a onClick="setJokenData();" onDblClick="return false" m:action="#{jikanBetuRefViewAction.downloadKikanShubetu}" id="syubethuCsv"><font title="種別CSVファイルのダウンロードを行います。">[種別]</font></a>
		</div>
		</td>
   		</tr>
   		<span m:rendered="#{jikanBetuRefViewDto.existSearchedData}">
		<tr class="body_active_tab" style="height:5px;"><td colspan="4"></td></tr>
		<tr m:rendered="#{'SHUBETU'==jikanBetuRefViewDto.dataKbn}">
			<td colspan="4" class="tab_area">
	    		<table cellspacing="0" cellpadding="0">
	    			<tr>
			    		<td width="150px" class="body_active_cell tab_change_area_0">
				    		<a href="javaScript:changeTabArea('0');loadScrolls('conditionForm');" m:passthrough="true" >売上</a></td>
			    		<td width="150px" class="body_non_active_cell tab_change_area_1">
				    		<a href="javaScript:changeTabArea('1');loadScrolls('conditionForm');" m:passthrough="true" >客数</a></td>
		   			</tr>
		    	</table>
		    </td>
		  </tr>
		<tr m:rendered="#{'SHUBETU'==jikanBetuRefViewDto.dataKbn}"
		    class="body_caption" style="height:5px;"><td colspan="4"></td></tr>
		</span>
	</table>
	</div>
	</div>
	<span m:rendered="#{jikanBetuRefViewDto.existSearchedData}">
		<span m:rendered="#{'WEEK'==jikanBetuRefViewDto.dataKbn}">
		<div class="element_print">【曜日別】</div>
			<div class="scroll_padding_head">
			<div class="scroll_hidden  margin_bottom_hidden">
			<table class="body_table2 data_table_width">
				<tr>
					<th class="width_Week">曜日</th>
					<th class="width_TimeElem">時間帯</th>
					<th class="width_Time">時間</th>
					<th class="width_Kingaku">売上</th>
					<th class="width_Hiritu">構成比</th>
					<th class="width_KingakuZen">前年売上</th>
					<th class="width_Hiritu">前年比</th>
					<th class="width_Kyakusu">客数</th>
					<th class="width_Kyakusu">前年客数</th>
					<th class="width_Hiritu">前年比</th>
					<th class="width_Kyakusu">客単価</th>
					<th class="width_Kyakusu">前年<br/>客単価</th>
					<th class="width_Hiritu">前年比</th>
				</tr>
			</table>
			</div>
			</div>
			<div class="scroll_padding_data">
			<div class="scroll_standby" style="height:	  358px;">
			<table class="body_table2 data_table_width"
			       style="border-top-width:0px;">
			    <span m:inject="s:forEach"
			          m:items="#{jikanBetuRefViewDto.listSearchData}" m:var="ui" m:varindex="i">
			      <tr class="#{ui.trCssClass} non_top_border">
					  <th m:rendered="#{(i%8)==0}" class="width_Week" rowspan="8">
						  <span m:value="#{ui.weekName}#{ui.weekType=='2'?'曜':''}"/><br/>平均
					  </th>
			          <td class="width_TimeElem leftArea"><span m:converter="#{characterEncodingConverter}" m:value="#{'TOTAL' == ui.rowType? '合計':ui.tmElemName}"/></td>
			          <td class="width_Time leftArea"><span m:converter="#{characterEncodingConverter}" m:value="#{'TOTAL' == ui.rowType? '':ui.tmName}"/></td>
					  <td class="width_Kingaku"><span m:value="#{ui.kingaku}" m:converter="#{numConverter}"/></td>
					  <td class="width_Hiritu #{ui.trCssClass=='default_bkgColor'?'body_num_n':''}"><span m:value="#{ui.kingakuKouseiHi}" m:converter="#{numCvtScale2}"/></td>
					  <td class="width_KingakuZen"><span m:value="#{ui.kingakuZen}" m:converter="#{numConverter}"/></td>
					  <td class="width_Hiritu #{ui.kingakuZennenHi >=100?(ui.trCssClass=='default_bkgColor'?'body_num_n':''):(ui.trCssClass=='default_bkgColor'?'body_hiritu_m':'body_hiritu')}"><span m:value="#{ui.kingakuZennenHi}" m:converter="#{numCvtScale2}"/></td>
					  <td class="width_Kyakusu"><span m:value="#{ui.kyakusu}" m:converter="#{numConverter}"/></td>
					  <td class="width_Kyakusu"><span m:value="#{ui.kyakusuZen}" m:converter="#{numConverter}" /></td>
					  <td class="width_Hiritu #{ui.kyakusuZennenHi >=100?(ui.trCssClass=='default_bkgColor'?'body_num_n':''):(ui.trCssClass=='default_bkgColor'?'body_hiritu_m':'body_hiritu')}"><span m:value="#{ui.kyakusuZennenHi}" m:converter="#{numCvtScale2}"/></td>
					  <td class="width_Kyakusu"><span m:value="#{ui.kyakutanka}" m:converter="#{numConverter}"/></td>
					  <td class="width_Kyakusu"><span m:value="#{ui.kyakutankaZen}" m:converter="#{numConverter}" /></td>
					  <td class="width_Hiritu #{ui.kyakutankaZennenHi >=100?(ui.trCssClass=='default_bkgColor'?'body_num_n':''):(ui.trCssClass=='default_bkgColor'?'body_hiritu_m':'body_hiritu')}"><span m:value="#{ui.kyakutankaZennenHi}" m:converter="#{numCvtScale2}"/></td>
					</tr>
				</span>
			</table>
			</div>
			</div>
		</span>
		<span m:rendered="#{'SHUBETU'==jikanBetuRefViewDto.dataKbn}">
			<div class="element_print">種別【売上】</div>
			<div class="scroll_padding_head">
			<div class="scroll_hidden  margin_bottom_hidden">
				<table class="body_table2 data_table_width">
					<tr style="line-height:16px">
						<th class="width_Week">曜日</th>
						<th class="width_TimeElem">時間帯</th>
						<th class="width_Time">時間</th>
						<th class="width_Kingaku">合計</th>
						<th class="width_Hiritu" style="font-size:10pt;">時間帯<br/>構成比</th>
						<th class="width_KingakuShubetu">Ｅ／Ⅰ</th>
						<th class="width_KingakuShubetu">Ｔ／Ｏ</th>
						<th class="width_KingakuShubetu">ＴＥＬ</th>
						<th class="width_KingakuShubetu">Ｄ／Ｔ</th>
						<th class="width_KingakuShubetu">宅配</th>
						<th class="width_KingakuShubetu" style="font-size:11pt;">外販・その他</th>
					</tr>
				</table>
			</div>
			</div>
			<div class="tab_change_area_0 visible_tab">
			<div class="scroll_padding_data">
			<div class="scroll_standby" style="height:330px;">
			<table class="body_table2 data_table_width"
			       style="border-top-width:0px;">
			    <span m:inject="s:forEach"
			          m:items="#{jikanBetuRefViewDto.listSearchData}" m:var="ui" m:varindex="i">
			      <tr class="#{ui.trCssClass} non_top_border">
					  <th m:rendered="#{i%9==0}" class="width_Week" rowspan="9">
						  <span m:value="#{ui.weekName}#{ui.weekType=='2'?'曜':''}"/><br/>平均</th>
					  <td m:rendered="#{i%9==0}" colspan="2" class="centerArea">合計</td>
					  <td m:rendered="#{(i%9-1)==0}" colspan="2" class="centerArea">種別構成比</td>
			          <td m:rendered="#{i%9!=0 && (i%9-1)!=0}" class="leftArea width_TimeElem"><span m:converter="#{characterEncodingConverter}" m:value="#{ui.tmElemName}"/></td>
			          <td m:rendered="#{i%9!=0 && (i%9-1)!=0}" class="leftArea width_Time"><span m:converter="#{characterEncodingConverter}" m:value="#{ui.tmName}"/></td>
					  <td class="width_Kingaku"><span m:value="#{ui.kingaku}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
					  <td class="width_Hiritu #{ui.trCssClass=='default_bkgColor'?'body_num_n':''}"><span m:rendered="#{(i%9-1)==0}"><div class="style_height">***</div></span><span m:rendered="#{(i%9-1)!=0}" m:value="#{ui.kingakuKouseiHi}" m:converter="#{numCvtScale2}"/></td>
					  <td class="width_KingakuShubetu"><span m:value="#{ui.kingakuEat}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
					  <td class="width_KingakuShubetu"><span m:value="#{ui.kingakuTake}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
					  <td class="width_KingakuShubetu"><span m:value="#{ui.kingakuTel}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
					  <td class="width_KingakuShubetu"><span m:value="#{ui.kingakuDrive}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
					  <td class="width_KingakuShubetu"><span m:value="#{ui.kingakuTakuhai}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
					  <td class="width_KingakuShubetu"><span m:value="#{ui.kingakuEtc}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
					</tr>
				</span>
			</table>
			</div>
			</div>
			</div>
			<div class="element_print">種別【客数】</div>
			<table class="element_print body_table2 data_table_width">
				<tr>
					<th class="width_Week">曜日</th>
					<th class="width_TimeElem">時間帯</th>
					<th class="width_Time">時間</th>
					<th class="width_Kingaku">合計</th>
					<th class="width_Hiritu" style="font-size:10pt;">時間帯<br/>構成比</th>
					<th class="width_KingakuShubetu">Ｅ／Ⅰ</th>
					<th class="width_KingakuShubetu">Ｔ／Ｏ</th>
					<th class="width_KingakuShubetu">ＴＥＬ</th>
					<th class="width_KingakuShubetu">Ｄ／Ｔ</th>
					<th class="width_KingakuShubetu">宅配</th>
					<th class="width_KingakuShubetu" style="font-size:11pt;">外販・その他</th>
				</tr>
			</table>
			<div class="tab_change_area_1 invisible_tab">
			<div class="scroll_padding_data">
				<div class="scroll_standby" style="height:330px;">
				<table class="body_table2 data_table_width" style="border-top-width:0px;">
				    <span m:inject="s:forEach" m:items="#{jikanBetuRefViewDto.listSearchData}" m:var="ui" m:varindex="i">
				      <tr class="#{ui.trCssClass} non_top_border">
						  <th m:rendered="#{i%9==0}" class="width_Week" rowspan="9">
							  <span m:value="#{ui.weekName}#{ui.weekType=='2'?'曜':''}"/><br/>平均</th>
						  <td m:rendered="#{i%9==0}" colspan="2" class="centerArea">合計</td>
						  <td m:rendered="#{(i%9-1)==0}" colspan="2" class="centerArea">種別構成比</td>
				          <td m:rendered="#{i%9!=0 && (i%9-1)!=0}" class="width_TimeElem leftArea"><span m:converter="#{characterEncodingConverter}" m:value="#{ui.tmElemName}"/></td>
				          <td m:rendered="#{i%9!=0 && (i%9-1)!=0}" class="width_Time leftArea"><span m:converter="#{characterEncodingConverter}" m:value="#{ui.tmName}"/></td>
						  <td class="width_Kingaku"><span m:value="#{ui.kyakusu}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
						  <td class="width_Hiritu #{ui.trCssClass=='default_bkgColor'?'body_num_n':''}"><div class="style_height"><span m:value="#{(i%9-1)==0?'***':ui.kyakusuKouseiHi}" m:converter="#{numCvtScale2}"/></div></td>
						  <td class="width_KingakuShubetu"><span m:value="#{ui.kyakusuEat}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
						  <td class="width_KingakuShubetu"><span m:value="#{ui.kyakusuTake}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
						  <td class="width_KingakuShubetu"><span m:value="#{ui.kyakusuTel}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
						  <td class="width_KingakuShubetu"><span m:value="#{ui.kyakusuDrive}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
						  <td class="width_KingakuShubetu"><span m:value="#{ui.kyakusuTakuhai}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
						  <td class="width_KingakuShubetu"><span m:value="#{ui.kyakusuEtc}" m:converter="#{((i%9-1)==0)?numCvtScale2:numConverter}"/></td>
						</tr>
					</span>
				</table>
				</div>
				</div>
			</div>
		</span>
	</span>
</div>
		<input type="hidden" id="newWindowFlg" m:value="#{jikanBetuRefReqDto.newWindowFlg}"/>
		<input type="hidden" id="hyojiTaisho" m:value="#{jikanBetuRefReqDto.hyojiTaisho}"/>
		<input type="hidden" id="blockCd" m:value="#{jikanBetuRefReqDto.blockCd}"/>
		<input type="hidden" id="selectTaishoKikan" m:value="#{jikanBetuRefReqDto.taishoKikan}"/>
		<input type="hidden" id="kikanSitei" m:value="#{jikanBetuRefReqDto.kikanSitei}"/>
		<input type="hidden" id="taishoKikanDay" m:value="#{jikanBetuRefReqDto.taishoKikanDay}"/>
		<input type="hidden" id="kikansiteiday" m:value="#{jikanBetuRefReqDto.kikanSiteiTo}"/>
		<input type="hidden" id="tabSearchFlg" m:value="#{jikanBetuRefReqDto.tabSearchFlg}"/>
		<input type="hidden" id="view_viewId" m:value="#{jikanBetuRefViewDto.viewId}" />
		<input type="hidden" id="view_windowId" m:value="#{jikanBetuRefViewDto.windowId}"/>
		<input type="hidden" id="view_companyCd" m:value="#{jikanBetuRefViewDto.companyCd}"/>
		<input type="hidden" id="view_taishoJoken" m:value="#{jikanBetuRefViewDto.taishoJoken}"/>
		<input type="hidden" id="view_hyojiTaisho" m:value="#{jikanBetuRefViewDto.hyojiTaisho}"/>
		<input type="hidden" id="view_taishoKikan" m:value="#{jikanBetuRefViewDto.taishoKikan}"/>
		<input type="hidden" id="view_kikanSitei" m:value="#{jikanBetuRefViewDto.kikanSitei}"/>
		<input type="hidden" id="view_dataKbn" m:value="#{jikanBetuRefViewDto.dataKbn}"/>
		<input type="text" m:id="dummyEnter" style="display:none"/>
	</form>
</div>
</span>
</body>
</html>
