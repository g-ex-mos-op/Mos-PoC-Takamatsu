<html xmlns:m="http://www.seasar.org/maya" m:action="#{contactRegistSearchAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j"/>
<title>連絡登録</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="連絡登録"/>
<span m:inject="s:insert" m:name="bodyTitleName">■連絡登録</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BIF001V01"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject="s:insert" m:name="body">
<script type="text/javascript">
<!--
function load() {
	loadScroll("contactScroll", 405);
	var elementName = document.focusElementForm.elements["FOCUS_ELEMENT"].value;
	if(elementName == "") {
		var listSize = document.contactRegistSearch.elements["LIST_SIZE"].value;
		var targetIndex = document.contactRegistSearch.elements["SELECTED_INDEX"].value;
		if(listSize>0 && targetIndex > 6) {
			//スクロールエリアの一番下へフォーカスを当てる。
			document.location.hash = "bottomscroll";
			//選択していたラジオボタンの行フォーカスを当てる。
			document.location.hash = "forcusPoint"+targetIndex;
			return;
		}
	}
	else {
		focusElement("contactRegistSearch");
	}
}
function download(index) {
	document.contactRegistSearch.elements["contactRegistSearch:downloadIndex"].value=index;
}
-->
</SCRIPT>
<STYLE type="text/css">
<!--
table.body_table2 {
	width				: 98%;
}
/** 選択ラジオボタン幅 */
.col_select {
	width				: 30px;
	text-align			: center;
}
/** タイトル幅 */
.col_title {
	width				: *;
}
/** 関連ファイル幅 */
.col_listattachfile {
	width				: 340px;
}
/** 発信元幅 */
.col_puborgname {
	width				: 170px;
}
/** 公開開始日 */
.col_pubdate {
	width				: 85px;
}
-->
</STYLE>
<form m:id="contactRegistSearch">

<table width="100%" cellpadding="0" cellspacing="0" >
	<tr>
	    <td align="left" width="100px">
	        <input type="submit" value="新規登録" class="operation_button" m:action="#{contactRegistSearchAction.startRegist}"/>
	    </td>
		<td align="left" width="200px" m:rendered="#{contactRegistListDto.contactListSize > 0}">
			<input type="submit" value="編集" m:action="#{contactRegistSearchAction.startUpdate}"/>
			<input type="submit" value="削除" m:action="#{contactRegistSearchAction.startDelete}"/>
		</td>
		<td align="right" m:rendered="#{contactRegistListDto.contactListSize > 0}">
			<input type="submit" value="最初へ" m:action="#{contactRegistSearchAction.changePage}" m:disabled="#{contactRegistListDto.firstPage}">
				<span m:inject="f:param" m:name="selectPageNumber" m:value="#{contactRegistListDto.firstPageNumber}"/>
			</input>
			<input type="submit" value="前へ" m:action="#{contactRegistSearchAction.changePage}" m:disabled="#{!contactRegistListDto.existPreviousPage}">
				<span m:inject="f:param" m:name="selectPageNumber" m:value="#{contactRegistListDto.previousPageNumber}"/>
			</input>
			<input type="submit" value="次へ" m:action="#{contactRegistSearchAction.changePage}" m:disabled="#{!contactRegistListDto.existNextPage}">
				<span m:inject="f:param" m:name="selectPageNumber" m:value="#{contactRegistListDto.nextPageNumber}"/>
			</input>
			<input type="submit" value="最後へ" m:action="#{contactRegistSearchAction.changePage}" m:disabled="#{contactRegistListDto.lastPage}">
				<span m:inject="f:param" m:name="selectPageNumber" m:value="#{contactRegistListDto.lastPageNumber}"/>
			</input>
			<span m:value="#{contactRegistListDto.currentPageNumber}"/>／<span m:value="#{contactRegistListDto.lastPageNumber}"/>ページ
		</td>
	</tr>
</table>

<input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
<input type="hidden" name="LIST_SIZE" m:value="#{contactRegistListDto.contactListSize}" m:passthrough="true"/>
<input type="hidden" name="SELECTED_INDEX" m:value="#{contactRegistListDto.selectedIndex}" m:passthrough="true"/>
<input type="hidden" m:id="downloadIndex" m:value="#{contactRegistListDto.downloadIndex}"/>

<table class="hiddenBody" style="margin-top:4px;">
<tr>
	<td>
	<table class="body_table">
	    <tr>
	        <th>カテゴリー選択</th>
	        <td>
	        	<div class="hideArea">
		            <select m:value="#{contactRegistListDto.inputCategoryId}"
		                    m:items="#{contactRegistDto.categoryList}"
		                    m:itemValue="cateId"
		                    m:itemLabel="cateName">
		                <option value="">全社</option>
		                <option value="">モスフードサービス</option>
		            </select>
	            </div>
	        </td>
	        <th>対象年月</th>
	        <td>
	        	<div class="hideArea">
		            <select m:value="#{contactRegistListDto.inputTargetDate}"
		                    m:items="#{contactRegistDto.targetDateList}"
		                    >
		                <option value="200708">2007/08</option>
		                <option value="200707">2007/07</option>
		                <option value="200706">2007/06</option>
		            </select>
	            </div>
	        </td>
	    </tr>
	</table>
</td>
<td>
	&nbsp;<input type="submit" value="検索"  m:action="#{contactRegistSearchAction.search}"/>
</td>
</tr>
</table>

<div m:rendered="#{contactRegistListDto.contactListSize > 0}">
<div class="scroll_padding_head">
<div class="scroll_hidden">
<table class="body_table2" style="margin-top:4px;">
	<colgroup>
		<col class="col_select"/>
		<col class="col_pubdate"/>
		<col class="col_title"/>
		<col class="col_listattachfile"/>
		<col class="col_puborgname"/>
	</colgroup>
	<tr class="header_row">
	<th></th>
	<th style="font-size:11pt;">公開開始日</th>
	<th>タイトル</th>
	<th>ファイル</th>
	<th>発信元</th>
	</tr>
</table>
</div>
</div>
<div class="scroll_padding_data">
<div class="scroll_standby" id="contactScroll">
<div m:inject="s:selectOneRadio2" m:value="#{contactRegistListDto.selectedIndex}" m:required="true">
<table class="body_table2" style="border-top-width:0px">
	<colgroup>
		<col class="col_select"/>
		<col class="col_pubdate"/>
		<col class="col_title"/>
		<col class="col_listattachfile"/>
		<col class="col_puborgname"/>
	</colgroup>
    <div m:inject="s:forEach" m:items="#{contactRegistListDto.contactList}" m:var="e" m:varindex="i">
	<tr class="non_top_border" style="#{e.listAttachFileSize != 0?'line-height:24px;':''}">
		<td align="center"><input type="radio" m:value="#{i}"/><a name="forcusPoint#{i}"  m:passthrough="true"/></td>
		<td class="font_size_14"><span m:value="#{e.pubDate}" m:converter="#{dateConverter}"/></td>
		<td><span m:converter="#{characterEncodingConverter}" m:value="#{e.title}"/></td>
		<td>
			<div m:rendered="#{e.listAttachFileSize != 0}">
				<div  class="hideArea">
					<select
							m:value="#{e.downloadAttachIndex}"
							m:items="#{e.listAttachFile}"
							m:itemValue="value"
							m:itemLabel="label"
							m:nullLabel="">
						<option value="">添付ファイル１</option>
						<option value="">添付ファイル２</option>
						<option value="">添付ファイル３</option>
					</select>
				</div>
				<input type="button" value="ダウンロード" class="operation_button" m:onclick="download(#{i})" m:action="#{contactRegistDownloadTenpuAction.download}"/>
			</div>
		</td>
		<td><span m:converter="#{characterEncodingConverter}" m:value="#{e.pubOrgName}"/></td>
	</tr>
	</div>
</table>
</div>
<a name="bottomscroll"  m:passthrough="true"/>
</div>
</div>
</div>
<input type="text" m:id="dummyEnter" style="display:none"/>
</form>
</span>
</body>
</html>
