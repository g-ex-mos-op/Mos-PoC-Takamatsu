<html xmlns:m="http://www.seasar.org/maya" m:action="#{formRegistAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>情報共有（フォーム登録）（編集画面）</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="情報共有（フォーム登録）（編集画面）"/>
<span m:inject="f:param" m:name="onLoadName" m:value=""/>
<!-- 「申請書・依頼書・フォーム登録」 または　「申請書・依頼書・フォーム登録　編集」 -->
<span m:inject="s:insert" m:name="bodyTitleName">■情報共有（フォーム登録）（編集画面）</span>

<span m:inject="f:param" m:name="viewIdValue" m:value="BOF001V02"/>
<span m:inject="s:insert" m:name="body">
<SCRIPT LANGUAGE="javascript">
<!--
function onChangeCate() {
    document.formRegist.elements['formRegist:__link_clicked__'].value='formRegist:changeCategory';
	document.forms['formRegist'].submit();
	return false;
}
function load(){
}
function upload(index) {
	document.formRegist.elements["formRegist:uploadIndex"].value=index;
}
function downloadKanren(index) {
	document.formRegist.elements["formRegist:downloadKanrenIndex"].value=index;
}
//-->
</SCRIPT>
<STYLE type="text/css">
<!--
table.body_table2 tr td.putInnerTable, table.body_table2 tr th.putInnerTable {
	padding:0px;
}
table.body_table2 tr td.putInnerTable table.body_table2, table.body_table2 tr th.putInnerTable table.body_table2 {
	width        :100%;
	border-width :0px;
	margin       :-1px;
	border-spacing:0px;
}
table.body_table2 tr td.putInnerTable table.body_table2 tr td, table.body_table2 tr th.putInnerTable table.body_table2 tr th{
	border-right-width :0px;
}
-->
</STYLE>

<form m:id="formRegist" enctype="multipart/form-data" onKeyDown="return setDefaultSubmitButton('formRegist','dummyEnter');">
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" m:id="uploadIndex" m:value="#{formRegistFormDto.uploadIndex}"/>
	<input type="hidden" m:id="downloadKanrenIndex" m:value="#{formRegistFormDto.downloadKanrenIndex}"/>
	<input type="button" value="戻る" class="operation_button" m:action="#{formRegistAction.cancel}"/>&nbsp;
	<input type="button" value="確認" class="operation_button" m:action="#{formRegistAction.regist}"/>&nbsp;
    <a m:id="changeCategory" m:action="#{formRegistAction.changeCategory}"/>
<!-- フォーム内容 -->
	<table class="body_table2" style="width:885px;margin-top:4px;border-bottom-width:0px;">
	<tr>
		<th width="160px">登録モード</th>
		<td colspan="4" width="*">
			<span m:converter="#{characterEncodingConverter}" m:value="#{formConditionDto.regModeName}"/>
		</td>
	</tr>
	<tr>
		<th>カテゴリー</th>
		<td colspan="2">
			<div class="hideArea">
				<select  id="cate"
						m:value="#{uiFormInfo.cateId}"
						m:items="#{formRegistFormDto.listCategory}"
						m:itemValue="cateId"
						m:itemLabel="cateName"
						m:onchange="onChangeCate()">
					<option value="">カテゴリ１</option>
					<option value="">カテゴリ２</option>
					<option value="">カテゴリ３</option>
				</select>
			</div>
		</td>

		<th class="width_130">サブカテゴリー</th>
		<td width="259px">
			<div class="hideArea">
				<select  id="subcate"
								m:value="#{uiFormInfo.subCateId}"
								m:items="#{formRegistFormDto.listSubCategory}"
								m:itemValue="subCateId"
								m:itemLabel="subCateName">
							<option value="">サブカテゴリ１</option>
							<option value="">サブカテゴリ２</option>
							<option value="">サブカテゴリ３</option>
						</select>
			</div>
		</td>
	</tr>
	<tr>
		<th>タイトル</th>
		<td colspan="4">
			<input id="formtitle" class="imeon width_580 width_530" type="text" m:value="#{uiFormInfo.title}" m:maxlength="40" m:size="100"/>
		</td>
	</tr>
	<tr>
		<th>説明</th>
		<td colspan="4">
			<textarea class="width_600 width_560" m:rows="5" m:id="discription" m:cols="75" wrap="soft" m:value="#{uiFormInfo.discription}" m:converter="#{formRegistChangeLineEditConverter}"></textarea>
		</td>
	</tr>
	<tr>
		<th rowspan="2">ファイル登録</th>
		<td colspan="4" class="putInnerTable">
			<div class="divManeTableLeft">
				<span m:inject="x:inputFileUpload" id="uploadFile"
				          m:value="#{formRegistFormDto.uploadedMainFile}"
				          m:size="80" m:disabled="#{!formRegistFormDto.addMainFile}"></span>
			</div>
			<div class="divManeTable">
				<input type="button" value="決定" m:onclick="upload(1)"
					       m:action="#{formRegistAction.uploadMainFile}"
					       m:disabled="#{!formRegistFormDto.addMainFile}"/>
			</div>
		</td>
	</tr>
	<tr>
		<td colspan="4" class="putInnerTable">
			<div class="divManeTableLeft">
				<span m:converter="#{characterEncodingConverter}" m:value="#{uiFormInfo.fileName}"></span>
			</div>
			<div class="divManeTable">
				<input type="button" value="削除" m:onclick="upload(1)"
			           m:action="#{formRegistAction.deleteMainFile}"/>
			 </div>
		</td>
	</tr>
	<tr>
		<th rowspan="#{formRegistFormDto.listKanrenBunshoSize+1}" >既存文書にリンク</th>
		<th style="width:20px;"></th>
		<th colspan="3">タイトル
			<input type="button" m:value="リンクファイル選択" m:action="#{formRegistAction.callFormKanrenBunsho}"/>
			<input type="button" m:value="削除" m:action="#{formRegistAction.deleteKanrenBunsho}"/>
		</th>
	</tr>
	<div m:inject="s:forEach" m:items="#{formRegistFormDto.listKanrenBunsho}" m:var="e" m:varindex="i">
		<tr>
			<td style="width:20px;text-align:center;"><input type="checkbox" m:value="#{e.checkedDoc}"/></td>
			<td colspan="3" align="left">
				<a m:action="#{downloadFormRegistActionKanren.download}"
				   onClick="downloadKanren(#{i})"><span m:converter="#{characterEncodingConverter}" m:value="#{e.title}"/></a></td>
		</tr>
	</div>

	<tr>
	    <th rowspan="5" width="160px">添付ファイル登録</th>
	    <th colspan="2" width="321px">添付ファイルタイトル</th>
	    <td colspan="2" widht="392px"></td>
	</tr>
	<tr><td colspan="2"><input class="imeon width_280" type="text" id="uploadFileTenpuTitle"
	               m:value="#{formRegistFormDto.attachName}"
	               m:maxlength="40" m:size="53"/></td>
		<td colspan="2" nowrap="true">
			<span m:converter="#{characterEncodingConverter}" m:inject="x:inputFileUpload" id="uploadFileTenpu" m:value="#{formRegistFormDto.uploadedAttachFile}"
			      m:size="33" m:disabled="#{!formRegistFormDto.addAttachFile}"/>
			<input type="button" type="button" value="決定" m:action="#{formRegistAction.uploadAttachFile}" m:disabled="#{!formRegistFormDto.addAttachFile}"/>&nbsp;
			<input type="button" type="button" value="削除" m:action="#{formRegistAction.deleteAttachFile}"/>

		</td>
	</tr>
	<tr>
		<td align="center" width="20px">
			<input type="checkbox" m:value="#{formRegistFormDto.cmbDelFlg1}" title=""/></td>
		<td width="298px"><span m:converter="#{characterEncodingConverter}" m:value="#{uiFormInfo.attachName1}"/></td>
		<td colspan="2" width="385px"><span m:converter="#{characterEncodingConverter}" m:value="#{uiFormInfo.attachFl1}"/></td>
	</tr>
	<tr>
		<td align="center">
		<input type="checkbox" m:value="#{formRegistFormDto.cmbDelFlg2}" title=""/></td>
		<td><span m:converter="#{characterEncodingConverter}" m:value="#{uiFormInfo.attachName2}"/></td>
		<td colspan="2"><span m:converter="#{characterEncodingConverter}" m:value="#{uiFormInfo.attachFl2}"/></td>
	</tr>
	<tr>
		<td align="center">
		<input type="checkbox" m:value="#{formRegistFormDto.cmbDelFlg3}" title=""/></td>
		<td><span m:converter="#{characterEncodingConverter}" m:value="#{uiFormInfo.attachName3}"/></td>
		<td colspan="2"><span m:converter="#{characterEncodingConverter}" m:value="#{uiFormInfo.attachFl3}"/></td>
	</tr>
</table>
<table class="body_table2" style="width:885px;border-top-width:0px;">
	<tr class="non_top_border">
		<th colspan="2" width="160px">掲載期間FROM</th>
		<td width="105px">
			<div class="hideArea">
				<select  id="keisaiFrom"
						m:value="#{uiFormInfo.pubDateFrom}"
						m:items="#{formRegistFormDto.listFrom}"
						m:itemValue="value"
						m:itemLabel="label" >
					<option value="">2006/01/01</option>
				</select>
			</div>
		</td>
		<th width="105px">掲載期間TO</th>
		<td width="105px">
			<div class="hideArea">
				<select  id="keisaiTo"
						m:value="#{uiFormInfo.pubDateTo}"
						m:items="#{formRegistFormDto.listTo}"
						m:itemValue="value"
						m:itemLabel="label" >
					<option value="">2006/01/01</option>
				</select>
			</div>
		</td>
		<th width="109px" >登録者</th>
		<td><span m:converter="#{characterEncodingConverter}" m:value="#{uiFormInfo.userNameKj}"/></td>
	</tr>
	<tr>
		<th rowspan="5" style="width:70px;">公開対象</th>
		<th width="87px">会社</th>
		<td colspan="3" width="321px">
		    <div m:inject="s:forEach" m:items="#{publicTargetSearchDto.listTrnControlCompany}" m:var="e" m:varindex="i">
		    	<div><span m:converter="#{characterEncodingConverter}" m:value="#{e.companyName}"/></div>
		    </div>
		</td>
		<td rowspan="5" width="109px">
			<input type="button" m:value="公開対象選択" m:action="#{formRegistAction.callFormKokai}"/>
		</td>
		<td rowspan="5"></td>
	</tr>
	<tr>
		<th>所属</th>
		<td colspan="3">
		    <div m:inject="s:forEach" m:items="#{publicTargetSearchDto.listTrnControlShozoku}" m:var="e" m:varindex="i">
		    	<div><span m:converter="#{characterEncodingConverter}" m:value="#{e.shozokuName}"/></div>
		    </div>
		</td>
	</tr>
	<tr>
		<th>業態</th>
		<td colspan="3">
		    <div m:inject="s:forEach" m:items="#{publicTargetSearchDto.listTrnControlGyotai}" m:var="e" m:varindex="i">
		    	<div><span m:converter="#{characterEncodingConverter}" m:value="#{e.gyotaiKbnName}"/></div>
		    </div>
		</td>
	</tr>
	<tr>
		<th>業態別設定</th>
		<td colspan="3">
			<div m:rendered="#{publicTargetSearchDto.listTrnControlGyotaiKobetuSize > 0}">有</div>
			<div m:rendered="#{publicTargetSearchDto.listTrnControlGyotaiKobetuSize <= 0}">無</div>
		</td>
	</tr>
	<tr>
		<th>個店別設定</th>
		<td colspan="3">
            <div m:rendered="#{publicTargetSearchDto.listTrnControlGyotaiTenpoSize > 0}">
                <span style="float:left;">有</span>
                <span style="float:right;"><input type="button"  m:value="指定店舗ダウンロード" m:action="#{formregistCsvAction.download}"/></span>
                <span style="clear:both;"/>
            </div>
			<div m:rendered="#{publicTargetSearchDto.listTrnControlGyotaiTenpoSize <= 0}">無</div>
		</td>
	</tr>

</table>



<script type="text/javascript">
<!--
	focusElement("formRegist");
-->
</script>

<input type="text" m:id="dummyEnter" style="display:none">

</form>
</span>
</body>
</html>
