<html xmlns:m="http://www.seasar.org/maya" m:action="#{roleActConditionAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title></title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="ロール別アクセス権限設定"/>
<span m:inject="s:insert" m:name="bodyTitleName">■ロール別アクセス権限設定</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BSA007V01"/>
<span m:inject="s:insert" m:name="body">
<STYLE type="text/css">
<!--
/* テーブルヘッダデフォルト設定 パターン２*/
/* テーブルヘッダのセンタリング用 */
table.body_table2{
  width:450px;
}
.scroll_area {
	width:	  470px;
	height:	  395px;
	overflow: auto;
}
-->
</STYLE>
<SCRIPT LANGUAGE="javascript">
<!--
function loadChangeList(){
	document.forms['roleActCondition'].elements['roleActCondition:__link_clicked__'].value='roleActCondition:loadList';
	document.forms['roleActCondition'].submit();
	return false;
}

function clearForm(formobj) {
    for (i = 0; i < formobj.elements.length; i++) {
        if (formobj.elements[i].type == "text") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "textarea") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "file") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "password") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "checkbox") {
            formobj.elements[i].checked = formobj.elements[i].defaultChecked;
            formobj.elements[i].checked = false;
        } else if (formobj.elements[i].type == "radio") {
            formobj.elements[i].checked = formobj.elements[i].defaultChecked;
        } 
    }
}
//-->
</SCRIPT>
<form m:id="roleActCondition">
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="submit" value="設定" m:action="#{roleActConditionAction.select}"/>&nbsp;&nbsp;
	<input type="button" value="クリア" onclick="clearForm(this.form);"/>&nbsp;&nbsp;
	<span m:rendered="#{roleActConditionDto.selectPullId == '0'}">
		<input type="submit" value="機能選択" m:action="#{roleActConditionAction.addFunction}"/>&nbsp;&nbsp;
	</span>
	<span m:rendered="#{roleActConditionDto.selectPullId == '1'}">
		<input type="submit" value="ロール選択" m:action="#{roleActConditionAction.addRole}"/>&nbsp;&nbsp;
	</span>
	<table cellspacing="0" cellpadding="0">
	  <tr style="height:5px;"><td align="right"></td></tr>
	</table>
  <div class="hideArea">
    <select m:value="#{roleActConditionDto.selectPullId}"
    		m:items="#{roleActConditionDto.selectPull}"
    		m:itemValue="selectPullId"
    		m:itemLabel="selectPullName"
    		m:onchange="loadChangeList()">
    </select>
	<a id="loadList" m:action="#{roleActConditionAction.changeFunctionType}"/>
  </div>
	<table cellspacing="0" cellpadding="0">
	  <tr style="height:5px;"><td align="right"></td></tr>
	</table>
	<table class="body_caption" width="450px" cellspacing="0" cellpadding="0">
	  <tr>
	    <td>対象<span m:value="#{roleActConditionDto.selectPullId == '0'?'機能':'ロール'}"/>選択</td>
	  </tr>
	</table>
	<table class="body_table2">
	  <tr class="header_row">
	    <th width="43px">選択</th>
	    <th width="150px"><span m:value="#{roleActConditionDto.selectPullId == '0'?'機能カテゴリ':'分類'}"/></th>
	    <th width="*px"><span m:value="#{roleActConditionDto.selectPullId == '0'?'機能名':'ロール名'}"/></th>
	  </tr>
	</table>
	
		<div m:rendered="#{roleActConditionDto.selectPullId == '0'}" class="scroll_area">
		<table class="body_table2" style="border-top-width : 0px;">
	
			<span m:inject="s:forEach" m:items="#{roleActConditionDto.uIBirdMenu}" m:var="e">
		      <tr class="non_top_border">
		        <td width="43px" style="text-align:center;">
		          <input type="checkbox" m:value="#{e.checkFlg}"/>
		        </td>
		        <td width="150px">
		          <span m:converter="#{characterEncodingConverter}" m:value="#{e.menuName}"/>
		        </td>
		        <td width="*px">
		          <span m:converter="#{characterEncodingConverter}" m:value="#{e.subMenuName}"/>
		        </td>
		      </tr>
		    </span>
		</table>
		</div>
		<div m:rendered="#{roleActConditionDto.selectPullId == '1'}" class="scroll_area">
		<table class="body_table2" style="border-top-width : 0px;">
	
			<span m:inject="s:forEach" m:items="#{roleActConditionDto.uIRole}" m:var="e">
		      <tr class="non_top_border">
		        <td width="43px" style="text-align:center;">
		          <input type="checkbox" m:value="#{e.CheckedRole}"/>
		        </td>
		        <td width="150px">
		          <span m:converter="#{characterEncodingConverter}" m:value="#{e.bunruiName}"/>
		        </td>
		        <td width="*px">
		          <span m:converter="#{characterEncodingConverter}" m:value="#{e.roleName}"/>
		        </td>
		      </tr>
		    </span>
		</table>
		</div>
<input type="text" m:id="dummyEnter" style="display:none"/>
</form>
</span>
</body>
</html>
