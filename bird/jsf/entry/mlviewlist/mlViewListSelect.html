<html xmlns:m="http://www.seasar.org/maya" m:action="#{mlViewListSelectAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>マスターライセンス申込状況照会</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="マスターライセンス申込状況照会"/>
<span m:inject="f:param" m:name="onLoadName" m:value="init();"/>
<span m:inject="s:insert" m:name="bodyTitleName">■マスターライセンス申込状況照会</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BEN009V01"/>
<span m:inject="s:insert" m:name="body">
<STYLE type="text/css">
<!--
/* テーブルヘッダデフォルト設定 パターン２*/
/* テーブルヘッダのセンタリング用 */
table.body_table2 tr th{
  text-align            : center;
}
.scroll_area {
	width:919px; height:360px;
}
//-->
</STYLE>
<script type="text/javascript">
<!--
function init(){
	var userType = document.forms['mlViewList'].elements['mlViewList:userTypeCd'].value;
	if(userType == '01') {
		var meta = document.forms['mlViewList'].elements['mlViewList:searchSelectFlg'].value;
		if(meta=='0'){
			document.forms['mlViewList'].elements['mlViewList:sitenR'].checked = true;
			document.forms['mlViewList'].elements['mlViewList:sitenS'].focus();
		}
		else if(meta=='1'){
			document.forms['mlViewList'].elements['mlViewList:onerR'].checked = true;
			document.forms['mlViewList'].elements['mlViewList:onerT'].focus();
		}
		else if(meta=='2'){
			document.forms['mlViewList'].elements['mlViewList:miseR'].checked = true;
			document.forms['mlViewList'].elements['mlViewList:miseT'].focus();
		}
		else{
			document.forms['mlViewList'].elements['mlViewList:zenR'].checked = true;
			document.forms['mlViewList'].elements['mlViewList:onerB'].disabled = true;
			document.forms['mlViewList'].elements['mlViewList:miseB'].disabled = true;
			document.forms['mlViewList'].elements['mlViewList:zenR'].focus();
		}
	}
}
function offOn(para){
	var userType = document.forms['mlViewList'].elements['mlViewList:userTypeCd'].value;
	if (userType == '01') {
		offButtonJen();
		if(para=='0'){
			document.forms['mlViewList'].elements['mlViewList:sitenR'].checked = true;
			document.forms['mlViewList'].elements['mlViewList:sitenS'].disabled = false;
		}
		else if(para=='1'){
			document.forms['mlViewList'].elements['mlViewList:onerR'].checked = true;
			document.forms['mlViewList'].elements['mlViewList:onerB'].disabled = false;
		}
		else if(para=='2'){
			document.forms['mlViewList'].elements['mlViewList:miseR'].checked = true;
			document.forms['mlViewList'].elements['mlViewList:miseB'].disabled = false;
		}
	}
}
function onButtonJen(){
	var userType = document.forms['mlViewList'].elements['mlViewList:userTypeCd'].value;
	if (userType == '01') {
		document.forms['mlViewList'].elements['mlViewList:sitenS'].disabled = false;
		document.forms['mlViewList'].elements['mlViewList:onerB'].disabled = false;
		document.forms['mlViewList'].elements['mlViewList:miseB'].disabled = false;
	}
}
function offButtonJen(){
	var userType = document.forms['mlViewList'].elements['mlViewList:userTypeCd'].value;
	if (userType == '01') {
//		document.forms['mlViewList'].elements['mlViewList:sitenS'].disabled = true;
		document.forms['mlViewList'].elements['mlViewList:onerB'].disabled = true;
		document.forms['mlViewList'].elements['mlViewList:miseB'].disabled = true;
  }
}
function onerSearch(){
	onButtonJen();
    document.forms['mlViewList'].elements['mlViewList:__link_clicked__'].value='mlViewList:onerSearch';
    document.forms['mlViewList'].submit();
}
function miseSearch(){
	onButtonJen();
    document.forms['mlViewList'].elements['mlViewList:__link_clicked__'].value='mlViewList:miseSearch';
    document.forms['mlViewList'].submit();
}
//-->
</script>

<form m:id="mlViewList">
<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
<input type="hidden" m:id="userTypeCd" m:value="#{mlViewListCommonDto.userTypeCd}"/>
<input type="hidden" m:id="searchSelectFlg"  m:value="#{mlViewListCommonDto.searchSelectFlg}"/>

<!-- Search Infomation -->
<table cellspacing="0" cellpadding="0">
  <tr>
    <td m:rendered="#{mlViewListCommonDto.userTypeCd == '01'}">

      <table class="body_table">
	    <caption class="body_title">&nbsp;検索条件</caption>

        <tr>
          <th>会社</th>
          <th>支部</th>
          <th width="120px">オーナー
            <input m:name="mlViewList:onerB" type="button" value="検索" m:onclick="onerSearch();"/>
          </th>
          <th width="120px">店舗&nbsp;
            <input m:name="mlViewList:miseB" type="button" style="margin-left:8px;" value="検索" m:onclick="miseSearch();"/>
          </th>
          <th width="50px"> 全て</th>
        </tr>

        <tr>
          <span m:inject="s:selectOneRadio2" m:value="#{mlViewListCommonDto.searchSelectFlg}">
          <td>
            <select size=1 m:value="#{mlViewListCommonDto.searchCompanyCd}" style="width:140px;">
              <option value="00">モスフードサービス</option>
            </select>
          </td>
          <td>
            <input m:id="sitenR" type="radio" name="searchSelectFlg" m:value="0" onclick="offOn('0')"/>
            <div class="hideArea" style="display:inline;">
              <select m:id="sitenS" style="margin:2px"
                    m:value="#{mlViewListCommonDto.searchSibuCd}"
                    m:items="#{mlViewListCommonDto.searchSibuList}"
                    m:itemValue="sibuCd"
                    m:itemLabel="sibuName"
					onChange="offOn('0')">
                    <option>東京支部</option>
              </select>
            </div>
          </td>
          <td>
            <input m:id="onerR" type="radio" name="searchSelectFlg" m:value="1" onclick="offOn('1')"/>
			<input style="margin:2px" m:id="onerT" class="imenotuse  width_62" type="text" m:maxlength="5" size="10" m:value="#{mlViewListCommonDto.searchOnerCd}" m:converter="#{codeConverterOwner}" onFocus="offOn('1')"/>
			<a m:id="onerSearch" m:action="#{mlViewListSelectAction.onerSearch}"/>
          </td>
          <td>
            <input m:id="miseR" type="radio" name="searchSelectFlg" m:value="2" onclick="offOn('2')"/>
            <input style="margin:2px" m:id="miseT" class="imenotuse  width_62" type="text" m:maxlength="5" size="10" m:value="#{mlViewListCommonDto.searchMiseCd}" m:converter="#{codeConverterMise}" onFocus="offOn('2')"/>
   			<a m:id="miseSearch" m:action="#{mlViewListSelectAction.miseSrearch}"/>
          </td>
          <td width="50px">
            <input  m:id="zenR" type="radio" name="searchSelectFlg" m:value="3" onclick="offOn('')"/>
          </td>
          </span>
        </tr>

      </table>

    </td>
    <td valign="bottom">
        &nbsp;<input type="submit" value="実行"
          m:action="#{mlViewListSelectAction.execute}"
          m:disabled="#{mlViewListCommonDto.mlListDataSize == 0}"/>
    </td>
  </tr>
</table>

<!-- Master License List -->
<div m:rendered="#{mlViewListCommonDto.mlListDataSize != 0}" style="margin-top:5px;">

  <table class="body_table2" width="900px">
	<tr>
	  <th width="30px" rowspan="2">対<br/>象</th>
	  <th width="150px">開催日</th>
	  <th width="*">タイトル</th>
	  <th width="150px" rowspan="#{mlViewListCommonDto.userTypeCd == 01?'1':'2'}"><span m:rendered="#{mlViewListCommonDto.userTypeCd == 01}" >本部&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;：</span>申込開始</th>
	  <th width="150px" rowspan="#{mlViewListCommonDto.userTypeCd == 01?'1':'2'}"><span m:rendered="#{mlViewListCommonDto.userTypeCd == 01}">本部&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;：</span>申込終了</th>
	</tr>
	<tr>
	  <th colspan="2">備考</th>
	  <span m:rendered="#{mlViewListCommonDto.userTypeCd == 01}">
	  <th>オーナー：申込開始</th>
	  <th>オーナー：申込終了</th>
	  </span>
	</tr>
  </table>

  <span m:inject="s:selectOneRadio2" m:value="#{mlViewListCommonDto.indexFlg}">
  <div class="scroll_area">

  <table style="width:900px;border-top-width:0px;" class="body_table2">
    <div m:inject="s:forEach" m:items="#{mlViewListCommonDto.mlListData}" m:var="e" m:varIndex="i">
	<tr class="non_top_border">
	  <td width="30px" rowspan="2" style="text-align:center;"><input type="radio" m:value="#{i}"/></td>
	  <td width="150px"><span m:value="#{e.fromDt}" m:converter="#{mlDateConverter3}"/>〜<span m:value="#{e.toDt}" m:converter="#{mlDateConverter3}"/></td>
	  <td width="*"><span m:value="#{e.entryTitle}" m:converter="#{characterEncodingConverter}"/></td>
	  <td width="150px" rowspan="#{mlViewListCommonDto.userTypeCd == 01?'1':'2'}"><span m:value="#{mlViewListCommonDto.userTypeCd == 01?e.honbuInputDtFrom:e.onerInputDtFrom}" m:converter="#{mlDateConverter}"/></td>
	  <td width="150px" rowspan="#{mlViewListCommonDto.userTypeCd == 01?'1':'2'}"><span m:value="#{mlViewListCommonDto.userTypeCd == 01?e.honbuInputDtTo:e.onerInputDtTo}" m:converter="#{mlDateConverter}"/></td>
	</tr>
	<tr>
	  <td colspan="2"><span m:value="#{e.note}" m:converter="#{characterEncodingConverter}"/>&nbsp;</td>
	  <span m:rendered="#{mlViewListCommonDto.userTypeCd == 01}">
	  <td><span m:value="#{e.onerInputDtFrom}" m:converter="#{mlDateConverter}"/></td>
	  <td><span m:value="#{e.onerInputDtTo}" m:converter="#{mlDateConverter}"/></td>
	  </span>
	</tr>
    </div>
  </table>

  </div>
  </span>

</div>

<input type="text" m:id="dummyEnter" style="display:none"/>

</form>
<script type="text/javascript">
<!--
	focusElement("mlViewListSelect");
-->
</script>

</span>
</body>
</html>
