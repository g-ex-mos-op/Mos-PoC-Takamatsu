<html xmlns:m="http://www.seasar.org/maya" m:action="#{campmasterregistCondAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j"/>
<meta http-equiv="Content-Style-Type" content="text/css"/>
<meta http-equiv="Content-Script-Type" content="text/javascript"/>
<title>キャンペーンマスタ登録</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="キャンペーンマスタ登録"/>
<span m:inject="s:insert" m:name="bodyTitleName">■キャンペーンマスタ登録</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BCF006V01"/>
<div m:inject="s:insert" m:name="body">
<style type="text/css">
<!--
.scroll_area {
	width:	  905px;
	height:   360px;
	overflow: auto;
}
-->
</style>

<script type="text/javascript">
<!--
function doEdit(index) {
  document.campmasterregistCond.elements['listSelectedIndex'].value = index;
  document.forms['campmasterregistCond'].elements['campmasterregistCond:__link_clicked__'].value='campmasterregistCond:actionEdit';
  document.campmasterregistCond.submit();
  return false;
}
-->
</script>

<form m:id="campmasterregistCond">

<input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
<a m:id="actionEdit" m:action="#{campmasterregistCondAction.doEdit}">
  <span m:inject="f:param" m:name="listSelectedIndex"/>
</a>
<input type="submit" value="新規登録" m:action="#{campmasterregistCondAction.doNew}"/><br/>
<div style="font-weight:bold;margin-top:4px;">
<span m:rendered="#{campmasterregistDto.listRegistCampaignSize == 0 && campmasterregistDto.condMode == 1}">
※現在編集可能なキャンペーンはありません。
</span>
<span m:rendered="#{campmasterregistDto.listRegistCampaignSize == 0 && campmasterregistDto.condMode == 2}">
※終了したキャンペーンはありません。
</span>
<span m:rendered="#{campmasterregistDto.listRegistCampaignSize > 0 && campmasterregistDto.condMode == 1}">
※現在編集可能なキャンペーンは下記のとおりです。
</span>
</div>

<table class="body_table2" width="885px" m:rendered="#{campmasterregistDto.listRegistCampaignSize > 0}">
  <col style="width:41.5%"/>
  <col style="width:6%"/>
  <col style="width:23.4%"/>
  <col style="width:23.4%"/>
  <col style="width:6%"/>
<tr>
  <th class="body_header4" colspan="5" style="text-align:left;">対象一覧</th>
</tr>
<tr class="header_row">
  <th class="body_header" style="border-right:0px;">タイトル</th>
  <th class="body_header" style="border-left:0px;">&nbsp;</th>
  <th class="body_header2">対象期間</th>
  <th class="body_header2">表示期間</th>
  <th class="body_header2">対象</th>
</tr>
</table>
<div class="scroll_area">
<table m:rendered="#{campmasterregistDto.listRegistCampaignSize > 0}"
   class="body_table2" style="width:885px;border-top-width:0px;">
  <col style="width:41.5%"/>
  <col style="width:6%"/>
  <col style="width:23.4%"/>
  <col style="width:23.4%"/>
  <col style="width:6%"/>
<div m:inject="s:forEach" m:items="#{campmasterregistDto.listRegistCampaign}" m:var="e" m:varindex="i">
<tr class="non_top_border">
  <td style="border-right:0px;"><span m:converter="#{characterEncodingConverter}" m:value="#{e.campTitle}"/></td>
  <td style="text-align:right;border-left:0px;">
    <a href="#" onclick="javascript:doEdit(#{i});" onDblClick="return false">
      <span m:rendered="#{campmasterregistDto.condMode == 1}">[編集]</span>
      <span m:rendered="#{campmasterregistDto.condMode == 2}">[参照]</span>
    </a>
  </td>
  <td style="text-align:center;"><span m:value="#{e.campFrom}" m:converter="#{campmasterregistDateConverter}"/> 〜 <span m:value="#{e.campTo}" m:converter="#{campmasterregistDateConverter}"/></td>
  <td style="text-align:center;"><span m:value="#{e.dispFrom}" m:converter="#{campmasterregistDateConverter}"/> 〜 <span m:value="#{e.dispTo}" m:converter="#{campmasterregistDateConverter}"/></td>
  <td style="text-align:center;"><span m:value="#{e.targetKbn}" m:converter="#{campmasterregistTargetKbnConverter}"/></td>
</tr>
</div>
</table>
</div>

<br/>
<a m:action="#{campmasterregistCondAction.doViewKako}" m:rendered="#{campmasterregistDto.condMode == 1}">過去キャンペーン</a>
<a m:action="#{campmasterregistCondAction.doViewEditable}" m:rendered="#{campmasterregistDto.condMode == 2}">編集可能キャンペーン</a>
</form>
</div>
</body>
</html>
