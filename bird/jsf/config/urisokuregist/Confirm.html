<html xmlns:m="http://www.seasar.org/maya" m:action="#{urisokuRegistConfirmAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>売上速報設定登録(確認画面)</title>
<span m:inject="f:param" m:name="layoutTitle" m:value="売上速報設定登録(確認画面)"/>
<span m:inject="s:insert" m:name="bodyTitleName">■売上速報設定登録(確認画面)</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BCF007V03"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load();"/>
<span m:inject = "f:param" m:name = "msg" m:value="結果が表示されるまでに時間がかかります。よろしいですか？"/>
</head>
<body>
<span m:inject="s:insert" m:name="body" >
<STYLE type="text/css">
<!--
table.body_table2 tr td.beigeArea{
  background-color      : #F5F5DC;
}
table.body_table2 tr td.silverArea{
  background-color      : #C0C0C0;
}
table.body_table2 tr td.calendarArea{
  font-weight        : bold;
}

.data_table_width {
    width:732px;
}
.col_seq {
  width:40px;
  text-align  : center;
}
.col_menu {
  width:300px;
}
.col_menuDispMoji {
  width:*;
}
.col_campMenu {
  width:250px;
}
.col_campKikan {
  width:178px;
}
.col_week {
  width:50px;
}
.tv_tonen {
    float:left;
	margin-right:15px;
}
@media print {
	.tv_tonen {
	    clear: both;
	    margin-bottom:15px;
	}
}

//-->
</STYLE>
<script type="text/javascript">
<!--
function load(){
	loadScroll("editcampScroll", 340);
}
/**
 * 戻るボタン押下時処理
 *
 */
function back(){
	document.mainForm.elements['mainForm:__link_clicked__'].value='mainForm:back';
	document.mainForm.submit();
}
/**
 * 登録・終了ボタン押下時処理
 *
 */
function auth(){
	document.mainForm.elements['mainForm:__link_clicked__'].value='mainForm:auth';
	document.mainForm.submit();
}

/*
 * メインタブ切り替え
 */
function changeTab(targetTab) {
	changeTabArea(targetTab, "mainTab_", "div", "th", "body_active_tab", "body_non_active_tab");
	loadScroll("editcampScroll", 340);
}
function changeSubTab(targetTab) {
	document.mainForm.elements['mainForm:selectedTabSub'].value= targetTab;
	changeTabArea(targetTab);
}
/*
 * 表示ステータス変更処理
 */
function changeDisplayForView(objs, firstCalssNm, lastClassNm) {
	for (i = 0; i < objs.length; i++) {
		var classNm = objs[i].className;
		if(classNm.substring(0,firstCalssNm.length) == firstCalssNm){
			if(classNm.substring(firstCalssNm.length, firstCalssNm.length+lastClassNm.length) == lastClassNm) {
				objs[i].style.display     = "inline";
			}else{
				objs[i].style.display   = "none";
			}
		}
	}
}
//-->
</script>
<div style="margin-top:1px;" />
<b>※以下の内容で登録します。修正する場合は、「戻る」ボタンを押下して、前の画面に戻ってください。<br/></b>
<form m:id="mainForm" onKeyDown="return setDefaultSubmitButton('mainForm','btnExecute');">
	<input type="hidden" id="viewId" m:value="#{viewIdValue}" />
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" id="windowId" m:value="#{urisokuRegistReqDto.windowId}"/>
	<input type="hidden" id="selectedTabMain" m:value="#{urisokuRegistReqDto.selectedTabMain}"/>
	<input type="hidden" id="selectedTabSub" m:value="#{urisokuRegistReqDto.selectedTabSub}"/>
	<input type="hidden"  m:value="#{urisokuRegistReqDto.sesstionKey}"/>
	<input type="hidden" id="loadingFlg" value="" m:passthrough="true"/>
		<a id="auth" m:action="#{urisokuRegistConfirmAction.auth}"/>
		<a id="back" m:action="#{urisokuRegistConfirmAction.back}"/>
<div align="left">
	<table class="hiddenBody">
		<tr>
		<td>
		<table class="body_table2" >
		    <tr>
		      <th>対象レポート年月</th>
		      <td width="70px"><span m:value="#{urisokuRegistSesDto.taishoYm}" m:converter="#{dateConverterYM}"/></td>
		    </tr>
		</table>
		</td>
		<td>
			&nbsp;<input type="button" value="戻る" name="backbt" onClick="return back();" onDblClick="return false;" m:passthrough="true"/>
		</td>
		<td>
			&nbsp;<input type="button" name="mainForm:btnExecute" m:value="登録・終了" class="operation_button" onClick="return auth();" onDblClick="return false;"/>
		</td>
		</tr>
	</table>
	<div style="margin-top:10px;" />
	<table class="data_table_width" cellspacing="0" cellpadding="0">
		<tr>
			<th>
	    		<table cellspacing="0">
	    			<tr m:inject="s:forEach" m:items="#{urisokuRegistSesDto.listRegistData}" m:var="uiMainTab" m:varindex="i">
			    		<th width="180px" class="mainTab_#{i} body_#{(uiMainTab.key==urisokuRegistReqDto.selectedTabMain) ? '' : 'non_'}active_tab select_border-top">
		    		<a href="javaScript:changeTab(#{i});" onDblClick="return false;" >
		    			<span m:converter="#{characterEncodingConverter}" m:value="#{uiMainTab.keyName}" /></a>
			    		</th>
		   			</tr>
		    	</table>
		    </th>
		  </tr>
		<tr class="body_active_tab" style="height:5px;"><td></td></tr>
	</table>
	<div class="mainTab_2 #{'BCF007V04' == urisokuRegistReqDto.selectedTabMain? '':'in'}visible_tab">
		<table class="data_table_width element_browser" cellspacing="0" cellpadding="0">
			<tr class="body_active_tab select_border-top">
				<td align="left">
	    		<table cellspacing="0">
	    			<tr m:inject="s:forEach" m:items="#{urisokuRegistSesDto.listRegistDataMenu}" m:var="uiSubTab" m:varindex="i">
			    		<td width="80px" class="tab_change_area_#{uiSubTab.key} body_#{(uiSubTab.key==urisokuRegistReqDto.selectedTabSub) ? '' : 'non_'}active_cell select_border-top">
		    		<a href="javaScript:void(0);" onClick="changeSubTab('#{uiSubTab.key}'); return false;" onDblClick="return false;" m:passthrough="true" >
		    		<span m:converter="#{characterEncodingConverter}" m:value="#{uiSubTab.keyName}" /></a>
			    		</td>
		   			</tr>
		    	</table>
			    </td>
			</tr>
			<tr class="body_caption" style="height:5px;"><td></td></tr>
		</table>
	</div>
</div>
</form>
<form m:id="confirmForm" >
	<!--前月末店舗数設定-->
	<div class="mainTab_0 #{'BCF007V02' == urisokuRegistReqDto.selectedTabMain? '':'in'}visible_tab">
		<p/>
	<div class="element_print">【前月末店舗数設定】</div>
		<table class="body_table2">
		    <tr class="header_row">
		      <th width="150px" rowspan="2" colspan="2">対象年月</th><th width="70px" class="body_header">店舗数</th>
		    </tr>
		    <tr class="header_row"><th>全店</th></tr>
		    <span m:inject="s:forEach" m:items="#{urisokuRegistSesDto.listRegistDataMiseCnt}" m:var="e" m:varindex="i">
		    <tr>
		    	<th><span m:value="#{i==0?'当年':'前年'}"/></th>
		    	<td><span m:value="#{e.taishoYm}" m:converter="#{dateCnvtKjYM}"/></td>
		    	<td align="right"><span m:value="#{e.miseCntAll}"/>&nbsp;件</td>
		    </tr>
		    </span>
		</table>
	</div>
	<!--テレビCM放映日設定-->
	<div class="mainTab_1 #{'BCF007V03' == urisokuRegistReqDto.selectedTabMain? '':'in'}visible_tab">
		<p/>
	<div class="element_print">【テレビCM放映日設定】</div>
		<div m:inject="s:forEach" m:items="#{urisokuRegistSesDto.listRegistDataTvcm}" m:var="uiTvcm" m:varindex="i">
			<div class="#{i==0?'tv_tonen':'tv_zennen'}" >
			<table width="375px" class="body_table" >
			    <tr>
			      <th width="105px"><span m:value="#{i==0?'当年':'前年'}"/></th>
			      <td width="*"><span m:value="#{uiTvcm.key}" m:converter="#{dateCnvtKjYM}"/>&nbsp;</td>
			    </tr>
			</table>
			<div style="margin-top:5px;"/>
			<table class="body_table2">
			    <tr class="header_row">
			    	<th class="col_week"><font color="red">日</font></th>
			    	<th class="col_week">月</th>
			    	<th class="col_week">火</th>
			    	<th class="col_week">水</th>
			    	<th class="col_week">木</th>
			    	<th class="col_week">金</th>
			    	<th class="col_week"><font color="blue">土</font></th>
			    </tr>
			    <span m:inject="s:forEach" m:items="#{uiTvcm.listData}" m:var="listWeek" m:varindex="w">
				    <tr style="line-height:40px;">
				    <span m:inject="s:forEach" m:items="#{listWeek}" m:var="e" m:varindex="d">
				    	<td class="calendarArea #{e.tvcmDay==null? 'beigeArea':''}">&nbsp;<span m:value="#{e.tvcmDay}"/>&nbsp;<span style="color:blue;" m:value="#{e.selectFlg? '★':''}"/>
				    	</td>
				    </span>
				    </tr>
			    </span>
			</table>
			</div>
	    </div>
	</div>
	<!--商品メニュー設定-->
	<div class="mainTab_2 #{'BCF007V04' == urisokuRegistReqDto.selectedTabMain? '':'in'}visible_tab">
		<p/>
	<div class="element_print">【商品メニュー設定】</div>
	<div m:inject="s:forEach" m:items="#{urisokuRegistSesDto.listRegistDataMenu}" m:var="uiSubTab" m:varindex="g">
			<div class="element_browser">
			<div class="tab_change_area_#{uiSubTab.key} #{uiSubTab.key==urisokuRegistReqDto.selectedTabSub? '':'in'}visible_tab">
			<table class="body_table2" width="620px">
				<tr class="header_row">
					<th class="col_seq">行数</th>
					<th class="col_menu">メニュー</th>
					<th class="col_menuDispMoji">表示文字列</th>
				</tr>
			</table>
			<div class="scroll_area" style="width:640px;height:330px;">
				<table class="body_table2" style="width:620px;border-top-width:0px;">
				    <div m:inject="s:forEach" m:items="#{uiSubTab.listData}" m:var="e" m:varindex="m">
					    <tr class="non_top_border">
					    	<td class="col_seq"><span m:converter="#{characterEncodingConverter}" m:value="#{m+1}"/></td>
					    	<td class="col_menu"><span m:converter="#{characterEncodingConverter}" m:value="#{e.menuCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{e.menuNameKj}"/></td>
					    	<td class="col_menuDispMoji"><span m:converter="#{characterEncodingConverter}" m:value="#{e.dispWord}"/></td>
					    </tr>
				    </div>
				</table>
			</div>
			</div>
			</div>
			<!--印刷用-->
			<div class="element_print">
			【<span m:converter="#{characterEncodingConverter}" m:value="#{uiSubTab.keyName}"/>】
			<table class="body_table2">
				<tr>
					<th class="col_seq">行数</th>
					<th class="col_menu">メニュー</th>
					<th class="col_menuDispMoji">表示文字列</th>
				</tr>
			    <div m:inject="s:forEach" m:items="#{uiSubTab.listData}" m:var="e" m:varindex="m">
				    <tr>
				    	<td><span m:converter="#{characterEncodingConverter}" m:value="#{m+1}"/></td>
				    	<td><span m:converter="#{characterEncodingConverter}" m:value="#{e.menuCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{e.menuNameKj}"/></td>
				    	<td><span m:converter="#{characterEncodingConverter}" m:value="#{e.dispWord}"/></td>
				    </tr>
			    </div>
			</table>
			</div>
		</div>
	</div>
	<!--キャンペーン設定-->
	<div class="mainTab_3 #{'BCF007V05' == urisokuRegistReqDto.selectedTabMain? '':'in'}visible_tab">
		<div style="text-align : center;" m:rendered="#{urisokuRegistSesDto.existlistRegistDataCamp==false}">
		<p/>
			設定可能なキャンペーンは存在しません。
		</div>
		<p/>
		<div class="element_print">【キャンペーン設定】</div>
		<div m:rendered="#{urisokuRegistSesDto.existlistRegistDataCamp==true}">
			<table class="body_table2 data_table_width" >
			    <tr class="header_row">
			    	<th class="col_seq">SEQ</th>
			    	<th class="col_seq">ﾀｲﾄﾙ<br/>表示</th>
			    	<th class="col_seq">実績<br/>表示</th>
			    	<th width="*">タイトル</th>
			    	<th class="col_campKikan">対象期間</th>
			    	<th class="col_campMenu">対象メニュー</th>
			    </tr>
			</table>
			<div class="scroll_standby" style="width:753px;" id="editcampScroll">
				<table class="body_table2 data_table_width" style="border-top-width:0px;">
				    <div m:inject="s:forEach" m:items="#{urisokuRegistSesDto.listRegistDataCamp}" m:var="e" m:varindex="i">
					    <tr m:rendered="#{e.titleFlg=='1' || e.jissekiFlg=='1'}" class="non_top_border">
					    	<span m:rendered="#{1==e.menuSeqNo}">
					    	<td class="col_seq" rowspan="#{e.menuCnt}" valign="middle"><span m:value="#{e.taishoSeqNo}"/></td>
					    	<td class="col_seq" rowspan="#{e.menuCnt}" valign="middle"><span m:value="#{e.titleFlg=='1'? '○':''}"/></td>
					    	<td class="col_seq" rowspan="#{e.menuCnt}" valign="middle"><span m:value="#{e.jissekiFlg=='1'? '○':''}"/></td>
					    	<td width="*" rowspan="#{e.menuCnt}" valign="middle"
					    	    class="#{e.titleFlg=='1'? '':'silverArea'}"><span m:converter="#{characterEncodingConverter}" m:value="#{e.campTitle}"/></td>
					    	<td rowspan="#{e.menuCnt}" valign="middle"
					    	    class="#{e.titleFlg=='1'? '':'silverArea'} col_campKikan font_size_14">
					    	    	<span m:value="#{e.campFrom}" m:converter="#{dateConverterYMD}"/>〜<span m:value="#{e.campTo}" m:converter="#{dateConverterYMD}"/></td>
					    	</span>
					    	<td class="#{e.jissekiFlg=='1'? '':'silverArea'} col_campMenu"><span m:converter="#{characterEncodingConverter}" m:value="#{e.menuNameKj}"/></td>
					    </tr>
				    </div>
				</table>
			</div>
		</div>
	</div>
<input type="text" m:id="dummyEnter" style="display:none"/>
</form>
</span>
</body>
</html>
