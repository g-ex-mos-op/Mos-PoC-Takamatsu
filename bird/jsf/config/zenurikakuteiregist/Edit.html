<html xmlns:m="http://www.seasar.org/maya" m:action="#{zenurikakuteiRegistEditAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>売上速報前月売上確定登録(編集画面)</title>
<span m:inject="f:param" m:name="layoutTitle" m:value="売上速報前月売上確定登録(編集画面)"/>
<span m:inject="s:insert" m:name="bodyTitleName">■売上速報前月売上確定登録(編集画面)</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BCF008V01"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject = "f:param" m:name = "msg" m:value="結果が表示されるまでに時間がかかります。よろしいですか？"/>
</head>
<body>
<span m:inject="s:insert" m:name="body" >
<STYLE type="text/css">
<!--

.data_table_width {
    width:98%;
}
table.this_table tr td.plumArea{
  background-color      : #D8BFD8;
}
.data_table_width {
    width:98%;
}
//-->
</STYLE>
<script type="text/javascript">
<!--
function load(){
}
/**
 * 実行ボタン押下時処理
 *
 */
function confirm(){
	if(returnLoadingStatus()) {
		document.mainForm.target ="_self";
		document.mainForm.elements['mainForm:__link_clicked__'].value='mainForm:confirm';
		document.mainForm.submit();
	}
}
/**
 * ウィンドウロードフラグ設定処理
 *
 *
 */
function setLoadingFlg() {
	document.mainForm.elements['mainForm:loadingFlg'].value = "ON";
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function returnLoadingStatus(){
	if(isLoadingFlgOFF()) {
		setLoadingFlg();
		return true;
	}
	return false;
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function isLoadingFlgOFF(){
	return (document.mainForm.elements['mainForm:loadingFlg'].value != "ON");
}

//-->
</script>
<form m:id="mainForm" onKeyDown="return setDefaultSubmitButton('mainForm','btnExecute');">
	<input type="hidden" id="viewId" m:value="#{viewIdValue}" />
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" id="windowId" m:value="#{zenurikakuteiRegistReqDto.windowId}"/>
	<input type="hidden" id="loadingFlg" value="" m:passthrough="true"/>
	<input type="hidden"  m:value="#{zenurikakuteiRegistReqDto.sesstionKey}"/>
	<a id="confirm" m:action="#{zenurikakuteiRegistEditAction.confirm}"/>
	<div style="font-weight:bold">
	種別を選択して下さい。<br/>
	   「確定値」はシステム日付前月分のみ設定を行えます。<br/>
	   例：2008/09を確定値に出来るのは2008/10/01〜2008/10/31です。<br/>
	   <div style="margin-top:12px;"/>
	   ※当月は「計算値」と表示され、翌月以降にのみ「確定値」へと変更できます。<br/>
	   設定データがある場合は、実行ボタンを押下して下さい。<br/>
	   <div style="margin-top:12px;"/>
	   <font color="red">※2ヶ月以上前を確定させたい場合は、管理者までお問い合わせ下さい。</font>
	   </div>
	<div style="margin-top:5px;"/>
	<input type="button" name="mainForm:btnExecute" m:value="実行" class="operation_button" onClick="return confirm();" onDblClick="return false;"/>
	<div style="margin-top:5px;"/>
	<table class="this_table" >
	    <tr>
	      <th width="150px">年月</th><th width="150px">種別</th>
	    </tr>
	    <span m:inject="s:forEach" m:items="#{zenurikakuteiRegistSesDto.listRegistData}" m:var="e" m:varindex="i">
	    <tr>
	    	<td><span m:value="#{e.uriSokuYm}" m:converter="#{dateCnvtKjYM}"/></td>
	    	<td class="#{e.statusFlg=='1'? 'plumArea':''}">
	    		<div m:rendered="#{e.registFlg==true}" class="hideArea">
					<select m:value="#{e.statusFlg}"
							m:items="#{zenurikakuteiRegistReqDto.listStatus}"
							m:itemValue="code"
							m:itemLabel="name"
							>
						<option value="0">計算値</option>
						<option value="1">確定値</option>
					</select>
	    		</div>
	    		<span m:converter="#{characterEncodingConverter}" m:rendered="#{e.registFlg==false}" m:value="#{e.statusName}"/>
	    	</td>
	    </tr>
	    </span>
	</table>
		<input type="text" m:id="dummyEnter" style="display:none"/>
	</form>
</span>
</body>
</html>
