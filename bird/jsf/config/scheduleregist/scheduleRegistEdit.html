<html xmlns:m="http://www.seasar.org/maya" m:action="#{scheduleregistEditAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j"/>
<meta http-equiv="Content-Style-Type" content="text/css"/>
<meta http-equiv="Content-Script-Type" content="text/javascript"/>
<title>スケジュール登録(編集画面)</title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="スケジュール登録(編集画面)"/>
<span m:inject="s:insert" m:name="bodyTitleName">■スケジュール登録(編集画面)</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BCF010V02"/>
<span m:inject="f:param" m:name="onLoadName" m:value="onLoadFunction()"/>
<div m:inject="s:insert" m:name="body">
<style type="text/css">
<!--
.table_class {
  width:800px;
}
@media print {
}
-->
</style>

<script type="text/javascript">
<!--
function onLoadFunction() {
    focusElementSchedule('editForm');
}
function focusElementSchedule(){
    var objForm = document.forms['editForm'];
    var indexOya = objForm.elements['editForm:ERR_INDEX_OYA'].value;
    var indexKo = objForm.elements['editForm:ERR_INDEX_KO'].value;
    var errElement = objForm.elements['editForm:ERR_TAB'].value;

    if (errElement == null || errElement == '') {
        focusElement('editForm');
    }
    else {
	    for (i = 0; i < objForm.elements.length; i++) {
	        if (objForm.elements[i].type == "text") {
	            if (objForm.elements[i].name.indexOf('_' + indexOya + ':_') > 0
	                    && objForm.elements[i].name.indexOf('_' + indexKo + ':title') > 0)
	            {
	                objForm.elements[i].focus();
	            }
	        }
	    }

    }
}
function back() {
  document.editForm.elements['editForm:__link_clicked__'].value='editForm:actionBack';
  document.editForm.submit();
}
function execute() {
  document.editForm.elements['editForm:__link_clicked__'].value='editForm:actionExecute';
  document.editForm.submit();
}
-->
</script>

<form m:id="editForm" target="_self" onkeydown="setDefaultSubmitButton('editForm', 'executeBtn');">
<input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
<input type="hidden" m:id="sessionKey" m:value="#{scheduleregistReqDto.sessionKey}"/>
<input type="hidden" m:id="ERR_INDEX_OYA" m:value="#{scheduleregistReqDto.errFocusDateIndex}"/>
<input type="hidden" m:id="ERR_INDEX_KO" m:value="#{scheduleregistReqDto.errFocusIndex}"/>
<input type="hidden" m:id="ERR_TAB" m:value="#{scheduleregistReqDto.errFocusTabName}"/>
<a m:id="actionBack" m:action="#{scheduleregistEditAction.back}"/>
<a m:id="actionExecute" m:action="#{scheduleregistEditAction.confirm}"/>

<input type="button"
       m:name="editForm:executeBack" value="戻る"
       onclick="return back();"
       ondblclick="return false;"/>
&nbsp;
<input type="button"
       m:name="editForm:executeBtn" value="確認"
       onclick="return execute();"
       ondblclick="return false;" />
<table class="body_table2" style="margin-top:4px;margin-bottom:4px;">
  <tr>
    <th>対象会社</th>
    <td><span m:converter="#{characterEncodingConverter}" m:value="#{scheduleregistDto.condCompanyName}"/>&nbsp;</td>
  </tr>
</table>
<span m:rendered="#{scheduleregistDto.listDateTable != null}">
<table style="float:left;" cellspacing="0" cellpadding="0">
  <tr>
    <span m:inject="s:forEach" m:items="#{scheduleregistDto.listDateTable}" m:var="e" m:varindex="i">
    <td class="body_#{scheduleregistDto.activeTabDate == e ? '' : 'non_'}active_cell tab_change_area_#{i}" width="100px"
        onClick="changeTabArea('#{i}');"
        onMouseOver="this.style.cursor='pointer';">
		<span m:value="#{e}" m:converter="#{scheduleregistDateConvMDE}"/></td>
    </span>
  </tr>
</table>
<table width="800px" cellspacing="0" cellpadding="0">
 <tr style="height:5px;"><td class="body_caption"></td></tr>
</table>

<span m:inject="s:forEach" m:items="#{scheduleregistDto.listDateTable}" m:var="e" m:varindex="i">
<div class="#{scheduleregistDto.activeTabDate == e ? '' : 'in'}visible_tab tab_change_area_#{i}">
<table class="body_table2 table_class">
  <colgroup>
    <col style="width:10%"/>
    <col style="width:20%"/>
    <col style="width:70%"/>
  </colgroup>
  <tr class="header_row">
    <th>SEQ</th>
    <th>ステータス</th>
    <th>スケジュール</th>
  </tr>
  <span m:inject="s:forEach" m:items="#{scheduleregistDto.listSchedule}" m:var="f" m:varindex="j">
  <tr style="text-align:center;" m:rendered="#{e == f.scdlDate}">
    <td><span m:converter="#{characterEncodingConverter}" m:value="#{f.seq}"/></td>
    <td>
      <span m:rendered="#{f.status == '9'}" m:value="新規"/>
      <div class="hideArea" m:rendered="#{f.status != '9'}">
        <select class="condition_field"
              m:id="condCompany"
              m:value="#{f.status}"
              m:items="#{scheduleregistDto.listStatus}"
              m:itemValue="value"
              m:itemLabel="labe">
          <option value="1">変更無し</option>
          <option value="2">更新</option>
          <option value="3">削除</option>
        </select>
      </div>
    </td>
    <td><input class="width_480" type="text" m:id="title" size=90 maxlength="60" m:value="#{f.title}"/></td>
  </tr>
  </span>
</table>
</div>
</span>
</span>

</form>
</div>
</body>
</html>
