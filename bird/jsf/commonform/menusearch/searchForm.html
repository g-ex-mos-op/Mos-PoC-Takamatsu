<html xmlns:m="http://www.seasar.org/maya" m:action="#{menuSearchAction.initialize}" m:extends="/jsf/layout/layout.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title></title>
</head>
<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="メニュー選択"/>
<span m:inject="s:insert" m:name="bodyTitleName">■メニュー選択</span>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject="s:insert" m:name="naviarea" m:src="/jsf/commonform/menusearch/searchFormNavi.html"/>
<span m:inject="f:param" m:name="viewIdValue" m:value="BCO006V01"/>
<span m:inject="s:insert" m:name="body">
<STYLE type="text/css">
<!--
.col_select {
    width:	40px;
}
.col_menuCd {
    width:	130px;
}
.col_menuNameKj {
    width:	*;
}
.col_menuName10 {
    width:	150px;
}
.col_menuBunruiNameKj {
    width:	140px;
}
.scroll_area {
	width:789px;
	height:380px;
}
-->
</STYLE>
<SCRIPT LANGUAGE="javascript">
<!--
function load() {
	focusElement('conditionFom');
}
/**
 * 決定処理
 */
function select(index){
	document.conditionForm.elements['conditionForm:selectedIndex'].value=index;
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:select';
	document.conditionForm.submit();
	return false;
}

function clearForm(formobj) {
    for (i = 0; i < formobj.elements.length; i++) {
        if (formobj.elements[i].type == "text") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "textarea") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "file") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "password") {
            formobj.elements[i].value = "";
        } else if (formobj.elements[i].type == "checkbox") {
            formobj.elements[i].checked = formobj.elements[i].defaultChecked;
            formobj.elements[i].checked = false;
        } else if (formobj.elements[i].type == "radio") {
            if(formobj.elements[i].value=="CODE"){
            	formobj.elements[i].click();
            }
        } else if (formobj.elements[i].type == "select-one") {
            for (j = 0; j < formobj.elements[i].options.length; j++) {
                formobj.elements[i].options[j].selected = formobj.elements[i].options[j].defaultSelected;
            }
            formobj.elements[i].selectedIndex = -1;
            formobj.elements[i].selectedIndex = 0;
        } else if (formobj.elements[i].type == "select-multiple") {
            for (j = 0; j < formobj.elements[i].options.length; j++) {
                formobj.elements[i].options[j].selected = formobj.elements[i].options[j].defaultSelected;
            }
            formobj.elements[i].selectedIndex = -1;
        }
    }
}
function selectMulti() {
    var objCheckBox = document.conditionForm.getElementsByTagName('input');
    for (i = 0; i < objCheckBox.length; i++) {
        if (objCheckBox[i].className == "clzCheck" && objCheckBox[i].checked) {
	        var objName = objCheckBox[i].name;
	        var indexF = objName.lastIndexOf('_');
	        var indexT = objName.lastIndexOf(':chkSelect');
	        document.conditionForm.elements['conditionForm:menuSelectIndex'].value
	            = document.conditionForm.elements['conditionForm:menuSelectIndex'].value + objName.substring(indexF + 1, indexT) + ",";
	    }
    }
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:select';
	document.conditionForm.submit();
	return false;
}
//-->
</SCRIPT>
<form m:id="conditionForm">
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:value="#{menuSearchReqDto.windowId}"/>
	<input type="hidden" m:id="selectedIndex" m:value="#{menuSearchReqDto.selectedIndex}"/>
	<input type="hidden" m:value="#{menuSearchReqDto.hanbaiEndIn}"/>
	<input type="hidden" m:value="#{menuSearchReqDto.search50TabType}"/>
	<input type="hidden" m:id="menuSelectIndex" m:value="#{menuSearchReqDto.menuSelectIndex}"/>
	<a id="select" m:action="#{menuSearchAction.select}"/>
	<input type="button" value="検索" class="operation_button" m:action="#{menuSearchAction.search}" onDblClick="return false;"/>&nbsp;&nbsp;
	<input type="button" value="戻る" m:action="#{menuSearchAction.back}"/>&nbsp;&nbsp;
	<input type="button" value="クリア" onclick="clearForm(this.form);"/>&nbsp;&nbsp;
	<input type="button" value="決定" onclick="javascript:return selectMulti();" m:rendered="#{menuSearchReqDto.selectMode == 1}" disabled="#{menuSearchReqDto.listSearchData == null}"/>

	<table class="body_table" style="margin-top:4px;">
	  <tr>
	    <th>メニュー名</th>
	    <td>
	      <input class="width_210" type="text" m:id="menuNameKj" m:value="#{menuSearchReqDto.menuNameKj}" m:size="40" m:maxlength="40" onFocus="this.style.imeMode='active';"/>
	    </td>
	    <th>メニューコード</th>
	    <td>
	      <input class="width_62" type="text" m:id="menuCdFrom" m:value="#{menuSearchReqDto.menuCdFrom}" m:converter="#{codeConvtMenu}" m:size="10" m:maxlength="6" style="ime-mode:disabled"/>
	      〜<input class="width_62" type="text" m:id="menuCdTo" m:value="#{menuSearchReqDto.menuCdTo}" m:converter="#{codeConvtMenu}" m:size="10" m:maxlength="6" style="ime-mode:disabled"/>
	    </td>
	  </tr>
	  <tr>
	    <th>メニュー分類</th>
	    <td>
	    	<div class="hideArea">
	    		<select m:value="#{menuSearchReqDto.menuBunrui}"
					m:items="#{menuSearchSesDto.listMenuBunrui}"
					m:itemValue="menuBunrui"
					m:itemLabel="mbunruiNameKj"
					m:nullLabel=" ">
			      	<option value="01">分類１</option>
			      	<option value="02">分類２</option>
			      	<option value="03">分類３</option>
				</select>
	      	</div>
	    </td>
		<th>ソート順</th>
		<td>
			<span m:converter="#{characterEncodingConverter}" m:inject="s:selectOneRadio2" m:value="#{menuSearchReqDto.sortType}">
			<input type="radio" name="sort" value="CODE" checked="checked"/>コード順&nbsp;
			<input type="radio" name="sort" value="NAME" />名称順(カナ順)
			</span>
		</td>
	  </tr>
	</table>
	<span m:rendered="#{menuSearchReqDto.listSearchData != null}">
	<table class="body_table2" width="770px" style="margin-top:4px;">
	  <tr class="header_row">
	    <th m:rendered="#{menuSearchReqDto.selectMode == 1}" class="body_header3 col_select">選択</th>
	    <th class="col_menuCd">
	      メニューコード</th>
	    <th class="col_menuNameKj">
	      メニュー名</th>
	    <th class="col_menuName10">
	      メニュー名（カナ）</th>
	    <th class="col_menuBunruiNameKj">
	      メニュー分類 </th>
	  </tr>
	</table>
	<div class="scroll_area">
		<table class="body_table2" style="border-top-width : 0px;" width="770px">
		    <div m:inject="s:forEach"
		         m:items="#{menuSearchReqDto.listSearchData}"
		         m:var="e" m:varindex="i">
		      <tr class="non_top_border">
			    <td m:rendered="#{menuSearchReqDto.selectMode == 1}"
			        class="col_select"
			        style="text-align:center;"><input type="checkbox" m:id="chkSelect" class="clzCheck"/></td>
		        <td class="col_menuCd"><span m:value="#{e.menuCd}"/></td>
		        <td class="col_menuNameKj">
		          <a m:rendered="#{menuSearchReqDto.selectMode != 1}"
		             href="#" onclick="select(#{i})"><span m:converter="#{characterEncodingConverter}" m:value="#{e.menuNameKj}"/></a>
		          <span m:converter="#{characterEncodingConverter}" m:rendered="#{menuSearchReqDto.selectMode == 1}"><span m:converter="#{characterEncodingConverter}" m:value="#{e.menuNameKj}"/></span>
		        </td>
		        <td class="col_menuName10"><span m:converter="#{characterEncodingConverter}" m:value="#{e.menuName10}"/></td>
		        <td class="col_menuBunruiNameKj"><span m:converter="#{characterEncodingConverter}" m:value="#{e.mbunruiNameKj}"/></td>
		      </tr>
		    </div>
		</table>
	</div>
	</span>
	<input type="text" m:id="dummyEnter" style="display:none"/>
</form>
</span>
</body>
</html>
