<html xmlns:m="http://www.seasar.org/maya" m:action="#{mosChickenStateConfirmConditionAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>ﾋﾟｰｽ・ﾏﾈｰｼﾞｬｰ予約・在庫状況一覧</title>
<span m:inject="f:param" m:name="layoutTitle" m:value="ﾋﾟｰｽ・ﾏﾈｰｼﾞｬｰ予約・在庫状況一覧"/>
<span m:inject="s:insert" m:name="bodyTitleName">■ﾋﾟｰｽ・ﾏﾈｰｼﾞｬｰ予約・在庫状況一覧</span>
<span m:inject="f:param" m:name="userTypeCd" m:value="#{mosChickenStateConfirmDto.usertypeCd}"/>
<span m:inject="f:param" m:name="isHonbu" m:value="#{mosChickenStateConfirmDto.usertypeCd=='01'}"/>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBS018V01"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
</head>
<body>
<span m:inject="s:insert" m:name="body" >
<script type="text/javascript">
<!--
var userTypeHONBU = "01";
var userTypeONER = "02";
var userTypeMISE = "03";

function load(){
	focusElement("conditionForm");
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "";
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function returnLoadingStatus(){
	if(isLoadingFlgOFF()) {
		setLoadingFlg();
		return true;
	}
	return false;
}
/**
 * ウィンドウロードステータス取得処理
 *
 */
function isLoadingFlgOFF(){
	return (document.conditionForm.elements['conditionForm:loadingFlg'].value != "ON");
}
/**
 * オーナー検索ボタン押下時処理
 *
 */
function searchOner(){
	if(returnLoadingStatus()){
		setJokenData();
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:searchOner';
		document.conditionForm.target ="_self";
		document.conditionForm.submit();
	}
}
/**
 * タイトルプルダウンリスト変更時処理
 *
 * タイトルプルダウンの値毎に
 * 対象条件プルダウンの内容を変更し、
 * 対象条件プルダウンが変更されることにより表示対象オブジェクトも変更される。
 */
function changeTitle(){
	if(returnLoadingStatus()){
		setJokenData();
		document.conditionForm.target ="_self";
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:changeTitle';
		document.conditionForm.submit();
	}
}
/**
 * 検索ボタン押下時処理
 *
 */
function search(){
	setJokenData();
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:search';	
	document.conditionForm.submit();
}
/**
 * 実行ボタン押下時処理
 * 本部ユーザーのみ使用
 *
 */
function selectOner(){
	setJokenData();
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:selectOner';
	document.conditionForm.submit();
}
/**
 * 戻るボタン押下時処理
 * 本部ユーザーのみ使用
 *
 */
function back(){
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:back';
	document.conditionForm.submit();
}
/**
 * ウィンドウロードフラグ設定処理
 *
 *
 */
function setLoadingFlg() {
	document.conditionForm.elements['conditionForm:loadingFlg'].value = "ON";
}
function setJokenData(){
	if(isUserType(userTypeHONBU)){
		//本部用
		if(document.conditionForm.elements['conditionForm:onerCd'] != null){
			var onerCd = document.conditionForm.elements['conditionForm:onerCd'].value;
			document.conditionForm.elements['conditionForm:targetOnerCd'].value   =onerCd;
			return;
		}
	}
	//対象管理番号を設定
	var elementCkanriNo = document.conditionForm.elements['conditionForm:ckanriNo'];
	if(elementCkanriNo != null){
		var cKanriNo = elementCkanriNo.value
		document.conditionForm.elements['conditionForm:targetCkanriNo'].value   =cKanriNo;
	}
	//対象店舗コードを設定
	var elementMise = document.conditionForm.elements['conditionForm:miseCd'];
	if(elementMise != null){
		var miseCd = elementMise.value
		document.conditionForm.elements['conditionForm:targetMiseCd'].value   =miseCd;
	}
	//対象日付を設定
	var elementDate = document.conditionForm.elements['conditionForm:taishoDate'];
	if(elementDate != null){
		var taishoDate = elementDate.value;
		document.conditionForm.elements['conditionForm:targetDate'].value   =taishoDate;
	}
}
/**
 * ユーザータイプコード判断処理
 */
function isUserType(code){
	var userType = document.conditionForm.elements['conditionForm:usertypeCd'].value;
	return (code == userType);
}

//-->
</script>

<form m:id="conditionForm" onKeyDown="return setDefaultSubmitButton('conditionForm','executeBt');">
    <input type="hidden" m:id="viewId" m:value="#{viewIdValue}" />
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="usertypeCd" m:value="#{userTypeCd}"/>
	<input type="hidden" m:id="targetCkanriNo" m:value="#{mosChickenStateConfirmDto.targetCkanriNo}"/>
	<input type="hidden" m:id="targetCompanyCd" m:value="#{mosChickenStateConfirmDto.targetCompanyCd}"/>
	<input type="hidden" m:id="targetOnerCd" m:value="#{mosChickenStateConfirmDto.targetOnerCd}"/>
	<input type="hidden" m:id="targetMiseCd" m:value="#{mosChickenStateConfirmDto.targetMiseCd}"/>
	<input type="hidden" m:id="targetDate" m:value="#{mosChickenStateConfirmDto.targetDate}"/>
	<input type="hidden" m:id="targetShokuCd" m:value="#{mosChickenStateConfirmDto.targetShokuCd}"/>
	<input type="hidden" m:id="windowId" m:value="#{mosChickenStateConfirmDto.windowId}"/>
	<input type="hidden" id="loadingFlg" value=""/>
	<div class="search_condition">
		<a id="searchOner" m:action="#{mosChickenStateConfirmConditionAction.callOnerForm}"/>
		<a id="changeTitle" m:action="#{mosChickenStateConfirmConditionAction.changeTitle}"/>
		<a id="search" m:action="#{mosChickenStateConfirmConditionAction.search}"/>
		<a id="selectOner" m:action="#{mosChickenStateConfirmConditionAction.selectOner}"/>
		<a id="back" m:action="#{mosChickenStateConfirmConditionAction.back}"/>
		<table class="hiddenBody">
			<tr m:rendered="#{mosChickenStateConfirmDto.onerSelectFlg == false && isHonbu}">
				<td>
				<table class="body_table">
					<tr>
					<th nowrap=" nowrap" style="border-right-width: 0;">
						オーナー</th>
					<th width="50" style="border-left-width: 0;">
						<input type="button" name="onersearchbt" value="検索"
						       onClick="searchOner();" onDblClick="return false;"/></th>
					<td><input type="text" m:id="onerCd"
					           value="#{mosChickenStateConfirmDto.targetOnerCd}" maxlength="5" size="10" class="imenotuse"/></td>
					</tr>
				</table>
				</td>
				<td style="padding-left:3px;">
					<input type="button" name="conditionForm:executeBt" 
                           value="実行" onClick="selectOner();" onDblClick="return false"/>
				</td>
			</tr>
			<span m:rendered="#{mosChickenStateConfirmDto.onerSelectFlg == true && mosChickenStateConfirmDto.listTitle != null}">
				<span m:rendered="#{isHonbu}">
					<tr>
						<td valign="bottom">
							<input type="button" class="operation_button" value="戻る" onClick="back();" onDblClick="return false"/>
						</td>
					</tr>
				</span>
				<tr>
					<td>
					<table class="body_table" style="margin-top:4px;">
						<tr>
							<th nowrap=" nowrap">タイトル</th>
							<td nowrap=" nowrap">
								<span m:rendered="#{mosChickenStateConfirmDto.title1CntFlg == false}">
								<div class="hideArea">
								<select class="condition_field" 
										m:id="ckanriNo"
										m:value="#{mosChickenStateConfirmDto.targetCkanriNo}"
										m:items="#{mosChickenStateConfirmDto.listTitle}"
										m:itemValue="ckanriNo"
										m:itemLabel="title"
										m:onchange="changeTitle()"
										>
										<option value="999999">タイトル</option>
									</select>
								</div>
								</span>
								<span m:rendered="#{mosChickenStateConfirmDto.title1CntFlg == true}">
									&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{mosChickenStateConfirmDto.targetTitle}"/>&nbsp;
								</span>
							</td>
							<th nowrap=" nowrap" class="body_headeer4">対象店舗</th>
							<td width="*">
								<span m:rendered="#{mosChickenStateConfirmDto.onerMise1CntFlg == false}">
								<div class="hideArea">
								<select class="condition_field" 
										m:id="miseCd"
										m:value="#{mosChickenStateConfirmDto.targetMiseCd}"
										m:items="#{mosChickenStateConfirmDto.listOnerMise}"
										m:itemValue="miseCd"
										m:itemLabel="miseNameKj"
										>
										<option value="99999">店舗名称</option>
									</select>
								</div>
								</span>
								<span m:rendered="#{mosChickenStateConfirmDto.onerMise1CntFlg == true}">
									&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{mosChickenStateConfirmDto.targetMiseNameKj}"/>&nbsp;
								</span>
							</td>
							<th nowrap=" nowrap" class="body_headeer4">対象日付</th>
							<td>
								<span m:rendered="#{mosChickenStateConfirmDto.date1CntFlg == false}">
								<div class="hideArea">
								<select class="condition_field" 
										m:id="taishoDate"
										m:value="#{mosChickenStateConfirmDto.targetDate}"
										m:items="#{mosChickenStateConfirmDto.listDate}"
										m:itemValue="code"
										m:itemLabel="name"
										>
										<option value="20061020">2006/10/20</option>
									</select>
								</div>
								</span>
								<span m:rendered="#{mosChickenStateConfirmDto.date1CntFlg == true}">
									&nbsp;<span m:value="#{mosChickenStateConfirmDto.targetDate}" m:converter="#{dateConverter}"/>&nbsp;
								</span>
							</td>
							<th nowrap=" nowrap" class="body_headeer4">対象食包材</th>
							<td>
								<span m:rendered="#{mosChickenStateConfirmDto.shokuhouCntFlg == false}">
								<div class="hideArea">
								<select class="condition_field"
										m:id="shokuCd"
										m:value="#{mosChickenStateConfirmDto.targetShokuCd}"
										m:items="#{mosChickenStateConfirmDto.listShokuhou}"
										m:itemValue="shokuCd"
										m:itemLabel="shokuNameKna"
										>
										<option value="999">食包材名称</option>
									</select>
								</div>
								</span>
								<span m:rendered="#{mosChickenStateConfirmDto.shokuhouCntFlg == true}">
									&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{mosChickenStateConfirmDto.targetShokuNameKna}"/>&nbsp;
								</span>
							</td>
						</tr>
					</table>
					</td>
					<td valign="bottom" style="padding-left:3px;">
						<input type="button" name="conditionForm:executeBt" value="実行"
						       onClick="search(); return false;" onDblClick="return false" 
						       disabled="#{mosChickenStateConfirmDto.execDisabledFlg}"/>
					</td>
				</tr>
			</span>
			<span m:rendered="#{mosChickenStateConfirmDto.onerSelectFlg == true && mosChickenStateConfirmDto.listTitle == null}">
				<tr>
					<td><b>現在対象期間中のデータはありません。</b></td>
				</tr>
			</span>
		</table>
	</div>
</form>
</span>
</body>
</html>
