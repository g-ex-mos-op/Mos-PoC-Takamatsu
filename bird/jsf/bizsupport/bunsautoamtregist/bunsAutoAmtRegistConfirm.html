<html xmlns:m="http://www.seasar.org/maya" m:action="#{bunsAutoAmtRegistConfirmAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title><span m:value="バンズ自動設定数量照会/変更（確認画面）"/></title>
<span m:inject="f:param" m:name="layoutTitle" m:value="バンズ自動設定数量照会/変更(確認画面)"/>
<span m:inject="s:insert" m:name="bodyTitleName">■バンズ自動設定数量照会/変更(確認画面)</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBS026V03"/>
<span m:inject="f:param" m:name="onLoadName" m:value="init()"/>
</head>
<body>
<span m:inject="s:insert" m:name="body" >
<style type="text/css">
<!--
.scroll_area {
	height				: 460px;
	width				: 100%;
}
-->
</style>
<SCRIPT LANGUAGE="javascript">
<!--
/**
 * 初期化処理
 */
function init() {
}
/**
 * 照会エリア終了ボタン押下時処理
 *
 */
function execEnd(){
	//実行前に確認アラートを出力
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:execEnd';
	document.conditionForm.submit();
}
/**
 * 確認エリア戻るボタン押下時処理
 *
 */
function execConfirmback(confirmMsg){
	//実行前に確認アラートを出力
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:execConfirmback';
	document.conditionForm.submit();
}
/**
 * 登録・終了ボタン押下時処理
 *
 */
function execRegist(){
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:execRegist';
	document.conditionForm.submit();
}


-->
</SCRIPT>

<form m:id="conditionForm" onKeyDown="return setDefaultSubmitButton('conditionForm','executeBt');">
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="windowId" m:value="#{bunsAutoAmtRegistReqDto.windowId}"/>
	<input type="hidden" id="loadingFlg" value=""/>
	<a id="execEnd" m:action="#{bunsAutoAmtRegistConfirmAction.end}"/>
	<a id="execConfirmback" m:action="#{bunsAutoAmtRegistConfirmAction.back}"/>
	<a id="execRegist" m:action="#{bunsAutoAmtRegistConfirmAction.regist}"/>
	<span m:rendered="#{bunsAutoAmtRegistDto.regist}">
	<!-- 確認の場合 -->
		<input type="button" name="conditionForm:executeBt" class="operation_button" value="戻る" onClick="execConfirmback();" onDblClick="return false"/>
		<input type="button" name="execRegistBt" class="operation_button" value="登録・終了" onClick="execRegist();" onDblClick="return false"/>
		<span style="font-weight:bold;margin-left:5px;">以下の内容で登録します。誤りがある場合は、戻るボタンを押して前の画面に戻ってください。</span>
	</span>
	<span m:rendered="#{bunsAutoAmtRegistDto.honbuUser && bunsAutoAmtRegistDto.regist == false}">
	<!-- 本部ユーザーでかつ照会の場合 -->
		<input type="button" name="conditionForm:executeBt" class="operation_button" value="終了" onClick="execEnd();" onDblClick="return false"/>
	</span>

	<span m:rendered="#{bunsAutoAmtRegistReqDto.listSearchData != null}">
		<div class="scroll_area" style="margin-top:4px;">
			<span m:rendered="#{bunsAutoAmtRegistDto.honbuUser}">
				<table class="body_table2" border="1">
					<tr>
						<div m:rendered="#{bunsAutoAmtRegistReqDto.taishoJokenOner}">
						<th width="110px">対象オーナー</th>
				    	<td><span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetOnerCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetNameKj}"/>&nbsp;</td>
						</div>
						<div m:rendered="#{bunsAutoAmtRegistReqDto.taishoJokenMise}">
						<th width="90px">対象店舗</th>
				    	<td><span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetMiseCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetNameKj}"/>&nbsp;</td>
						</div>
						<div m:rendered="#{bunsAutoAmtRegistReqDto.taishoJokenSv}">
						<th width="90px">対象SV</th>
				    	<td><span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetSvCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetNameKj}"/>&nbsp;</td>
						</div>
				   	</tr>
				</table>
			</span>
			<div m:inject="s:forEach" m:items="#{bunsAutoAmtRegistReqDto.listSearchDataMiseList}" m:var="mise" m:varindex="g">
				<table width="97%" cellspacing="0" cellpadding="0">
					<tr height="30px">
						<td>
							<table class="body_table" width="100%">
						      <tr class="defaultTR">
						      	<th width="90px">対象店舗</th>
							    <td width="*"><span m:converter="#{characterEncodingConverter}" m:value="#{mise.miseCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{mise.miseNameKj}"/></td>
						      	<th width="90px">最終更新日</th>
							    <td width="90px">
								<span m:rendered="#{bunsAutoAmtRegistDto.regist}">
							    	<span m:value="#{bunsAutoAmtRegistDto.birdDateInfo.sysDate}" m:converter="#{bunsAutoAmtRegistConverter2}"/>
							    </span>
							    <span m:rendered="#{!bunsAutoAmtRegistDto.regist}">
							    	<span m:value="#{mise.lastDt}" m:converter="#{bunsAutoAmtRegistConverter2}"/>
							    </span>
							    </td>
						      </tr>
							</table>
						</td>
					</tr>
					<tr>
						<td>
						<table class="body_table2" width="100%">
				      		<tr class="header_row">
				      			<th width="90px">商品コード</th>
				      			<th width="*">商品名称</th>
				      			<th width="90px">単位</th>
				      			<th width="90px">平日納品</th>
				      			<th width="90px">土曜納品</th>
				      			<th width="90px">日祝納品</th>
				      		</tr>
							<div m:inject="s:forEach" m:items="#{bunsAutoAmtRegistReqDto.listSearchData}" m:var="shohin" m:varindex="i">
								<span m:rendered="#{mise.miseCd == shohin.miseCd}">
								<!--対象メニュー-->
						      		<tr>
									    <td align="right"><span m:converter="#{characterEncodingConverter}" m:value="#{shohin.shoCdDai}"/></td>
									    <td><span m:converter="#{characterEncodingConverter}" m:value="#{shohin.shoNameKj}"/></td>
									    <td align="center"><span m:converter="#{characterEncodingConverter}" m:value="#{shohin.nisuName}"/></td>
									    <td align="right"><span m:value="#{shohin.amtWeek}"/></td>
									    <td align="right"><span m:converter="#{characterEncodingConverter}" m:value="#{shohin.amtSatd}"/></td>
									    <td align="right"><span m:converter="#{characterEncodingConverter}" m:value="#{shohin.amtHold}"/></td>
								    </tr>
							    </span>
						    </div>
						</table>
						</td>
					</tr>
					<tr height="10px">
						<td></td>
					</tr>
				</table>
			</div>
		</div>
	</span>
	<input type="text" m:id="dummyText" m:style="display:none;"/>
</form>
</span>
</body>
</html>
