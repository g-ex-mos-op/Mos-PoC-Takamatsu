<html xmlns:m="http://www.seasar.org/maya" m:action="#{bunsAutoAmtRegistEditAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title><span m:value="バンズ自動設定数量照会/変更（編集画面）"/></title>
<span m:inject="f:param" m:name="layoutTitle" m:value="バンズ自動設定数量照会/変更(編集画面)"/>
<span m:inject="s:insert" m:name="bodyTitleName">■バンズ自動設定数量照会/変更(編集画面)</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBS026V02"/>
<span m:inject="f:param" m:name="onLoadName" m:value="init()"/>
<span m:inject="f:param" m:name="registedMsg" m:value="登録しました。"/>
</head>
<body>
<span m:inject="s:insert" m:name="body" >
<style type="text/css">
<!--
.scroll_area {
	height				: 460px;
	width				: 100%;
}
@media print {
	.scroll_area {
	  width			: 100%;
	}
}
/* 入力フィールドの右詰入力へ指定するためのスタイルシート */
.ratio_style {
  text-align       : right;
  background-color : #FFFFFF;
  color            : black;
}
-->
</style>
<SCRIPT LANGUAGE="javascript">
<!--
/**
 * 初期化処理
 */
function init() {
	var registedFlg = document.conditionForm.elements['conditionForm:registedFlg'].value;
	if("comp" == registedFlg){
		alert(document.conditionForm.elements['conditionForm:registedMsg'].value);
	}
	focusElement('conditionForm');
}
/**
 * 編集エリア戻るボタン押下時処理
 *
 */
function execEditback(confirmMsg){
	//実行前に確認アラートを出力
	if(confirm(confirmMsg)){
		document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:execEditback';
		document.conditionForm.submit();
	}
}
/**
 * 編集エリア確認ボタン押下時処理
 *
 */
function execConfirm(){
	document.conditionForm.elements['conditionForm:__link_clicked__'].value='conditionForm:execConfirm';
	document.conditionForm.submit();
}

-->
</SCRIPT>

<!-- 本部ユーザーの場合 -->
<form m:id="conditionForm" onKeyDown="return setDefaultSubmitButton('conditionForm','executeBt');">
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="windowId" m:value="#{bunsAutoAmtRegistReqDto.windowId}"/>
	<input type="hidden" m:id="registedFlg" m:value="#{bunsAutoAmtRegistReqDto.registedFlg}"/>
	<input type="hidden" id="registedMsg" value="#{registedMsg}"/>
	<input type="hidden" id="loadingFlg" value=""/>
	<a id="execEditback" m:action="#{bunsAutoAmtRegistEditAction.back}"/>
	<a id="execConfirm" m:action="#{bunsAutoAmtRegistEditAction.confirm}"/>
	<span m:rendered="#{bunsAutoAmtRegistDto.honbuUser}">
		<input type="button" value="戻る" onClick="execEditback('編集中の内容がある場合は破棄されます。よろしいですか？'); return false;" onDblClick="return false"/>
	</span>
	<span m:rendered="#{bunsAutoAmtRegistDto.listRegData != null}">
		<input type="button" id="eidtbtn" value="確認" onClick="execConfirm(); return false;" onDblClick="return false" name="conditionForm:executeBt"/>
		<span style="font-weight:bold;margin-left:5px;">納品数量の変更入力をしてください。入力翌日に反映されます。</span>
	</span>
	<span m:rendered="#{bunsAutoAmtRegistDto.listRegData != null}">
		<div class="scroll_area" style="margin-top:4px;">
			<span m:rendered="#{bunsAutoAmtRegistDto.honbuUser}">
				<table class="body_table2">
					<tr>
						<div m:rendered="#{bunsAutoAmtRegistReqDto.taishoJokenOner}">
						<th width="110px">対象オーナー</th>
				    	<td><span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetOnerCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetNameKj}"/>&nbsp;</td>
						</div>
						<div m:rendered="#{bunsAutoAmtRegistReqDto.taishoJokenMise}">
						<th width="90px">対象店舗</th>
				    	<td><span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetMiseCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetNameKj}"/>&nbsp;</td>
						</div>
						<div m:rendered="#{bunsAutoAmtRegistReqDto.taishoJokenSv}">
						<th width="90px">対象SV</th>
				    	<td><span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetSvCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{bunsAutoAmtRegistReqDto.targetNameKj}"/>&nbsp;</td>
						</div>
				   	</tr>
				</table>
			</span>
			<div m:inject="s:forEach" m:items="#{bunsAutoAmtRegistDto.listRegDataMiseList}" m:var="mise" m:varindex="g">
				<table width="98%" cellspacing="0" cellpadding="0">
					<tr height="30px">
						<td>
							<table class="body_table" width="100%" vspace="3px">
						      <tr class="defaultTR">
						      	<th width="90px">対象店舗</th>
							    <td width="*"><span m:converter="#{characterEncodingConverter}" m:value="#{mise.miseCd}"/>&nbsp;<span m:converter="#{characterEncodingConverter}" m:value="#{mise.miseNameKj}"/></td>
						      	<th width="90px">最終更新日</th>
							    <td width="90px"><span m:value="#{mise.lastDt}" m:converter="#{bunsAutoAmtRegistConverter2}"/></td>
						      </tr>
							</table>
						</td>
					</tr>
					<tr>
						<td>
						<table class="body_table2" width="100%">
				      		<tr class="header_row">
				      			<th width="90px">商品コード</th>
				      			<th width="*">商品名称</th>
				      			<th width="90px">単位</th>
				      			<th width="90px">平日納品</th>
				      			<th width="90px">土曜納品</th>
				      			<th width="90px">日祝納品</th>
				      		</tr>
							<div m:inject="s:forEach" m:items="#{bunsAutoAmtRegistDto.listRegData}" m:var="shohin" m:varindex="i">
								<span m:rendered="#{mise.miseCd == shohin.miseCd}">
								<!--対象メニュー-->
						      		<tr>
									    <td align="right"><span m:converter="#{characterEncodingConverter}" m:value="#{shohin.shoCdDai}"/></td>
									    <td><span m:converter="#{characterEncodingConverter}" m:value="#{shohin.shoNameKj}"/></td>
									    <td align="center"><span m:converter="#{characterEncodingConverter}" m:value="#{shohin.nisuName}"/></td>
									    <td align="center"><input type="text" m:class="ratio_style" m:id="strAmtWeek" m:value="#{shohin.strAmtWeek}" maxlength="2" size="8"  style="ime-mode:disabled"/></td>
									    <td align="center"><input type="text" m:class="ratio_style" m:id="strAmtSatd" m:value="#{shohin.strAmtSatd}" maxlength="2" size="8"  style="ime-mode:disabled"/></td>
									    <td align="center"><input type="text" m:class="ratio_style" m:id="strAmtHold" m:value="#{shohin.strAmtHold}" maxlength="2" size="8"  style="ime-mode:disabled"/></td>
								    </tr>
							    </span>
						    </div>
						</table>
						</td>
					</tr>
					<tr height="10px">
						<td></td>
					</tr>
				</table>
			</div>
		</div>
	</span>
	<input type="text" m:id="dummyText" m:style="display:none;"/>
	</form>
</span>
</body>
</html>
