<html xmlns:m="http://www.seasar.org/maya" m:extends="/jsf/layout/layoutNoNavi.html" m:action="#{orderTimeRequiredAction.initialize}">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>オーダー提供時間集計ダウンロード</title>
</head>

<body>
<span m:inject="f:param" m:name="layoutTitle" m:value="オーダー提供時間集計ダウンロード"/>
<span m:inject="s:insert" m:name="bodyTitleName">■オーダー提供時間集計ダウンロード</span>
<span m:inject="f:param" m:name="onLoadName" m:value="load()"/>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBS035V01"/>
<span m:inject="s:insert" m:name="body">

<style type="text/css">
<!--

-->
</style>

<script type="text/javascript">
<!--
function load(){
	focusElement('jokenForm');
}
/**
 * プルダウンリストエレメント取得処理
 */
function getPullDownElement(targetTag, commonClassName, targetCode) {
	var objsDiv = document.jokenForm.getElementsByTagName(targetTag);
	for (i = 0; i < objsDiv.length; i++) {
		var classNm = objsDiv[i].className;
		if(classNm.indexOf(commonClassName)>=0){
			if(classNm.indexOf(targetCode)>=0) {
				return elementPullDown = objsDiv[i];
			}
		}
	}
	return null;
}
/*
 * 条件フォーム用表示ステータス変更処理
 */
function changeDisplay(targetTag, firstCalssNm, lastClassNm) {
	var objs = document.jokenForm.getElementsByTagName(targetTag);
	for (i = 0; i < objs.length; i++) {
		var classNm = objs[i].className;
		if(classNm.indexOf(firstCalssNm)>=0){
			if(lastClassNm != "" && classNm.indexOf(lastClassNm)>=0) {
				objs[i].style.display     = "inline";
			}else{
				objs[i].style.display   = "none";
			}
		}
	}
}
/**
 * 対象期間プルダウン変更時処理
 *
 */
function changeTaishoKikan(myElemtnt) {
    sIndex = myElemtnt.selectedIndex;
    var selectedCd = myElemtnt.options[sIndex].value;

	var toPullDown = document.jokenForm.elements['jokenForm:kikanTo'];
	toPullDown.selectedIndex = 0;
    //期間指定日プルダウン表示制御処理
    if("DAY" == selectedCd) {
   		changeDisplay("div", "pdwn_kikan", "");
   	}
   	else if("DAYS" == selectedCd) {
   		changeDisplay("div", "pdwn_kikan_", "DAYS");
   	}
}
//-->
</script>

<form m:id="jokenForm" onKeyDown="return setDefaultSubmitButton('jokenForm','btnExecute');">
	<input type="hidden" m:id="windowId" m:value="#{orderTimeRequiredReqDto.windowId}"/>
	<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
	<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
	<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
	<table class="hiddenBody">
		<tr>
			<td>
				<table class="body_table">
					<tr>
						<th>対象店舗<span m:rendered="#{birdUserInfo.mstUser.userTypeCd == '01'}">&nbsp;<input type="button" value="検索" m:action="#{orderTimeRequiredAction.callMiseForm}"/></span></th>
						<td>
							<span m:rendered="#{birdUserInfo.mstUser.userTypeCd == '01'}">
							<input type="text" m:size="10" m:maxlength="5" id="miseCd" class="imenotuse" m:value="#{orderTimeRequiredReqDto.miseCd}"/>
							</span>
				        	<div m:rendered="#{birdUserInfo.mstUser.userTypeCd == '02'}" class="hideArea">
							<select name="miseCd"
							        m:value="#{orderTimeRequiredReqDto.miseCd}"
									m:items="#{orderTimeRequiredReqDto.listMise}"
									m:itemValue="hyojiTaishoCd"
									m:itemLabel="hyojiTaishoNameAddClose">
								<option value="02001">成増店</option>
							</select>
							</div>
							<span m:rendered="#{birdUserInfo.mstUser.userTypeCd == '03'}">
								<span m:converter="#{characterEncodingConverter}" m:value="#{orderTimeRequiredReqDto.miseCd} #{orderTimeRequiredReqDto.miseNameKj}"/>
								<input type="hidden" m:value="#{orderTimeRequiredReqDto.miseCd}"/>
								<input type="hidden" m:value="#{orderTimeRequiredReqDto.miseNameKj}"/>
							</span>

						</td>
						<th>対象期間</th>
						<td>
							<div class="hideArea">
								<select style="float:left" class="condition_field"
										m:id="taishoKikan"
										m:value="#{orderTimeRequiredReqDto.taishoKikan}"
										m:items="#{orderTimeRequiredReqDto.listTaishoKikan}"
										m:itemValue="code"
										m:itemLabel="name"
										m:onchange="changeTaishoKikan(this)"
										>
									<option value="DAY">単日</option>
									<option value="DAYS">期間指定</option>
								</select>
							</div>
						</td>
						<th>期間指定</th>
						<td>
							<div class="hideArea">
								<select style="float:left"
									m:id="kikanFrom"
									m:value="#{orderTimeRequiredReqDto.kikanFrom}"
									m:items="#{orderTimeRequiredReqDto.listKikan}"
									m:itemValue="code"
									m:itemLabel="name"
									>
									<option value="20080501">2008/05/01</option>
									<option value="20080401">2008/04/01</option>
									<option value="20080301">2008/03/01</option>
									<option value="20080201">2008/02/01</option>
									<option value="20080101">2008/01/01</option>
								</select>
								<div class="pdwn_kikan_DAYS" style="#{orderTimeRequiredReqDto.taishoKikan=='DAYS'? 'display:inline;':'display:none;'}">
								<span style="float:left;">〜</span><select style="float:left"
									m:id="kikanTo"
									m:value="#{orderTimeRequiredReqDto.kikanTo}"
									m:items="#{orderTimeRequiredReqDto.listKikan}"
									m:itemValue="code"
									m:itemLabel="name"
									>
									<option value="20080501">2008/05/01</option>
									<option value="20080401">2008/04/01</option>
									<option value="20080301">2008/03/01</option>
									<option value="20080201">2008/02/01</option>
									<option value="20080101">2008/01/01</option>
								</select>
								</div>
							</div>
						</td>
					</tr>
				</table>
			</td>
			<td>
				<input style="margin-left:3px;" type="button"
	       id="btnExecute"value="実行" m:action="#{orderTimeRequiredAction.downloadCsv}" /></td>
	       </tr>
	</table>

</form>
</span>
</body>
</html>
