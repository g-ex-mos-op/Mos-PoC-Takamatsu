<html xmlns:m="http://www.seasar.org/maya" m:action="#{plInfoViewAction.initialize}" m:extends="/jsf/layout/layoutNoNavi.html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31j" />
<title>P/L照会</title>
</head>
<body>

<span m:inject="f:param" m:name="layoutTitle" m:value="P/L照会"/>
<span m:inject="f:param" m:name="onLoadName" m:value="load();"/>
<span m:inject="s:insert" m:name="bodyTitleName">■P/L照会</span>
<span m:inject="f:param" m:name="viewIdValue" m:value="BBS006V01"/>
<span m:inject="f:param" m:name="userTypeCd" m:value="#{plInfoViewCommonDto.userTypeCd}"/>
<span m:inject="s:insert" m:name="body">
<STYLE type="text/css" media="screen">
<!--
//-->
</STYLE>
<script type="text/javascript">
<!--
function load() {

}

function switchDisplayBK(mode) {
  var tenpoShu=document.getElementById('tenpoShu');
  var searchType=document.getElementById('searchType');
  if(mode=="tenpo"){
    tenpoShu.style.display="inline";
    searchType.style.display="none";
  }
  else if (mode == "oner") {
    tenpoShu.style.display="none";
    searchType.style.display="inline";
  }
}

function switchDisplayObj() {

  var taishoTenpoIndex = document.plInfoView.elements['plInfoView:condTaishoTenpo'].selectedIndex;
  var taishoTenpo = document.plInfoView.elements['plInfoView:condTaishoTenpo'].value;
  var tenpoShuTitle  =document.getElementById('plInfoView:div_tenpoShuTitle');
  var searchTypeTitle=document.getElementById('plInfoView:div_searchTypeTitle');
  var tenpoShu   =document.getElementById('plInfoView:div_tenpoShu');
  var searchType =document.getElementById('plInfoView:div_searchType');

  var dispTitleMise =document.getElementById('plInfoView:dispTargetTitleMise');
  var dispTitleOner =document.getElementById('plInfoView:dispTargetTitleOner');
  var dispJigyo=document.getElementById('plInfoView:dispTargetJigyo');
  var dispSelectCd =document.getElementById('plInfoView:condSelectCd');
  var dispInputCd =document.getElementById('plInfoView:condInputCd');
  var dispArea =document.getElementById('plInfoView:dispTargetArea');
  var dispSibu =document.getElementById('plInfoView:dispTargetSibu');
  var dispMise =document.getElementById('plInfoView:dispTargetMise');
  var dispOner =document.getElementById('plInfoView:dispTargetOner');
  var dispMise =document.getElementById('plInfoView:condMiseCd');
  var dispOner =document.getElementById('plInfoView:condOnerCd');

  tenpoShuTitle.style.display="none";
  tenpoShu.style.display="none";
  searchTypeTitle.style.display="none";
  searchType.style.display="none";

  dispTitleMise.style.display="none";
  dispTitleOner.style.display="none";
  dispSelectCd.style.display="none";
  dispInputCd.style.display="none";
  dispJigyo.style.display="none";
  dispArea.style.display="none";
  dispSibu.style.display="none";
  dispMise.style.display="none";
  dispOner.style.display="none";

  if(taishoTenpo == ''){
    tenpoShu.style.display="inline";
    tenpoShuTitle.style.display="inline";
    dispSelectCd.style.display="";
  }
  else if (taishoTenpo == '7') {
    dispTitleOner.style.display="inline";
    dispOner.style.display="inline";
    searchType.style.display="inline";
    searchTypeTitle.style.display="inline";
    document.getElementById('plInfoView:condOnerCd').style.display="inline";
    dispInputCd.style.display="";
  }
  else if (taishoTenpo == '6') {
    tenpoShuTitle.style.display="inline";
    dispTitleMise.style.display="inline";
    dispMise.style.display="inline";
    document.getElementById('plInfoView:condMiseCd').style.display="inline";
    dispInputCd.style.display="";
  }
  else {
    tenpoShu.style.display="inline";
    tenpoShuTitle.style.display="inline";
    if (taishoTenpo == '2') {
      dispJigyo.style.display="inline";
    }
    else if (taishoTenpo == '3') {
      dispArea.style.display="inline";
    }
    else if (taishoTenpo == '4') {
      dispSibu.style.display="inline";
      dispSelectCd.style.display="block";
      return;
    }

    dispSelectCd.style.display="";
  }

}

function switchDisplayObjOner() {

  var taishoTenpo = document.plInfoView.elements['plInfoView:condTaishoTenpoOner'].selectedIndex;
  var dispTargetOnerMise  =document.getElementById('plInfoView:dispTargetOnerMise');
  var dispTargetOnerMiseTitle  =document.getElementById('plInfoView:dispTargetOnerMiseTitle');

  dispTargetOnerMise.style.display="none";

  if(taishoTenpo == 4){
    dispTargetOnerMise.style.display="inline";
  }
}

function setFocus(index) {
  var obj = document.plInfoView.elements['plInfoView:condTaishoTenpo'][index];
  obj.click();
}

//-->
</script>

<form m:id="plInfoView" onKeyDown="return setDefaultSubmitButton('plInfoView','btnExecute');">
<input type="hidden" m:id="viewId" m:value="#{viewIdValue}"/>
<input type="hidden" m:id="initMenuId" m:value="#{menuAction.initMenuId}"/>
<input type="hidden" m:id="initSubMenuId" m:value="#{menuAction.initSubMenuId}"/>
<input type="hidden" m:id="pageType" m:value="#{userTypeCd}"/>

<div class="search_condition" width="100%">

<table class="hiddenBody">
	<tr>
		<td>
		<table class="body_table" >
		    <tr>
		      <th nowrap="nowrap">対象年月</th>
		      <td>
		        <div class="hideArea">
		        <select m:value="#{plInfoViewDto.condTargetYM}"
		                m:items="#{plInfoViewCommonDto.condListTargetYM}"
		                m:itemValue="value"
		                m:itemLabel="label">
		            <option value="">2006/03</option>
		            <option value="">2006/02</option>
		            <option value="">2006/01</option>
		        </select></div>
		      </td>
		      <th nowrap="nowrap">対象条件</th>
		      <div m:rendered="#{plInfoViewCommonDto.userTypeCd == '01'}">
		        <td>
		          <div class="hideArea">
		          <select m:id="condTaishoTenpo"
		                  m:value="#{plInfoViewDto.condTaishoTenpo}"
		                  m:items="#{plInfoViewCommonDto.listCondTaishoTenpo}"
		                  m:itemValue="value"
		                  m:itemlabel="label"
		                  m:onchange="switchDisplayObj()">
		            <option value="">FC全社</option>
		            <option value="2">事業本部</option>
		            <option value="3">営業エリア</option>
		            <option value="4">支部</option>
		            <option value="6">店舗</option>
		            <option value="7">オーナー</option>
		          </select></div>
		        </td>
		        <th style="border-right-width:0px;" nowrap="nowrap">表示対象</th>
		        <th style="border-left-width:0px;">
		          <div m:id="dispTargetTitleMise"
		               m:style="display:#{plInfoViewDto.condTaishoTenpo == '6' ? 'inline;' : 'none;'}">
		               <input type="button" value="検索" class="button_in_table"
		                      m:action="#{plInfoViewAction.callMiseForm}"/></div>
		          <div m:id="dispTargetTitleOner"
		               m:style="display:#{plInfoViewDto.condTaishoTenpo == '7' ? 'inline;' : 'none;'}">
		               <input type="button" value="検索" class="button_in_table"
		                      m:action="#{plInfoViewAction.callOnerForm}"/></div>
		        </th>
		        <td m:id="condSelectCd" width="auto" style="#{plInfoViewDto.condTaishoTenpo != '6' && plInfoViewDto.condTaishoTenpo != '7' ? 'display:;' : 'display:none;'}">
		          <div class="dispTargetJigyo" m:id="dispTargetJigyo" m:style="#{plInfoViewDto.condTaishoTenpo == '2' ? 'display:inline;' : 'display:none;'}">
			        <div class="hideArea">
				        <select m:value="#{plInfoViewDto.condJigyouCd}"
				                m:items="#{plInfoViewCommonDto.condListJigyouCd}"
				                m:itemValue="jigyouCd"
				                m:itemLabel="jigyouName">
				            <option value="">第１営業本部</option>
				            <option value="">第２営業本部</option>
				            <option value="">第３営業本部</option>
				        </select></div></div>
		          <div class="dispTargetArea" m:id="dispTargetArea" m:style="#{plInfoViewDto.condTaishoTenpo == '3' ? 'display:inline;' : 'display:none;'}">
			        <div class="hideArea">
				        <select m:value="#{plInfoViewDto.condSlareaCd}"
				                m:items="#{plInfoViewCommonDto.condListSlareaCd}"
				                m:itemValue="slareaCd"
				                m:itemLabel="slareaName">
				            <option value="">第一エリア</option>
				            <option value="">第二エリア</option>
				            <option value="">第三エリア</option>
				        </select></div></div>
		          <div class="dispTargetSibu" m:id="dispTargetSibu" m:style="#{plInfoViewDto.condTaishoTenpo == '4' ? 'display:inline;' : 'display:none;'};width:auto">
			        <div class="hideArea" style="display:inline">
			          <select class="height_21"  style="display:inline;width:auto"
			              m:value="#{plInfoViewDto.condSibuCd}"
			                  m:items="#{plInfoViewCommonDto.condListSibuCd}"
			                  m:itemValue="sibuCd"
			                  m:itemLabel="sibuName">
			              <option value="">北海道支部</option>
			              <option value="">東北支部</option>
			              <option value="">関東支部</option>
			          </select>
			          <select class="height_21" style="display:inline"
			                  m:value="#{plInfoViewDto.condBlockCd}"
			                  m:items="#{plInfoViewCommonDto.condListBlockCd}"
			                  m:itemValue="blockCd"
			                  m:itemLabel="blockName"
			                  m:nulllabel="全ブロック">
			              <option value="">Ａブロック「</option>
			              <option value="">Ｂブロック</option>
			              <option value="">Ｃブロック</option>
			          </select></div></div>
		        </td>
				<td width="120px" m:id="condInputCd" style="#{plInfoViewDto.condTaishoTenpo == '6' || plInfoViewDto.condTaishoTenpo == '7' ? 'display:block;' : 'display:none;'}">
		          <input type="text" m:id="condMiseCd" m:value="#{plInfoViewDto.condMiseCd}"
		                 m:size="10" m:maxlength="5" m:converter="#{codeConverter5}"
		                 class="imenotuse height_11 height_15"
		                 m:style="#{plInfoViewDto.condTaishoTenpo == '6' ? 'display:inline;' : 'display:none;'}"/>
		          <input type="text" m:id="condOnerCd" m:value="#{plInfoViewDto.condOnerCd}"
		                 m:size="10" m:maxlength="5" m:converter="#{codeConverter5}"
		                 class="imenotuse height_11 height_15"
		                 m:style="#{plInfoViewDto.condTaishoTenpo == '7' ? 'display:block;' : 'display:none;'}"/>
				</td>
		        <th>
		          <div nowrap="nowrap" class="div_tenpoShuTitle" m:id="div_tenpoShuTitle" m:style="#{plInfoViewDto.condTaishoTenpo != '7' ? 'display:inline;' : 'display:none;'}">店舗種別</div>
		          <div  nowrap="nowrap" class="div_searchTypeTitle" m:id="div_searchTypeTitle" m:style="#{plInfoViewDto.condTaishoTenpo == '7' ? 'display:inline;' : 'display:none;'}">検索タイプ</div>
		        </th>
		        <td>
		          <div class="div_tenpoShu" m:id="div_tenpoShu" m:style="#{(plInfoViewDto.condTaishoTenpo != '6' && plInfoViewDto.condTaishoTenpo != '7') ? 'display:inline;' : 'display:none;'}">
		          <div class="hideArea">
		            <select   m:value="#{plInfoViewDto.condTenpoShu}">
		              <option value="">全店</option>
		              <option value="1">前年対象店</option>
		              <option value="2">予算対象店</option>
		              <option value="3">新店</option>
		            </select>
		          </div>
		          </div>
		          <div class="div_searchType" m:id="div_searchType" m:style="#{plInfoViewDto.condTaishoTenpo == '7' ? 'display:inline;' : 'display:none;'}">
		            <div class="hideArea">
		            <select m:value="#{plInfoViewDto.condSearchType}">
		              <option value="">全社</option>
		              <option value="1">オーナーのみ</option>
		              <option value="2">経営店舗合計</option>
		              <option value="3">経営店舗平均</option>
		            </select></div></div>
		        </td>
		      </div>
		      <div m:rendered="#{plInfoViewCommonDto.userTypeCd == '02'}">
		        <td>
		          <div class="hideArea">
		          <select m:id="condTaishoTenpoOner"
		                  m:value="#{plInfoViewDto.condTaishoTenpoOner}"
		                  m:items="#{plInfoViewCommonDto.listCondTaishoTenpoOner}"
		                  m:itemValue="value"
		                  m:itemlabel="label"
		                  m:onchange="switchDisplayObjOner()">
		            <option value="">全社</option>
		            <option value="1">本社</option>
		            <option value="2">全店合計</option>
		            <option value="3">全店平均</option>
		            <option value="4">店舗</option>
		          </select></div>
		          <input type="hidden" m:value="#{plInfoViewDto.condOnerCd}" m:converter="#{codeConverter5}"/>
		        </td>
		        <th>対象店舗</th>
		        <td width="250px">
		          <div m:id="dispTargetOnerMiseTitle">
			      <div m:id="dispTargetOnerMise" class="hideArea" m:style="#{plInfoViewDto.condTaishoTenpoOner == '4' ? 'display:inline;' : 'display:none;'}">
			        <select m:value="#{plInfoViewDto.condMiseCdOner}"
			                m:items="#{plInfoViewCommonDto.condListOnerTenpo}"
			                m:itemValue="miseCd"
			                m:itemLabel="miseNameKj">
			            <option value="">新瑞店</option>
			            <option value="">平針店</option>
			            <option value="">日進駅前店</option>
			        </select></div></div></td>
		      </div>
        <td m:rendered="#{plInfoViewCommonDto.userTypeCd == '03'}">
          <span m:value="#{plInfoViewDto.condMiseCd}"/>
          <input type="hidden" m:value="#{plInfoViewDto.condMiseCd}" m:converter="#{codeConverter5}"/>
        </td>
	      <td width="50px">
	        <input type="button" value="実行" m:id="btnExecute"
	               class="#{plInfoViewCommonDto.userTypeCd == '01'?'button_in_table':''}"
	               m:action="#{plInfoViewAction.search}"/></td>
	</tr>
	</table>
</td>
</tr>
<tr m:rendered="#{plInfoViewCommonDto.fcRcFlg == true}">
	<td align="right">
	  <input type="checkbox" m:id="uriflg"
	         m:value="#{plInfoViewCommonDto.uriageFlg}"/>売上高＞０の店舗で絞る（加盟店のみ）
	</td>
</tr>
</table>


</div>

<script type="text/javascript">
<!--
  focusElement("plInfoView");
//-->
</script>
<input type="text" m:id="dummyEnter" style="display:none"/>
</form>
</span>
</body>
</html>